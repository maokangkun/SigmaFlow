{"version":3,"mappings":"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","names":["config","_","t","comfyApp","_sfc_main","index","node","releaseStore","debounce","options","value","modelValue","widget","ContextMenu","useReleaseStore","ref","useToast","clamp","items","state","GroupNodeConfig","MAX_LENGTH","MAX_SAFE_INTEGER","constants","debug","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","require$$0","require$$1","re","parseOptions","compareIdentifiers","identifiers","require$$2","require$$3","require$$4","prerelease","semver","SemVer","parse","valid","clean","inc","diff","major","minor","patch","compare","rcompare","compareLoose","compareBuild","sort","rsort","gt","lt","eq","neq","gte","lte","require$$5","cmp","coerce","Range","range","Comparator","require$$6","ANY","satisfies","toComparators","maxSatisfying","minSatisfying","minVersion","comparator","validRange","require$$7","outside","gtr","ltr","intersects","subset","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","require$$18","require$$19","require$$20","require$$21","require$$22","require$$23","require$$24","require$$25","require$$26","require$$27","require$$28","require$$29","require$$30","require$$31","require$$32","require$$33","require$$34","require$$35","require$$36","require$$37","require$$38","require$$39","require$$40","semver.valid","semver.gt","LatentPreviewMethod","LogLevel","HashFunction","AutoLaunch","CudaMalloc","FloatingPointPrecision","CrossAttentionMethod","VramManagement"],"ignoreList":[82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126],"sources":["../../src/components/MenuHamburger.vue","../../src/components/dialog/UnloadWindowConfirmDialog.vue","../../src/components/LiteGraphCanvasSplitterOverlay.vue","../../src/components/common/ExtensionSlot.vue","../../src/components/bottomPanel/BottomPanel.vue","../../src/composables/element/useAbsolutePosition.ts","../../src/composables/element/useDomClipping.ts","../../src/components/graph/widgets/DomWidget.vue","../../src/components/graph/DomWidgets.vue","../../src/composables/graph/useCanvasInteractions.ts","../../src/components/graph/GraphCanvasMenu.vue","../../src/components/graph/MiniMap.vue","../../src/components/graph/NodeTooltip.vue","../../src/composables/canvas/useSelectedLiteGraphItems.ts","../../src/types/selectionOverlayTypes.ts","../../src/components/graph/SelectionOverlay.vue","../../src/components/graph/selectionToolbox/BypassButton.vue","../../src/components/graph/selectionToolbox/ColorPickerButton.vue","../../src/components/graph/selectionToolbox/ConvertToSubgraphButton.vue","../../src/components/graph/selectionToolbox/DeleteButton.vue","../../src/components/graph/selectionToolbox/EditModelButton.vue","../../src/components/graph/selectionToolbox/ExecuteButton.vue","../../src/components/graph/selectionToolbox/ExtensionCommandButton.vue","../../src/components/graph/selectionToolbox/HelpButton.vue","../../src/components/graph/selectionToolbox/Load3DViewerButton.vue","../../src/components/graph/selectionToolbox/MaskEditorButton.vue","../../src/components/graph/selectionToolbox/PinButton.vue","../../src/composables/useRefreshableSelection.ts","../../src/components/graph/selectionToolbox/RefreshSelectionButton.vue","../../src/composables/element/useRetriggerableAnimation.ts","../../src/components/graph/SelectionToolbox.vue","../../src/components/graph/TitleEditor.vue","../../src/stores/workspace/searchBoxStore.ts","../../src/components/primevueOverride/AutoCompletePlus.vue","../../src/components/searchbox/NodeSearchItem.vue","../../src/components/searchbox/NodeSearchBox.vue","../../src/components/searchbox/NodeSearchBoxPopover.vue","../../src/components/sidebar/SidebarIcon.vue","../../src/components/sidebar/SidebarBottomPanelToggleButton.vue","../../src/components/sidebar/SidebarShortcutsToggleButton.vue","../../src/services/releaseService.ts","../../src/stores/releaseStore.ts","../../src/components/helpcenter/HelpCenterMenuContent.vue","../../src/components/helpcenter/ReleaseNotificationToast.vue","../../src/components/helpcenter/WhatsNewPopup.vue","../../src/components/sidebar/SidebarHelpCenterIcon.vue","../../src/components/sidebar/SidebarLogoutIcon.vue","../../src/components/sidebar/SideToolbar.vue","../../src/components/topbar/WorkflowTabPopover.vue","../../src/components/topbar/WorkflowTab.vue","../../src/composables/element/useOverflowObserver.ts","../../src/utils/mouseDownUtil.ts","../../src/components/topbar/WorkflowTabs.vue","../../src/composables/node/useNodePricing.ts","../../src/composables/node/useWatchWidget.ts","../../src/composables/node/useNodeBadge.ts","../../src/composables/useCanvasDrop.ts","../../src/composables/useContextMenuTranslation.ts","../../src/composables/useCopy.ts","../../src/composables/useGlobalLitegraph.ts","../../src/composables/useLitegraphSettings.ts","../../src/composables/usePaste.ts","../../src/composables/useWorkflowAutoSave.ts","../../src/composables/useWorkflowPersistence.ts","../../src/constants/coreSettings.ts","../../src/services/newUserService.ts","../../src/components/graph/GraphCanvas.vue","../../src/components/toast/GlobalToast.vue","../../src/components/toast/RerouteMigrationToast.vue","../../src/components/actionbar/BatchCountEdit.vue","../../src/components/actionbar/ComfyQueueButton.vue","../../src/components/actionbar/ComfyActionbar.vue","../../src/components/breadcrumb/SubgraphBreadcrumbItem.vue","../../src/components/breadcrumb/SubgraphBreadcrumb.vue","../../src/components/topbar/CommandMenubar.vue","../../src/components/topbar/CurrentUserPopover.vue","../../src/components/topbar/CurrentUserButton.vue","../../src/components/topbar/TopMenubar.vue","../../src/composables/useBrowserTabTitle.ts","../../src/scripts/fluxKontextEditNode.ts","../../src/utils/nodeFilterUtil.ts","../../src/composables/useCoreCommands.ts","../../node_modules/semver/internal/constants.js","../../node_modules/semver/internal/debug.js","../../node_modules/semver/internal/re.js","../../node_modules/semver/internal/parse-options.js","../../node_modules/semver/internal/identifiers.js","../../node_modules/semver/classes/semver.js","../../node_modules/semver/functions/parse.js","../../node_modules/semver/functions/valid.js","../../node_modules/semver/functions/clean.js","../../node_modules/semver/functions/inc.js","../../node_modules/semver/functions/diff.js","../../node_modules/semver/functions/major.js","../../node_modules/semver/functions/minor.js","../../node_modules/semver/functions/patch.js","../../node_modules/semver/functions/prerelease.js","../../node_modules/semver/functions/compare.js","../../node_modules/semver/functions/rcompare.js","../../node_modules/semver/functions/compare-loose.js","../../node_modules/semver/functions/compare-build.js","../../node_modules/semver/functions/sort.js","../../node_modules/semver/functions/rsort.js","../../node_modules/semver/functions/gt.js","../../node_modules/semver/functions/lt.js","../../node_modules/semver/functions/eq.js","../../node_modules/semver/functions/neq.js","../../node_modules/semver/functions/gte.js","../../node_modules/semver/functions/lte.js","../../node_modules/semver/functions/cmp.js","../../node_modules/semver/functions/coerce.js","../../node_modules/semver/internal/lrucache.js","../../node_modules/semver/classes/range.js","../../node_modules/semver/classes/comparator.js","../../node_modules/semver/functions/satisfies.js","../../node_modules/semver/ranges/to-comparators.js","../../node_modules/semver/ranges/max-satisfying.js","../../node_modules/semver/ranges/min-satisfying.js","../../node_modules/semver/ranges/min-version.js","../../node_modules/semver/ranges/valid.js","../../node_modules/semver/ranges/outside.js","../../node_modules/semver/ranges/gtr.js","../../node_modules/semver/ranges/ltr.js","../../node_modules/semver/ranges/intersects.js","../../node_modules/semver/ranges/simplify.js","../../node_modules/semver/ranges/subset.js","../../node_modules/semver/index.js","../../src/stores/versionCompatibilityStore.ts","../../src/composables/useFrontendVersionMismatchWarning.ts","../../src/composables/useProgressFavicon.ts","../../src/types/serverArgs.ts","../../src/constants/serverConfig.ts","../../src/services/autoQueueService.ts","../../src/views/GraphView.vue"],"sourcesContent":["<template>\n  <div\n    v-show=\"workspaceState.focusMode\"\n    class=\"comfy-menu-hamburger no-drag\"\n    :style=\"positionCSS\"\n  >\n    <Button\n      v-tooltip=\"{ value: $t('menu.showMenu'), showDelay: 300 }\"\n      icon=\"pi pi-bars\"\n      severity=\"secondary\"\n      text\n      size=\"large\"\n      :aria-label=\"$t('menu.showMenu')\"\n      aria-live=\"assertive\"\n      @click=\"exitFocusMode\"\n      @contextmenu=\"showNativeSystemMenu\"\n    />\n    <div v-show=\"menuSetting !== 'Bottom'\" class=\"window-actions-spacer\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { CSSProperties, computed, watchEffect } from 'vue'\n\nimport { app } from '@/scripts/app'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport { showNativeSystemMenu } from '@/utils/envUtil'\n\nconst workspaceState = useWorkspaceStore()\nconst settingStore = useSettingStore()\nconst exitFocusMode = () => {\n  workspaceState.focusMode = false\n}\n\nwatchEffect(() => {\n  if (settingStore.get('Comfy.UseNewMenu') !== 'Disabled') {\n    return\n  }\n  if (workspaceState.focusMode) {\n    app.ui.menuContainer.style.display = 'none'\n  } else {\n    app.ui.menuContainer.style.display = 'block'\n  }\n})\n\nconst menuSetting = computed(() => settingStore.get('Comfy.UseNewMenu'))\nconst positionCSS = computed<CSSProperties>(() =>\n  // 'Bottom' menuSetting shows the hamburger button in the bottom right corner\n  // 'Disabled', 'Top' menuSetting shows the hamburger button in the top right corner\n  menuSetting.value === 'Bottom'\n    ? { bottom: '0px', right: '0px' }\n    : { top: '0px', right: '0px' }\n)\n</script>\n\n<style scoped>\n.comfy-menu-hamburger {\n  @apply fixed z-[9999] flex flex-row;\n}\n</style>\n","<template>\n  <div>\n    <!--\n    UnloadWindowConfirmDialog: This component does not render\n    anything visible. It is used to confirm the user wants to\n    close the window, and if they do, it will call the\n    beforeunload event.\n    -->\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onBeforeUnmount, onMounted } from 'vue'\n\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\n\nconst settingStore = useSettingStore()\nconst workflowStore = useWorkflowStore()\n\nconst handleBeforeUnload = (event: BeforeUnloadEvent) => {\n  if (\n    settingStore.get('Comfy.Window.UnloadConfirmation') &&\n    workflowStore.modifiedWorkflows.length > 0\n  ) {\n    event.preventDefault()\n    return true\n  }\n  return undefined\n}\n\nonMounted(() => {\n  window.addEventListener('beforeunload', handleBeforeUnload)\n})\n\nonBeforeUnmount(() => {\n  window.removeEventListener('beforeunload', handleBeforeUnload)\n})\n</script>\n","<template>\n  <Splitter\n    :key=\"sidebarStateKey\"\n    class=\"splitter-overlay-root splitter-overlay\"\n    :pt:gutter=\"sidebarPanelVisible ? '' : 'hidden'\"\n    :state-key=\"sidebarStateKey\"\n    state-storage=\"local\"\n  >\n    <SplitterPanel\n      v-show=\"sidebarPanelVisible\"\n      v-if=\"sidebarLocation === 'left'\"\n      class=\"side-bar-panel\"\n      :min-size=\"10\"\n      :size=\"20\"\n    >\n      <slot name=\"side-bar-panel\" />\n    </SplitterPanel>\n\n    <SplitterPanel :size=\"100\">\n      <Splitter\n        class=\"splitter-overlay max-w-full\"\n        layout=\"vertical\"\n        :pt:gutter=\"bottomPanelVisible ? '' : 'hidden'\"\n        state-key=\"bottom-panel-splitter\"\n        state-storage=\"local\"\n      >\n        <SplitterPanel class=\"graph-canvas-panel relative\">\n          <slot name=\"graph-canvas-panel\" />\n        </SplitterPanel>\n        <SplitterPanel v-show=\"bottomPanelVisible\" class=\"bottom-panel\">\n          <slot name=\"bottom-panel\" />\n        </SplitterPanel>\n      </Splitter>\n    </SplitterPanel>\n\n    <SplitterPanel\n      v-show=\"sidebarPanelVisible\"\n      v-if=\"sidebarLocation === 'right'\"\n      class=\"side-bar-panel\"\n      :min-size=\"10\"\n      :size=\"20\"\n    >\n      <slot name=\"side-bar-panel\" />\n    </SplitterPanel>\n  </Splitter>\n</template>\n\n<script setup lang=\"ts\">\nimport Splitter from 'primevue/splitter'\nimport SplitterPanel from 'primevue/splitterpanel'\nimport { computed } from 'vue'\n\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useBottomPanelStore } from '@/stores/workspace/bottomPanelStore'\nimport { useSidebarTabStore } from '@/stores/workspace/sidebarTabStore'\n\nconst settingStore = useSettingStore()\nconst sidebarLocation = computed<'left' | 'right'>(() =>\n  settingStore.get('Comfy.Sidebar.Location')\n)\n\nconst unifiedWidth = computed(() =>\n  settingStore.get('Comfy.Sidebar.UnifiedWidth')\n)\n\nconst sidebarPanelVisible = computed(\n  () => useSidebarTabStore().activeSidebarTab !== null\n)\nconst bottomPanelVisible = computed(\n  () => useBottomPanelStore().bottomPanelVisible\n)\nconst activeSidebarTabId = computed(\n  () => useSidebarTabStore().activeSidebarTabId\n)\n\nconst sidebarStateKey = computed(() => {\n  return unifiedWidth.value ? 'unified-sidebar' : activeSidebarTabId.value ?? ''\n})\n</script>\n\n<style scoped>\n:deep(.p-splitter-gutter) {\n  pointer-events: auto;\n}\n\n:deep(.p-splitter-gutter:hover),\n:deep(.p-splitter-gutter[data-p-gutter-resizing='true']) {\n  transition: background-color 0.2s ease 300ms;\n  background-color: var(--p-primary-color);\n}\n\n.side-bar-panel {\n  background-color: var(--bg-color);\n  pointer-events: auto;\n}\n\n.bottom-panel {\n  background-color: var(--bg-color);\n  pointer-events: auto;\n}\n\n.splitter-overlay {\n  @apply bg-transparent pointer-events-none border-none;\n}\n\n.splitter-overlay-root {\n  @apply w-full h-full absolute top-0 left-0;\n\n  /* Set it the same as the ComfyUI menu */\n  /* Note: Lite-graph DOM widgets have the same z-index as the node id, so\n  999 should be sufficient to make sure splitter overlays on node's DOM\n  widgets */\n  z-index: 999;\n}\n</style>\n","<template>\n  <component :is=\"extension.component\" v-if=\"extension.type === 'vue'\" />\n  <div\n    v-else\n    :ref=\"\n      (el) => {\n        if (el)\n          mountCustomExtension(\n            props.extension as CustomExtension,\n            el as HTMLElement\n          )\n      }\n    \"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { onBeforeUnmount } from 'vue'\n\nimport { CustomExtension, VueExtension } from '@/types/extensionTypes'\n\nconst props = defineProps<{\n  extension: VueExtension | CustomExtension\n}>()\n\nconst mountCustomExtension = (extension: CustomExtension, el: HTMLElement) => {\n  extension.render(el)\n}\n\nonBeforeUnmount(() => {\n  if (props.extension.type === 'custom' && props.extension.destroy) {\n    props.extension.destroy()\n  }\n})\n</script>\n","<template>\n  <div class=\"flex flex-col h-full\">\n    <Tabs v-model:value=\"bottomPanelStore.activeBottomPanelTabId\">\n      <TabList pt:tab-list=\"border-none\">\n        <div class=\"w-full flex justify-between\">\n          <div class=\"tabs-container\">\n            <Tab\n              v-for=\"tab in bottomPanelStore.bottomPanelTabs\"\n              :key=\"tab.id\"\n              :value=\"tab.id\"\n              class=\"p-3 border-none\"\n            >\n              <span class=\"font-bold\">\n                {{\n                  shouldCapitalizeTab(tab.id)\n                    ? tab.title.toUpperCase()\n                    : tab.title\n                }}\n              </span>\n            </Tab>\n          </div>\n          <div class=\"flex items-center gap-2\">\n            <Button\n              v-if=\"isShortcutsTabActive\"\n              :label=\"$t('shortcuts.manageShortcuts')\"\n              icon=\"pi pi-cog\"\n              severity=\"secondary\"\n              size=\"small\"\n              text\n              @click=\"openKeybindingSettings\"\n            />\n            <Button\n              class=\"justify-self-end\"\n              icon=\"pi pi-times\"\n              severity=\"secondary\"\n              size=\"small\"\n              text\n              @click=\"closeBottomPanel\"\n            />\n          </div>\n        </div>\n      </TabList>\n    </Tabs>\n    <!-- h-0 to force the div to flex-grow -->\n    <div class=\"flex-grow h-0\">\n      <ExtensionSlot\n        v-if=\"\n          bottomPanelStore.bottomPanelVisible &&\n          bottomPanelStore.activeBottomPanelTab\n        \"\n        :extension=\"bottomPanelStore.activeBottomPanelTab\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Tab from 'primevue/tab'\nimport TabList from 'primevue/tablist'\nimport Tabs from 'primevue/tabs'\nimport { computed } from 'vue'\n\nimport ExtensionSlot from '@/components/common/ExtensionSlot.vue'\nimport { useDialogService } from '@/services/dialogService'\nimport { useBottomPanelStore } from '@/stores/workspace/bottomPanelStore'\n\nconst bottomPanelStore = useBottomPanelStore()\nconst dialogService = useDialogService()\n\nconst isShortcutsTabActive = computed(() => {\n  const activeTabId = bottomPanelStore.activeBottomPanelTabId\n  return (\n    activeTabId === 'shortcuts-essentials' ||\n    activeTabId === 'shortcuts-view-controls'\n  )\n})\n\nconst shouldCapitalizeTab = (tabId: string): boolean => {\n  return tabId !== 'shortcuts-essentials' && tabId !== 'shortcuts-view-controls'\n}\n\nconst openKeybindingSettings = async () => {\n  dialogService.showSettingsDialog('keybinding')\n}\n\nconst closeBottomPanel = () => {\n  bottomPanelStore.activePanel = null\n}\n</script>\n","import { CSSProperties, ref, watch } from 'vue'\n\nimport { useCanvasPositionConversion } from '@/composables/element/useCanvasPositionConversion'\nimport type { Size, Vector2 } from '@/lib/litegraph/src/litegraph'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\nexport interface PositionConfig {\n  /* The position of the element on litegraph canvas */\n  pos: Vector2\n  /* The size of the element on litegraph canvas */\n  size: Size\n  /* The scale factor of the canvas */\n  scale?: number\n}\n\nexport function useAbsolutePosition(options: { useTransform?: boolean } = {}) {\n  const { useTransform = false } = options\n\n  const canvasStore = useCanvasStore()\n  const lgCanvas = canvasStore.getCanvas()\n  const { canvasPosToClientPos, update: updateCanvasPosition } =\n    useCanvasPositionConversion(lgCanvas.canvas, lgCanvas)\n\n  const settingStore = useSettingStore()\n  watch(\n    [\n      () => settingStore.get('Comfy.Sidebar.Location'),\n      () => settingStore.get('Comfy.Sidebar.Size'),\n      () => settingStore.get('Comfy.UseNewMenu')\n    ],\n    () => updateCanvasPosition(),\n    { flush: 'post' }\n  )\n\n  /**\n   * @note Do NOT convert style to a computed value, as it will cause lag when\n   * updating the style on different animation frames. Vue's computed value is\n   * evaluated asynchronously.\n   */\n  const style = ref<CSSProperties>({})\n\n  /**\n   * Compute the style of the element based on the position and size.\n   *\n   * @param position\n   */\n  const computeStyle = (position: PositionConfig): CSSProperties => {\n    const { pos, size, scale = lgCanvas.ds.scale } = position\n    const [left, top] = canvasPosToClientPos(pos)\n    const [width, height] = size\n\n    return useTransform\n      ? {\n          position: 'fixed',\n          transformOrigin: '0 0',\n          transform: `scale(${scale})`,\n          left: `${left}px`,\n          top: `${top}px`,\n          width: `${width}px`,\n          height: `${height}px`\n        }\n      : {\n          position: 'fixed',\n          left: `${left}px`,\n          top: `${top}px`,\n          width: `${width * scale}px`,\n          height: `${height * scale}px`\n        }\n  }\n\n  /**\n   * Update the position of the element on the litegraph canvas.\n   *\n   * @param config\n   */\n  const updatePosition = (config: PositionConfig) => {\n    style.value = computeStyle(config)\n  }\n\n  return {\n    style,\n    updatePosition\n  }\n}\n","import { CSSProperties, ref } from 'vue'\n\ninterface Rect {\n  x: number\n  y: number\n  width: number\n  height: number\n}\n\n/**\n * Finds the intersection between two rectangles\n */\nfunction intersect(a: Rect, b: Rect): [number, number, number, number] | null {\n  const x1 = Math.max(a.x, b.x)\n  const y1 = Math.max(a.y, b.y)\n  const x2 = Math.min(a.x + a.width, b.x + b.width)\n  const y2 = Math.min(a.y + a.height, b.y + b.height)\n\n  if (x1 >= x2 || y1 >= y2) {\n    return null\n  }\n\n  return [x1, y1, x2 - x1, y2 - y1]\n}\n\nexport interface ClippingOptions {\n  margin?: number\n}\n\nexport const useDomClipping = (options: ClippingOptions = {}) => {\n  const style = ref<CSSProperties>({})\n  const { margin = 4 } = options\n\n  /**\n   * Calculates a clip path for an element based on its intersection with a selected area\n   */\n  const calculateClipPath = (\n    elementRect: DOMRect,\n    canvasRect: DOMRect,\n    isSelected: boolean,\n    selectedArea?: {\n      x: number\n      y: number\n      width: number\n      height: number\n      scale: number\n      offset: [number, number]\n    }\n  ): string => {\n    if (!isSelected && selectedArea) {\n      const { scale, offset } = selectedArea\n\n      // Get intersection in browser space\n      const intersection = intersect(\n        {\n          x: elementRect.left - canvasRect.left,\n          y: elementRect.top - canvasRect.top,\n          width: elementRect.width,\n          height: elementRect.height\n        },\n        {\n          x: (selectedArea.x + offset[0] - margin) * scale,\n          y: (selectedArea.y + offset[1] - margin) * scale,\n          width: (selectedArea.width + 2 * margin) * scale,\n          height: (selectedArea.height + 2 * margin) * scale\n        }\n      )\n\n      if (!intersection) {\n        return ''\n      }\n\n      // Convert intersection to canvas scale (element has scale transform)\n      const clipX =\n        (intersection[0] - elementRect.left + canvasRect.left) / scale + 'px'\n      const clipY =\n        (intersection[1] - elementRect.top + canvasRect.top) / scale + 'px'\n      const clipWidth = intersection[2] / scale + 'px'\n      const clipHeight = intersection[3] / scale + 'px'\n\n      return `polygon(0% 0%, 0% 100%, ${clipX} 100%, ${clipX} ${clipY}, calc(${clipX} + ${clipWidth}) ${clipY}, calc(${clipX} + ${clipWidth}) calc(${clipY} + ${clipHeight}), ${clipX} calc(${clipY} + ${clipHeight}), ${clipX} 100%, 100% 100%, 100% 0%)`\n    }\n\n    return ''\n  }\n\n  /**\n   * Updates the clip-path style based on element and selection information\n   */\n  const updateClipPath = (\n    element: HTMLElement,\n    canvasElement: HTMLCanvasElement,\n    isSelected: boolean,\n    selectedArea?: {\n      x: number\n      y: number\n      width: number\n      height: number\n      scale: number\n      offset: [number, number]\n    }\n  ) => {\n    const elementRect = element.getBoundingClientRect()\n    const canvasRect = canvasElement.getBoundingClientRect()\n\n    const clipPath = calculateClipPath(\n      elementRect,\n      canvasRect,\n      isSelected,\n      selectedArea\n    )\n\n    style.value = {\n      clipPath: clipPath || 'none',\n      willChange: 'clip-path'\n    }\n  }\n\n  return {\n    style,\n    updateClipPath\n  }\n}\n","<template>\n  <div\n    v-show=\"widgetState.visible\"\n    ref=\"widgetElement\"\n    class=\"dom-widget\"\n    :title=\"tooltip\"\n    :style=\"style\"\n  >\n    <component\n      :is=\"widget.component\"\n      v-if=\"isComponentWidget(widget)\"\n      :model-value=\"widget.value\"\n      :widget=\"widget\"\n      v-bind=\"widget.props\"\n      @update:model-value=\"emit('update:widgetValue', $event)\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useElementBounding, useEventListener } from '@vueuse/core'\nimport { CSSProperties, computed, nextTick, onMounted, ref, watch } from 'vue'\n\nimport { useAbsolutePosition } from '@/composables/element/useAbsolutePosition'\nimport { useDomClipping } from '@/composables/element/useDomClipping'\nimport { isComponentWidget, isDOMWidget } from '@/scripts/domWidget'\nimport { DomWidgetState } from '@/stores/domWidgetStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\nconst { widgetState } = defineProps<{\n  widgetState: DomWidgetState\n}>()\nconst widget = widgetState.widget\n\nconst emit = defineEmits<{\n  'update:widgetValue': [value: string | object]\n}>()\n\nconst widgetElement = ref<HTMLElement | undefined>()\n\n/**\n * @note Do NOT convert style to a computed value, as it will cause lag when\n * updating the style on different animation frames. Vue's computed value is\n * evaluated asynchronously.\n */\nconst style = ref<CSSProperties>({})\nconst { style: positionStyle, updatePosition } = useAbsolutePosition({\n  useTransform: true\n})\nconst { style: clippingStyle, updateClipPath } = useDomClipping()\n\nconst canvasStore = useCanvasStore()\nconst settingStore = useSettingStore()\nconst enableDomClipping = computed(() =>\n  settingStore.get('Comfy.DOMClippingEnabled')\n)\n\nconst updateDomClipping = () => {\n  const lgCanvas = canvasStore.canvas\n  if (!lgCanvas || !widgetElement.value) return\n\n  const selectedNode = Object.values(lgCanvas.selected_nodes ?? {})[0]\n  if (!selectedNode) {\n    // Clear clipping when no node is selected\n    updateClipPath(widgetElement.value, lgCanvas.canvas, false, undefined)\n    return\n  }\n\n  const isSelected = selectedNode === widget.node\n  const renderArea = selectedNode?.renderArea\n  const offset = lgCanvas.ds.offset\n  const scale = lgCanvas.ds.scale\n  const selectedAreaConfig = renderArea\n    ? {\n        x: renderArea[0],\n        y: renderArea[1],\n        width: renderArea[2],\n        height: renderArea[3],\n        scale,\n        offset: [offset[0], offset[1]] as [number, number]\n      }\n    : undefined\n\n  updateClipPath(\n    widgetElement.value,\n    lgCanvas.canvas,\n    isSelected,\n    selectedAreaConfig\n  )\n}\n\n/**\n * @note mapping between canvas position and client position depends on the\n * canvas element's position, so we need to watch the canvas element's position\n * and update the position of the widget accordingly.\n */\nconst { left, top } = useElementBounding(canvasStore.getCanvas().canvas)\nwatch(\n  [() => widgetState, left, top],\n  ([widgetState, _, __]) => {\n    updatePosition(widgetState)\n    if (enableDomClipping.value) {\n      updateDomClipping()\n    }\n\n    style.value = {\n      ...positionStyle.value,\n      ...(enableDomClipping.value ? clippingStyle.value : {}),\n      zIndex: widgetState.zIndex,\n      pointerEvents:\n        widgetState.readonly || widget.computedDisabled ? 'none' : 'auto',\n      opacity: widget.computedDisabled ? 0.5 : 1\n    }\n  },\n  { deep: true }\n)\n\nwatch(\n  () => widgetState.visible,\n  (newVisible, oldVisible) => {\n    if (!newVisible && oldVisible) {\n      widget.options.onHide?.(widget)\n    }\n  }\n)\n\n// Set up event listeners only after the widget is mounted and visible\nconst setupDOMEventListeners = () => {\n  if (!isDOMWidget(widget) || !widgetState.visible) return\n\n  if (widget.element.blur) {\n    useEventListener(document, 'mousedown', (event) => {\n      if (!widget.element.contains(event.target as HTMLElement)) {\n        widget.element.blur()\n      }\n    })\n  }\n\n  for (const evt of widget.options.selectOn ?? ['focus', 'click']) {\n    useEventListener(widget.element, evt, () => {\n      const lgCanvas = canvasStore.canvas\n      lgCanvas?.selectNode(widget.node)\n      lgCanvas?.bringToFront(widget.node)\n    })\n  }\n}\n\n// Set up event listeners when widget becomes visible\nwatch(\n  () => widgetState.visible,\n  (visible) => {\n    if (visible) {\n      setupDOMEventListeners()\n    }\n  },\n  { immediate: true }\n)\n\nconst inputSpec = widget.node.constructor.nodeData\nconst tooltip = inputSpec?.inputs?.[widget.name]?.tooltip\n\n// Mount DOM element when widget is or becomes visible\nconst mountElementIfVisible = () => {\n  if (widgetState.visible && isDOMWidget(widget) && widgetElement.value) {\n    // Only append if not already a child\n    if (!widgetElement.value.contains(widget.element)) {\n      widgetElement.value.appendChild(widget.element)\n    }\n  }\n}\n\n// Check on mount - but only after next tick to ensure visibility is calculated\nonMounted(() => {\n  nextTick(() => {\n    mountElementIfVisible()\n  }).catch((error) => {\n    console.error('Error mounting DOM widget element:', error)\n  })\n})\n\n// And watch for visibility changes\nwatch(\n  () => widgetState.visible,\n  () => {\n    mountElementIfVisible()\n  }\n)\n</script>\n\n<style scoped>\n.dom-widget > * {\n  @apply h-full w-full;\n}\n</style>\n","<template>\n  <!-- Create a new stacking context for widgets to avoid z-index issues -->\n  <div class=\"isolate\">\n    <DomWidget\n      v-for=\"widgetState in widgetStates\"\n      :key=\"widgetState.widget.id\"\n      :widget-state=\"widgetState\"\n      @update:widget-value=\"widgetState.widget.value = $event\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { whenever } from '@vueuse/core'\nimport { computed } from 'vue'\n\nimport DomWidget from '@/components/graph/widgets/DomWidget.vue'\nimport { useChainCallback } from '@/composables/functional/useChainCallback'\nimport { useDomWidgetStore } from '@/stores/domWidgetStore'\nimport { useCanvasStore } from '@/stores/graphStore'\n\nconst domWidgetStore = useDomWidgetStore()\n\nconst widgetStates = computed(() => [...domWidgetStore.widgetStates.values()])\n\nconst updateWidgets = () => {\n  const lgCanvas = canvasStore.canvas\n  if (!lgCanvas) return\n\n  const lowQuality = lgCanvas.low_quality\n  const currentGraph = lgCanvas.graph\n\n  for (const widgetState of widgetStates.value) {\n    const widget = widgetState.widget\n\n    // Early exit for non-visible widgets\n    if (!widget.isVisible()) {\n      widgetState.visible = false\n      continue\n    }\n\n    // Check if the widget's node is in the current graph\n    const node = widget.node\n    const isInCorrectGraph = currentGraph?.nodes.includes(node)\n\n    widgetState.visible =\n      !!isInCorrectGraph &&\n      lgCanvas.isNodeVisible(node) &&\n      !(widget.options.hideOnZoom && lowQuality)\n\n    if (widgetState.visible && node) {\n      const margin = widget.margin\n      widgetState.pos = [node.pos[0] + margin, node.pos[1] + margin + widget.y]\n      widgetState.size = [\n        (widget.width ?? node.width) - margin * 2,\n        (widget.computedHeight ?? 50) - margin * 2\n      ]\n      // TODO: optimize this logic as it's O(n), where n is the number of nodes\n      widgetState.zIndex = lgCanvas.graph?.nodes.indexOf(node) ?? -1\n      widgetState.readonly = lgCanvas.read_only\n    }\n  }\n}\n\nconst canvasStore = useCanvasStore()\nwhenever(\n  () => canvasStore.canvas,\n  (canvas) =>\n    (canvas.onDrawForeground = useChainCallback(\n      canvas.onDrawForeground,\n      updateWidgets\n    )),\n  { immediate: true }\n)\n</script>\n","import { computed } from 'vue'\n\nimport { app } from '@/scripts/app'\nimport { useSettingStore } from '@/stores/settingStore'\n\n/**\n * Composable for handling canvas interactions from Vue components.\n * This provides a unified way to forward events to the LiteGraph canvas\n * and will be the foundation for migrating canvas interactions to Vue.\n */\nexport function useCanvasInteractions() {\n  const settingStore = useSettingStore()\n\n  const isStandardNavMode = computed(\n    () => settingStore.get('Comfy.Canvas.NavigationMode') === 'standard'\n  )\n\n  /**\n   * Handles wheel events from UI components that should be forwarded to canvas\n   * when appropriate (e.g., Ctrl+wheel for zoom in standard mode)\n   */\n  const handleWheel = (event: WheelEvent) => {\n    // In standard mode, Ctrl+wheel should go to canvas for zoom\n    if (isStandardNavMode.value && (event.ctrlKey || event.metaKey)) {\n      event.preventDefault() // Prevent browser zoom\n      forwardEventToCanvas(event)\n      return\n    }\n\n    // In legacy mode, all wheel events go to canvas for zoom\n    if (!isStandardNavMode.value) {\n      event.preventDefault()\n      forwardEventToCanvas(event)\n      return\n    }\n\n    // Otherwise, let the component handle it normally\n  }\n\n  /**\n   * Forwards an event to the LiteGraph canvas\n   */\n  const forwardEventToCanvas = (\n    event: WheelEvent | PointerEvent | MouseEvent\n  ) => {\n    const canvasEl = app.canvas?.canvas\n    if (!canvasEl) return\n\n    // Create new event with same properties\n    const EventConstructor = event.constructor as typeof WheelEvent\n    const newEvent = new EventConstructor(event.type, event)\n    canvasEl.dispatchEvent(newEvent)\n  }\n\n  return {\n    handleWheel,\n    forwardEventToCanvas\n  }\n}\n","<template>\n  <ButtonGroup\n    class=\"p-buttongroup-vertical absolute bottom-[10px] right-[10px] z-[1000]\"\n    @wheel=\"canvasInteractions.handleWheel\"\n  >\n    <Button\n      v-tooltip.left=\"t('graphCanvasMenu.zoomIn')\"\n      severity=\"secondary\"\n      icon=\"pi pi-plus\"\n      :aria-label=\"$t('graphCanvasMenu.zoomIn')\"\n      @mousedown=\"repeat('Comfy.Canvas.ZoomIn')\"\n      @mouseup=\"stopRepeat\"\n    />\n    <Button\n      v-tooltip.left=\"t('graphCanvasMenu.zoomOut')\"\n      severity=\"secondary\"\n      icon=\"pi pi-minus\"\n      :aria-label=\"$t('graphCanvasMenu.zoomOut')\"\n      @mousedown=\"repeat('Comfy.Canvas.ZoomOut')\"\n      @mouseup=\"stopRepeat\"\n    />\n    <Button\n      v-tooltip.left=\"t('graphCanvasMenu.fitView')\"\n      severity=\"secondary\"\n      icon=\"pi pi-expand\"\n      :aria-label=\"$t('graphCanvasMenu.fitView')\"\n      @click=\"() => commandStore.execute('Comfy.Canvas.FitView')\"\n    />\n    <Button\n      v-tooltip.left=\"\n        t(\n          'graphCanvasMenu.' +\n            (canvasStore.canvas?.read_only ? 'panMode' : 'selectMode')\n        ) + ' (Space)'\n      \"\n      severity=\"secondary\"\n      :aria-label=\"\n        t(\n          'graphCanvasMenu.' +\n            (canvasStore.canvas?.read_only ? 'panMode' : 'selectMode')\n        )\n      \"\n      @click=\"() => commandStore.execute('Comfy.Canvas.ToggleLock')\"\n    >\n      <template #icon>\n        <i-material-symbols:pan-tool-outline\n          v-if=\"canvasStore.canvas?.read_only\"\n        />\n        <i-simple-line-icons:cursor v-else />\n      </template>\n    </Button>\n    <Button\n      v-tooltip.left=\"t('graphCanvasMenu.toggleLinkVisibility')\"\n      severity=\"secondary\"\n      :icon=\"linkHidden ? 'pi pi-eye-slash' : 'pi pi-eye'\"\n      :aria-label=\"$t('graphCanvasMenu.toggleLinkVisibility')\"\n      data-testid=\"toggle-link-visibility-button\"\n      @click=\"() => commandStore.execute('Comfy.Canvas.ToggleLinkVisibility')\"\n    />\n    <Button\n      v-tooltip.left=\"minimapTooltip\"\n      severity=\"secondary\"\n      :icon=\"'pi pi-map'\"\n      :aria-label=\"$t('graphCanvasMenu.toggleMinimap')\"\n      :class=\"{ 'minimap-active': minimapVisible }\"\n      data-testid=\"toggle-minimap-button\"\n      @click=\"() => commandStore.execute('Comfy.Canvas.ToggleMinimap')\"\n    />\n  </ButtonGroup>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport ButtonGroup from 'primevue/buttongroup'\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCanvasInteractions } from '@/composables/graph/useCanvasInteractions'\nimport { LiteGraph } from '@/lib/litegraph/src/litegraph'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useKeybindingStore } from '@/stores/keybindingStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\nconst { t } = useI18n()\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\nconst keybindingStore = useKeybindingStore()\nconst settingStore = useSettingStore()\nconst canvasInteractions = useCanvasInteractions()\n\nconst minimapVisible = computed(() => settingStore.get('Comfy.Minimap.Visible'))\nconst minimapTooltip = computed(() => {\n  const baseText = t('graphCanvasMenu.toggleMinimap')\n  const keybinding = keybindingStore.getKeybindingByCommandId(\n    'Comfy.Canvas.ToggleMinimap'\n  )\n  return keybinding ? `${baseText} (${keybinding.combo.toString()})` : baseText\n})\nconst linkHidden = computed(\n  () => settingStore.get('Comfy.LinkRenderMode') === LiteGraph.HIDDEN_LINK\n)\n\nlet interval: number | null = null\nconst repeat = async (command: string) => {\n  if (interval) return\n  const cmd = () => commandStore.execute(command)\n  await cmd()\n  interval = window.setInterval(cmd, 100)\n}\nconst stopRepeat = () => {\n  if (interval) {\n    clearInterval(interval)\n    interval = null\n  }\n}\n</script>\n\n<style scoped>\n.p-buttongroup-vertical {\n  display: flex;\n  flex-direction: column;\n  border-radius: var(--p-button-border-radius);\n  overflow: hidden;\n  border: 1px solid var(--p-panel-border-color);\n}\n\n.p-buttongroup-vertical .p-button {\n  margin: 0;\n  border-radius: 0;\n}\n\n.p-button.minimap-active {\n  background-color: var(--p-button-primary-background);\n  border-color: var(--p-button-primary-border-color);\n  color: var(--p-button-primary-color);\n}\n\n.p-button.minimap-active:hover {\n  background-color: var(--p-button-primary-hover-background);\n  border-color: var(--p-button-primary-hover-border-color);\n}\n</style>\n","<template>\n  <div\n    v-if=\"visible && initialized\"\n    class=\"minimap-main-container flex absolute bottom-[20px] right-[90px] z-[1000]\"\n  >\n    <MiniMapPanel\n      v-if=\"showOptionsPanel\"\n      :panel-styles=\"panelStyles\"\n      :node-colors=\"nodeColors\"\n      :show-links=\"showLinks\"\n      :show-groups=\"showGroups\"\n      :render-bypass=\"renderBypass\"\n      :render-error=\"renderError\"\n      @update-option=\"updateOption\"\n    />\n\n    <div\n      ref=\"containerRef\"\n      class=\"litegraph-minimap relative\"\n      :style=\"containerStyles\"\n    >\n      <Button\n        class=\"absolute z-10\"\n        size=\"small\"\n        text\n        severity=\"secondary\"\n        @click.stop=\"toggleOptionsPanel\"\n      >\n        <template #icon>\n          <i-lucide:settings-2 />\n        </template>\n      </Button>\n\n      <canvas\n        ref=\"canvasRef\"\n        :width=\"width\"\n        :height=\"height\"\n        class=\"minimap-canvas\"\n      />\n\n      <div class=\"minimap-viewport\" :style=\"viewportStyles\" />\n\n      <div\n        class=\"absolute inset-0\"\n        @pointerdown=\"handlePointerDown\"\n        @pointermove=\"handlePointerMove\"\n        @pointerup=\"handlePointerUp\"\n        @pointerleave=\"handlePointerUp\"\n        @wheel=\"handleWheel\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { onMounted, onUnmounted, ref, watch } from 'vue'\n\nimport { useMinimap } from '@/composables/useMinimap'\nimport { useCanvasStore } from '@/stores/graphStore'\n\nimport MiniMapPanel from './MiniMapPanel.vue'\n\nconst minimap = useMinimap()\nconst canvasStore = useCanvasStore()\n\nconst {\n  initialized,\n  visible,\n  containerRef,\n  canvasRef,\n  containerStyles,\n  viewportStyles,\n  width,\n  height,\n  panelStyles,\n  nodeColors,\n  showLinks,\n  showGroups,\n  renderBypass,\n  renderError,\n  updateOption,\n  init,\n  destroy,\n  handlePointerDown,\n  handlePointerMove,\n  handlePointerUp,\n  handleWheel\n} = minimap\n\nconst showOptionsPanel = ref(false)\n\nconst toggleOptionsPanel = () => {\n  showOptionsPanel.value = !showOptionsPanel.value\n}\n\nwatch(\n  () => canvasStore.canvas,\n  async (canvas) => {\n    if (canvas && !initialized.value) {\n      await init()\n    }\n  },\n  { immediate: true }\n)\n\nonMounted(async () => {\n  if (canvasStore.canvas) {\n    await init()\n  }\n})\n\nonUnmounted(() => {\n  destroy()\n})\n</script>\n\n<style scoped>\n.litegraph-minimap {\n  overflow: hidden;\n}\n\n.minimap-canvas {\n  display: block;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n\n.minimap-viewport {\n  position: absolute;\n  top: 0;\n  left: 0;\n  pointer-events: none;\n}\n</style>\n","<template>\n  <div\n    v-if=\"tooltipText\"\n    ref=\"tooltipRef\"\n    class=\"node-tooltip\"\n    :style=\"{ left, top }\"\n  >\n    {{ tooltipText }}\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useEventListener } from '@vueuse/core'\nimport { nextTick, ref } from 'vue'\n\nimport { st } from '@/i18n'\nimport {\n  LiteGraph,\n  isOverNodeInput,\n  isOverNodeOutput\n} from '@/lib/litegraph/src/litegraph'\nimport { app as comfyApp } from '@/scripts/app'\nimport { isDOMWidget } from '@/scripts/domWidget'\nimport { useNodeDefStore } from '@/stores/nodeDefStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { normalizeI18nKey } from '@/utils/formatUtil'\n\nlet idleTimeout: number\nconst nodeDefStore = useNodeDefStore()\nconst settingStore = useSettingStore()\nconst tooltipRef = ref<HTMLDivElement | undefined>()\nconst tooltipText = ref('')\nconst left = ref<string>()\nconst top = ref<string>()\n\nconst hideTooltip = () => (tooltipText.value = '')\n\nconst showTooltip = async (tooltip: string | null | undefined) => {\n  if (!tooltip) return\n\n  left.value = comfyApp.canvas.mouse[0] + 'px'\n  top.value = comfyApp.canvas.mouse[1] + 'px'\n  tooltipText.value = tooltip\n\n  await nextTick()\n\n  const rect = tooltipRef.value?.getBoundingClientRect()\n  if (!rect) return\n\n  if (rect.right > window.innerWidth) {\n    left.value = comfyApp.canvas.mouse[0] - rect.width + 'px'\n  }\n\n  if (rect.top < 0) {\n    top.value = comfyApp.canvas.mouse[1] + rect.height + 'px'\n  }\n}\n\nconst onIdle = () => {\n  const { canvas } = comfyApp\n  const node = canvas.node_over\n  if (!node) return\n\n  const ctor = node.constructor as { title_mode?: 0 | 1 | 2 | 3 }\n  const nodeDef = nodeDefStore.nodeDefsByName[node.type ?? '']\n\n  if (\n    ctor.title_mode !== LiteGraph.NO_TITLE &&\n    canvas.graph_mouse[1] < node.pos[1] // If we are over a node, but not within the node then we are on its title\n  ) {\n    return showTooltip(nodeDef.description)\n  }\n\n  if (node.flags?.collapsed) return\n\n  const inputSlot = isOverNodeInput(\n    node,\n    canvas.graph_mouse[0],\n    canvas.graph_mouse[1],\n    [0, 0]\n  )\n  if (inputSlot !== -1) {\n    const inputName = node.inputs[inputSlot].name\n    const translatedTooltip = st(\n      `nodeDefs.${normalizeI18nKey(node.type ?? '')}.inputs.${normalizeI18nKey(inputName)}.tooltip`,\n      nodeDef.inputs[inputName]?.tooltip ?? ''\n    )\n    return showTooltip(translatedTooltip)\n  }\n\n  const outputSlot = isOverNodeOutput(\n    node,\n    canvas.graph_mouse[0],\n    canvas.graph_mouse[1],\n    [0, 0]\n  )\n  if (outputSlot !== -1) {\n    const translatedTooltip = st(\n      `nodeDefs.${normalizeI18nKey(node.type ?? '')}.outputs.${outputSlot}.tooltip`,\n      nodeDef.outputs[outputSlot]?.tooltip ?? ''\n    )\n    return showTooltip(translatedTooltip)\n  }\n\n  const widget = comfyApp.canvas.getWidgetAtCursor()\n  // Dont show for DOM widgets, these use native browser tooltips as we dont get proper mouse events on these\n  if (widget && !isDOMWidget(widget)) {\n    const translatedTooltip = st(\n      `nodeDefs.${normalizeI18nKey(node.type ?? '')}.inputs.${normalizeI18nKey(widget.name)}.tooltip`,\n      nodeDef.inputs[widget.name]?.tooltip ?? ''\n    )\n    // Widget tooltip can be set dynamically, current translation collection does not support this.\n    return showTooltip(widget.tooltip ?? translatedTooltip)\n  }\n}\n\nconst onMouseMove = (e: MouseEvent) => {\n  hideTooltip()\n  clearTimeout(idleTimeout)\n\n  if ((e.target as Node).nodeName !== 'CANVAS') return\n  idleTimeout = window.setTimeout(\n    onIdle,\n    settingStore.get('LiteGraph.Node.TooltipDelay')\n  )\n}\n\nuseEventListener(window, 'mousemove', onMouseMove)\nuseEventListener(window, 'click', hideTooltip)\n</script>\n\n<style lang=\"css\" scoped>\n.node-tooltip {\n  pointer-events: none;\n  background: var(--comfy-input-bg);\n  border-radius: 5px;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);\n  color: var(--input-text);\n  font-family: sans-serif;\n  left: 0;\n  max-width: 30vw;\n  padding: 4px 8px;\n  position: absolute;\n  top: 0;\n  transform: translate(5px, calc(-100% - 5px));\n  white-space: pre-wrap;\n  z-index: 99999;\n}\n</style>\n","import {\n  LGraphEventMode,\n  LGraphNode,\n  Positionable,\n  Reroute\n} from '@/lib/litegraph/src/litegraph'\nimport { app } from '@/scripts/app'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport {\n  collectFromNodes,\n  traverseNodesDepthFirst\n} from '@/utils/graphTraversalUtil'\n\n/**\n * Composable for handling selected LiteGraph items filtering and operations.\n * This provides utilities for working with selected items on the canvas,\n * including filtering out items that should not be included in selection operations.\n */\nexport function useSelectedLiteGraphItems() {\n  const canvasStore = useCanvasStore()\n\n  /**\n   * Items that should not show in the selection overlay are ignored.\n   * @param item - The item to check.\n   * @returns True if the item should be ignored, false otherwise.\n   */\n  const isIgnoredItem = (item: Positionable): boolean => {\n    return item instanceof Reroute\n  }\n\n  /**\n   * Filter out items that should not show in the selection overlay.\n   * @param items - The Set of items to filter.\n   * @returns The filtered Set of items.\n   */\n  const filterSelectableItems = (\n    items: Set<Positionable>\n  ): Set<Positionable> => {\n    const result = new Set<Positionable>()\n    for (const item of items) {\n      if (!isIgnoredItem(item)) {\n        result.add(item)\n      }\n    }\n    return result\n  }\n\n  /**\n   * Get the filtered selected items from the canvas.\n   * @returns The filtered Set of selected items.\n   */\n  const getSelectableItems = (): Set<Positionable> => {\n    const { selectedItems } = canvasStore.getCanvas()\n    return filterSelectableItems(selectedItems)\n  }\n\n  /**\n   * Check if there are any selectable items.\n   * @returns True if there are selectable items, false otherwise.\n   */\n  const hasSelectableItems = (): boolean => {\n    return getSelectableItems().size > 0\n  }\n\n  /**\n   * Check if there are multiple selectable items.\n   * @returns True if there are multiple selectable items, false otherwise.\n   */\n  const hasMultipleSelectableItems = (): boolean => {\n    return getSelectableItems().size > 1\n  }\n\n  /**\n   * Get only the selected nodes (LGraphNode instances) from the canvas.\n   * This filters out other types of selected items like groups or reroutes.\n   * If a selected node is a subgraph, this also includes all nodes within it.\n   * @returns Array of selected LGraphNode instances and their descendants.\n   */\n  const getSelectedNodes = (): LGraphNode[] => {\n    const selectedNodes = app.canvas.selected_nodes\n    if (!selectedNodes) return []\n\n    // Convert selected_nodes object to array, preserving order\n    const nodeArray: LGraphNode[] = []\n    for (const i in selectedNodes) {\n      nodeArray.push(selectedNodes[i])\n    }\n\n    // Check if any selected nodes are subgraphs\n    const hasSubgraphs = nodeArray.some(\n      (node) => node.isSubgraphNode?.() && node.subgraph\n    )\n\n    // If no subgraphs, just return the array directly to preserve order\n    if (!hasSubgraphs) {\n      return nodeArray\n    }\n\n    // Use collectFromNodes to get all nodes including those in subgraphs\n    return collectFromNodes(nodeArray)\n  }\n\n  /**\n   * Toggle the execution mode of all selected nodes with unified subgraph behavior.\n   *\n   * Top-level behavior (selected nodes): Standard toggle logic\n   * - If the selected node is already in the specified mode  set to ALWAYS\n   * - Otherwise  set to the specified mode\n   *\n   * Subgraph behavior (children of selected subgraph nodes): Unified state application\n   * - All children inherit the same mode that their parent subgraph node was set to\n   * - This creates predictable behavior: if you toggle a subgraph to \"mute\",\n   *   ALL nodes inside become muted, regardless of their previous individual states\n   *\n   * @param mode - The LGraphEventMode to toggle to (e.g., NEVER for mute, BYPASS for bypass)\n   */\n  const toggleSelectedNodesMode = (mode: LGraphEventMode): void => {\n    const selectedNodes = app.canvas.selected_nodes\n    if (!selectedNodes) return\n\n    // Convert selected_nodes object to array\n    const selectedNodeArray: LGraphNode[] = []\n    for (const i in selectedNodes) {\n      selectedNodeArray.push(selectedNodes[i])\n    }\n\n    // Process each selected node independently to determine its target state and apply to children\n    selectedNodeArray.forEach((selectedNode) => {\n      // Apply standard toggle logic to the selected node itself\n      const newModeForSelectedNode =\n        selectedNode.mode === mode ? LGraphEventMode.ALWAYS : mode\n\n      selectedNode.mode = newModeForSelectedNode\n\n      // If this selected node is a subgraph, apply the same mode uniformly to all its children\n      // This ensures predictable behavior: all children get the same state as their parent\n      if (selectedNode.isSubgraphNode?.() && selectedNode.subgraph) {\n        traverseNodesDepthFirst([selectedNode], {\n          visitor: (node) => {\n            // Skip the parent node since we already handled it above\n            if (node === selectedNode) return undefined\n\n            // Apply the parent's new mode to all children uniformly\n            node.mode = newModeForSelectedNode\n            return undefined\n          }\n        })\n      }\n    })\n  }\n\n  return {\n    isIgnoredItem,\n    filterSelectableItems,\n    getSelectableItems,\n    hasSelectableItems,\n    hasMultipleSelectableItems,\n    getSelectedNodes,\n    toggleSelectedNodesMode\n  }\n}\n","import type { InjectionKey, Ref } from 'vue'\n\nexport interface SelectionOverlayState {\n  visible: Readonly<Ref<boolean>>\n  updateCount: Readonly<Ref<number>>\n}\n\nexport const SelectionOverlayInjectionKey: InjectionKey<SelectionOverlayState> =\n  Symbol('selectionOverlayState')\n","<!-- This component is used to bound the selected items on the canvas. -->\n<template>\n  <div\n    v-show=\"visible\"\n    class=\"selection-overlay-container pointer-events-none z-40\"\n    :class=\"{\n      'show-border': showBorder\n    }\"\n    :style=\"style\"\n  >\n    <slot />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { whenever } from '@vueuse/core'\nimport { provide, readonly, ref, watch } from 'vue'\n\nimport { useSelectedLiteGraphItems } from '@/composables/canvas/useSelectedLiteGraphItems'\nimport { useAbsolutePosition } from '@/composables/element/useAbsolutePosition'\nimport { createBounds } from '@/lib/litegraph/src/litegraph'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { SelectionOverlayInjectionKey } from '@/types/selectionOverlayTypes'\n\nconst canvasStore = useCanvasStore()\nconst { style, updatePosition } = useAbsolutePosition()\nconst { getSelectableItems } = useSelectedLiteGraphItems()\n\nconst visible = ref(false)\nconst showBorder = ref(false)\n// Increment counter to notify child components of position/visibility change\n// This does not include viewport changes.\nconst overlayUpdateCount = ref(0)\nprovide(SelectionOverlayInjectionKey, {\n  visible: readonly(visible),\n  updateCount: readonly(overlayUpdateCount)\n})\n\nconst positionSelectionOverlay = () => {\n  const selectableItems = getSelectableItems()\n  showBorder.value = selectableItems.size > 1\n\n  if (!selectableItems.size) {\n    visible.value = false\n    return\n  }\n\n  visible.value = true\n  const bounds = createBounds(selectableItems)\n  if (bounds) {\n    updatePosition({\n      pos: [bounds[0], bounds[1]],\n      size: [bounds[2], bounds[3]]\n    })\n  }\n}\n\nwhenever(\n  () => canvasStore.getCanvas().state.selectionChanged,\n  () => {\n    requestAnimationFrame(() => {\n      positionSelectionOverlay()\n      overlayUpdateCount.value++\n      canvasStore.getCanvas().state.selectionChanged = false\n    })\n  },\n  { immediate: true }\n)\n\ncanvasStore.getCanvas().ds.onChanged = positionSelectionOverlay\n\nwatch(\n  () => canvasStore.canvas?.state?.draggingItems,\n  (draggingItems) => {\n    // Litegraph draggingItems state can end early before the bounding boxes of\n    // the selected items are updated. Delay to make sure we put the overlay in\n    // the correct position.\n    // https://github.com/Comfy-Org/ComfyUI_frontend/issues/2656\n    if (draggingItems === false) {\n      requestAnimationFrame(() => {\n        visible.value = true\n        positionSelectionOverlay()\n        overlayUpdateCount.value++\n      })\n    } else {\n      // Selection change update to visible state is delayed by a frame. Here\n      // we also delay a frame so that the order of events is correct when\n      // the initial selection and dragging happens at the same time.\n      requestAnimationFrame(() => {\n        visible.value = false\n        overlayUpdateCount.value++\n      })\n    }\n  }\n)\n</script>\n\n<style scoped>\n.selection-overlay-container > * {\n  pointer-events: auto;\n}\n\n.show-border {\n  @apply border-dashed rounded-md border-2 border-[var(--border-color)];\n}\n</style>\n","<template>\n  <Button\n    v-show=\"canvasStore.nodeSelected\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_Canvas_ToggleSelectedNodes_Bypass.label'),\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    data-testid=\"bypass-button\"\n    @click=\"\n      () => commandStore.execute('Comfy.Canvas.ToggleSelectedNodes.Bypass')\n    \"\n  >\n    <template #icon>\n      <i-game-icons:detour />\n    </template>\n  </Button>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\n\nconst { t } = useI18n()\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n</script>\n","<template>\n  <div class=\"relative\">\n    <Button\n      v-show=\"canvasStore.nodeSelected || canvasStore.groupSelected\"\n      v-tooltip.top=\"{\n        value: localizedCurrentColorName ?? t('color.noColor'),\n        showDelay: 512\n      }\"\n      severity=\"secondary\"\n      text\n      @click=\"() => (showColorPicker = !showColorPicker)\"\n    >\n      <template #icon>\n        <div class=\"flex items-center gap-1\">\n          <i class=\"pi pi-circle-fill\" :style=\"{ color: currentColor ?? '' }\" />\n          <i class=\"pi pi-chevron-down\" :style=\"{ fontSize: '0.5rem' }\" />\n        </div>\n      </template>\n    </Button>\n    <div\n      v-if=\"showColorPicker\"\n      class=\"color-picker-container absolute -top-10 left-1/2\"\n    >\n      <SelectButton\n        :model-value=\"selectedColorOption\"\n        :options=\"colorOptions\"\n        option-label=\"name\"\n        data-key=\"value\"\n        @update:model-value=\"applyColor\"\n      >\n        <template #option=\"{ option }\">\n          <i\n            v-tooltip.top=\"option.localizedName\"\n            class=\"pi pi-circle-fill\"\n            :style=\"{\n              color: isLightTheme ? option.value.light : option.value.dark\n            }\"\n            :data-testid=\"option.name\"\n          />\n        </template>\n      </SelectButton>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport SelectButton from 'primevue/selectbutton'\nimport { computed, ref, watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport type { ColorOption as CanvasColorOption } from '@/lib/litegraph/src/litegraph'\nimport {\n  LGraphCanvas,\n  LiteGraph,\n  isColorable\n} from '@/lib/litegraph/src/litegraph'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { useColorPaletteStore } from '@/stores/workspace/colorPaletteStore'\nimport { adjustColor } from '@/utils/colorUtil'\nimport { getItemsColorOption } from '@/utils/litegraphUtil'\n\nconst { t } = useI18n()\nconst canvasStore = useCanvasStore()\nconst colorPaletteStore = useColorPaletteStore()\nconst workflowStore = useWorkflowStore()\nconst isLightTheme = computed(\n  () => colorPaletteStore.completedActivePalette.light_theme\n)\nconst toLightThemeColor = (color: string) =>\n  adjustColor(color, { lightness: 0.5 })\n\nconst showColorPicker = ref(false)\n\ntype ColorOption = {\n  name: string\n  localizedName: string\n  value: {\n    dark: string\n    light: string\n  }\n}\n\nconst NO_COLOR_OPTION: ColorOption = {\n  name: 'noColor',\n  localizedName: t('color.noColor'),\n  value: {\n    dark: LiteGraph.NODE_DEFAULT_BGCOLOR,\n    light: toLightThemeColor(LiteGraph.NODE_DEFAULT_BGCOLOR)\n  }\n}\nconst colorOptions: ColorOption[] = [\n  NO_COLOR_OPTION,\n  ...Object.entries(LGraphCanvas.node_colors).map(([name, color]) => ({\n    name,\n    localizedName: t(`color.${name}`),\n    value: {\n      dark: color.bgcolor,\n      light: toLightThemeColor(color.bgcolor)\n    }\n  }))\n]\n\nconst selectedColorOption = ref<ColorOption | null>(null)\nconst applyColor = (colorOption: ColorOption | null) => {\n  const colorName = colorOption?.name ?? NO_COLOR_OPTION.name\n  const canvasColorOption =\n    colorName === NO_COLOR_OPTION.name\n      ? null\n      : LGraphCanvas.node_colors[colorName]\n\n  for (const item of canvasStore.selectedItems) {\n    if (isColorable(item)) {\n      item.setColorOption(canvasColorOption)\n    }\n  }\n\n  canvasStore.canvas?.setDirty(true, true)\n  currentColorOption.value = canvasColorOption\n  showColorPicker.value = false\n  workflowStore.activeWorkflow?.changeTracker.checkState()\n}\n\nconst currentColorOption = ref<CanvasColorOption | null>(null)\nconst currentColor = computed(() =>\n  currentColorOption.value\n    ? isLightTheme.value\n      ? toLightThemeColor(currentColorOption.value?.bgcolor)\n      : currentColorOption.value?.bgcolor\n    : null\n)\n\nconst localizedCurrentColorName = computed(() => {\n  if (!currentColorOption.value?.bgcolor) return null\n  const colorOption = colorOptions.find(\n    (option) =>\n      option.value.dark === currentColorOption.value?.bgcolor ||\n      option.value.light === currentColorOption.value?.bgcolor\n  )\n  return colorOption?.localizedName ?? NO_COLOR_OPTION.localizedName\n})\n\nwatch(\n  () => canvasStore.selectedItems,\n  (newSelectedItems) => {\n    showColorPicker.value = false\n    selectedColorOption.value = null\n    currentColorOption.value = getItemsColorOption(newSelectedItems)\n  }\n)\n</script>\n\n<style scoped>\n.color-picker-container {\n  transform: translateX(-50%);\n}\n\n:deep(.p-togglebutton) {\n  @apply py-2 px-1;\n}\n</style>\n","<template>\n  <Button\n    v-show=\"isVisible\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_Graph_ConvertToSubgraph.label'),\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    @click=\"() => commandStore.execute('Comfy.Graph.ConvertToSubgraph')\"\n  >\n    <template #icon>\n      <i-lucide:shrink />\n    </template>\n  </Button>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\n\nconst { t } = useI18n()\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n\nconst isVisible = computed(() => {\n  return (\n    canvasStore.groupSelected ||\n    canvasStore.rerouteSelected ||\n    canvasStore.nodeSelected\n  )\n})\n</script>\n","<template>\n  <Button\n    v-show=\"isDeletable\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_Canvas_DeleteSelectedItems.label'),\n      showDelay: 1000\n    }\"\n    severity=\"danger\"\n    text\n    icon=\"pi pi-trash\"\n    @click=\"() => commandStore.execute('Comfy.Canvas.DeleteSelectedItems')\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\n\nconst { t } = useI18n()\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n\nconst isDeletable = computed(() =>\n  canvasStore.selectedItems.some((x) => x.removable !== false)\n)\n</script>\n","<template>\n  <Button\n    v-show=\"isImageOutputSelected\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_Canvas_AddEditModelStep.label'),\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    icon=\"pi pi-pen-to-square\"\n    @click=\"() => commandStore.execute('Comfy.Canvas.AddEditModelStep')\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { isImageNode, isLGraphNode } from '@/utils/litegraphUtil'\n\nconst { t } = useI18n()\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n\nconst isImageOutputOrEditModelNode = (node: unknown) =>\n  isLGraphNode(node) &&\n  (isImageNode(node) || node.type === 'workflow>FLUX.1 Kontext Image Edit')\n\nconst isImageOutputSelected = computed(\n  () =>\n    canvasStore.selectedItems.length === 1 &&\n    isImageOutputOrEditModelNode(canvasStore.selectedItems[0])\n)\n</script>\n","<template>\n  <Button\n    v-show=\"canvasStore.nodeSelected\"\n    v-tooltip.top=\"{\n      value: isDisabled\n        ? t('selectionToolbox.executeButton.disabledTooltip')\n        : t('selectionToolbox.executeButton.tooltip'),\n      showDelay: 1000\n    }\"\n    :severity=\"isDisabled ? 'secondary' : 'success'\"\n    text\n    :disabled=\"isDisabled\"\n    @mouseenter=\"() => handleMouseEnter()\"\n    @mouseleave=\"() => handleMouseLeave()\"\n    @click=\"handleClick\"\n  >\n    <i-lucide:play />\n  </Button>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport type { LGraphNode } from '@/lib/litegraph/src/litegraph'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { isLGraphNode } from '@/utils/litegraphUtil'\n\nconst { t } = useI18n()\nconst canvasStore = useCanvasStore()\nconst commandStore = useCommandStore()\n\nconst canvas = canvasStore.getCanvas()\nconst buttonHovered = ref(false)\nconst selectedOutputNodes = computed(\n  () =>\n    canvasStore.selectedItems.filter(\n      (item) => isLGraphNode(item) && item.constructor.nodeData?.output_node\n    ) as LGraphNode[]\n)\n\nconst isDisabled = computed(() => selectedOutputNodes.value.length === 0)\n\nfunction outputNodeStokeStyle(this: LGraphNode) {\n  if (\n    this.selected &&\n    this.constructor.nodeData?.output_node &&\n    buttonHovered.value\n  ) {\n    return { color: 'orange', lineWidth: 2, padding: 10 }\n  }\n}\n\nconst handleMouseEnter = () => {\n  buttonHovered.value = true\n  for (const node of selectedOutputNodes.value) {\n    node.strokeStyles['outputNode'] = outputNodeStokeStyle\n  }\n  canvas.setDirty(true)\n}\n\nconst handleMouseLeave = () => {\n  buttonHovered.value = false\n  canvas.setDirty(true)\n}\n\nconst handleClick = async () => {\n  await commandStore.execute('Comfy.QueueSelectedOutputNodes')\n}\n</script>\n","<template>\n  <Button\n    v-tooltip.top=\"{\n      value:\n        st(`commands.${normalizeI18nKey(command.id)}.label`, '') || undefined,\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    :icon=\"typeof command.icon === 'function' ? command.icon() : command.icon\"\n    @click=\"() => commandStore.execute(command.id)\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\n\nimport { st } from '@/i18n'\nimport { ComfyCommand, useCommandStore } from '@/stores/commandStore'\nimport { normalizeI18nKey } from '@/utils/formatUtil'\n\ndefineProps<{\n  command: ComfyCommand\n}>()\n\nconst commandStore = useCommandStore()\n</script>\n","<template>\n  <Button\n    v-show=\"nodeDef\"\n    v-tooltip.top=\"{\n      value: $t('g.help'),\n      showDelay: 1000\n    }\"\n    class=\"help-button\"\n    text\n    icon=\"pi pi-question-circle\"\n    severity=\"secondary\"\n    @click=\"showHelp\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\n\nimport { useNodeLibrarySidebarTab } from '@/composables/sidebarTabs/useNodeLibrarySidebarTab'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport type { ComfyNodeDefImpl } from '@/stores/nodeDefStore'\nimport { useNodeDefStore } from '@/stores/nodeDefStore'\nimport { useNodeHelpStore } from '@/stores/workspace/nodeHelpStore'\nimport { useSidebarTabStore } from '@/stores/workspace/sidebarTabStore'\nimport { isLGraphNode } from '@/utils/litegraphUtil'\n\nconst canvasStore = useCanvasStore()\nconst nodeDefStore = useNodeDefStore()\nconst sidebarTabStore = useSidebarTabStore()\nconst nodeHelpStore = useNodeHelpStore()\nconst { id: nodeLibraryTabId } = useNodeLibrarySidebarTab()\n\nconst nodeDef = computed<ComfyNodeDefImpl | null>(() => {\n  if (canvasStore.selectedItems.length !== 1) return null\n  const item = canvasStore.selectedItems[0]\n  if (!isLGraphNode(item)) return null\n  return nodeDefStore.fromLGraphNode(item)\n})\n\nconst showHelp = () => {\n  const def = nodeDef.value\n  if (!def) return\n  if (sidebarTabStore.activeSidebarTabId !== nodeLibraryTabId) {\n    sidebarTabStore.toggleSidebarTab(nodeLibraryTabId)\n  }\n  nodeHelpStore.openHelp(def)\n}\n</script>\n","<template>\n  <Button\n    v-show=\"is3DNode\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_3DViewer_Open3DViewer.label'),\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    icon=\"pi pi-pencil\"\n    @click=\"open3DViewer\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\n\nimport { t } from '@/i18n'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { isLGraphNode, isLoad3dNode } from '@/utils/litegraphUtil'\n\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n\nconst is3DNode = computed(() => {\n  const enable3DViewer = useSettingStore().get('Comfy.Load3D.3DViewerEnable')\n  const nodes = canvasStore.selectedItems.filter(isLGraphNode)\n\n  return nodes.length === 1 && nodes.some(isLoad3dNode) && enable3DViewer\n})\n\nconst open3DViewer = () => {\n  void commandStore.execute('Comfy.3DViewer.Open3DViewer')\n}\n</script>\n","<template>\n  <Button\n    v-show=\"isSingleImageNode\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_MaskEditor_OpenMaskEditor.label'),\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    icon=\"pi pi-pencil\"\n    @click=\"openMaskEditor\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed } from 'vue'\n\nimport { t } from '@/i18n'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { isImageNode, isLGraphNode } from '@/utils/litegraphUtil'\n\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n\nconst isSingleImageNode = computed(() => {\n  const { selectedItems } = canvasStore\n  const item = selectedItems[0]\n  return selectedItems.length === 1 && isLGraphNode(item) && isImageNode(item)\n})\n\nconst openMaskEditor = () => {\n  void commandStore.execute('Comfy.MaskEditor.OpenMaskEditor')\n}\n</script>\n","<template>\n  <Button\n    v-show=\"canvasStore.nodeSelected || canvasStore.groupSelected\"\n    v-tooltip.top=\"{\n      value: t('commands.Comfy_Canvas_ToggleSelectedNodes_Pin.label'),\n      showDelay: 1000\n    }\"\n    severity=\"secondary\"\n    text\n    icon=\"pi pi-thumbtack\"\n    @click=\"() => commandStore.execute('Comfy.Canvas.ToggleSelected.Pin')\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\n\nconst { t } = useI18n()\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\n</script>\n","import { computed, ref, watchEffect } from 'vue'\n\nimport type { LGraphNode } from '@/lib/litegraph/src/litegraph'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { isLGraphNode } from '@/utils/litegraphUtil'\n\ninterface RefreshableItem {\n  refresh: () => Promise<void> | void\n}\n\nconst isRefreshableWidget = (widget: unknown): widget is RefreshableItem =>\n  widget != null &&\n  typeof widget === 'object' &&\n  'refresh' in widget &&\n  typeof widget.refresh === 'function'\n\n/**\n * Tracks selected nodes and their refreshable widgets\n */\nexport const useRefreshableSelection = () => {\n  const graphStore = useCanvasStore()\n  const selectedNodes = ref<LGraphNode[]>([])\n\n  watchEffect(() => {\n    selectedNodes.value = graphStore.selectedItems.filter(isLGraphNode)\n  })\n\n  const refreshableWidgets = computed<RefreshableItem[]>(() =>\n    selectedNodes.value.flatMap((node) => {\n      if (!node.widgets) return []\n      const items: RefreshableItem[] = []\n      for (const widget of node.widgets) {\n        if (isRefreshableWidget(widget)) {\n          items.push(widget)\n        }\n      }\n      return items\n    })\n  )\n\n  const isRefreshable = computed(() => refreshableWidgets.value.length > 0)\n\n  async function refreshSelected() {\n    if (!isRefreshable.value) return\n\n    await Promise.all(refreshableWidgets.value.map((item) => item.refresh()))\n  }\n\n  return {\n    isRefreshable,\n    refreshSelected\n  }\n}\n","<template>\n  <Button\n    v-show=\"isRefreshable\"\n    severity=\"info\"\n    text\n    icon=\"pi pi-refresh\"\n    @click=\"refreshSelected\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\n\nimport { useRefreshableSelection } from '@/composables/useRefreshableSelection'\n\nconst { isRefreshable, refreshSelected } = useRefreshableSelection()\n</script>\n","import { onMounted, ref, watch } from 'vue'\nimport type { Ref, WatchSource } from 'vue'\n\n/**\n * A composable that manages retriggerable CSS animations.\n * Provides a boolean ref that can be toggled to restart CSS animations.\n *\n * @param trigger - Optional reactive source that triggers the animation when it changes\n * @param options - Configuration options\n * @returns An object containing the animation state ref\n *\n * @example\n * ```vue\n * <template>\n *   <div :class=\"{ 'animate-slide-up': shouldAnimate }\">\n *     Content\n *   </div>\n * </template>\n *\n * <script setup>\n * const { shouldAnimate } = useRetriggerableAnimation(someReactiveTrigger)\n * </script>\n * ```\n */\nexport function useRetriggerableAnimation<T = any>(\n  trigger?: WatchSource<T> | Ref<T>,\n  options: {\n    animateOnMount?: boolean\n    animationDelay?: number\n  } = {}\n) {\n  const { animateOnMount = true, animationDelay = 0 } = options\n\n  const shouldAnimate = ref(false)\n\n  /**\n   * Retriggers the animation by removing and re-adding the animation class\n   */\n  const retriggerAnimation = () => {\n    // Remove animation class\n    shouldAnimate.value = false\n    // Force browser reflow to ensure the class removal is processed\n    void document.body.offsetHeight\n    // Re-add animation class in the next frame\n    requestAnimationFrame(() => {\n      if (animationDelay > 0) {\n        setTimeout(() => {\n          shouldAnimate.value = true\n        }, animationDelay)\n      } else {\n        shouldAnimate.value = true\n      }\n    })\n  }\n\n  // Trigger animation on mount if requested\n  if (animateOnMount) {\n    onMounted(() => {\n      if (animationDelay > 0) {\n        setTimeout(() => {\n          shouldAnimate.value = true\n        }, animationDelay)\n      } else {\n        shouldAnimate.value = true\n      }\n    })\n  }\n\n  // Watch for trigger changes to retrigger animation\n  if (trigger) {\n    watch(trigger, () => {\n      retriggerAnimation()\n    })\n  }\n\n  return {\n    shouldAnimate,\n    retriggerAnimation\n  }\n}\n","<template>\n  <Panel\n    class=\"selection-toolbox absolute left-1/2 rounded-lg\"\n    :class=\"{ 'animate-slide-up': shouldAnimate }\"\n    :pt=\"{\n      header: 'hidden',\n      content: 'p-0 flex flex-row'\n    }\"\n    @wheel=\"canvasInteractions.handleWheel\"\n  >\n    <ExecuteButton />\n    <ColorPickerButton />\n    <BypassButton />\n    <PinButton />\n    <EditModelButton />\n    <Load3DViewerButton />\n    <MaskEditorButton />\n    <ConvertToSubgraphButton />\n    <DeleteButton />\n    <RefreshSelectionButton />\n    <ExtensionCommandButton\n      v-for=\"command in extensionToolboxCommands\"\n      :key=\"command.id\"\n      :command=\"command\"\n    />\n    <HelpButton />\n  </Panel>\n</template>\n\n<script setup lang=\"ts\">\nimport Panel from 'primevue/panel'\nimport { computed, inject } from 'vue'\n\nimport BypassButton from '@/components/graph/selectionToolbox/BypassButton.vue'\nimport ColorPickerButton from '@/components/graph/selectionToolbox/ColorPickerButton.vue'\nimport ConvertToSubgraphButton from '@/components/graph/selectionToolbox/ConvertToSubgraphButton.vue'\nimport DeleteButton from '@/components/graph/selectionToolbox/DeleteButton.vue'\nimport EditModelButton from '@/components/graph/selectionToolbox/EditModelButton.vue'\nimport ExecuteButton from '@/components/graph/selectionToolbox/ExecuteButton.vue'\nimport ExtensionCommandButton from '@/components/graph/selectionToolbox/ExtensionCommandButton.vue'\nimport HelpButton from '@/components/graph/selectionToolbox/HelpButton.vue'\nimport Load3DViewerButton from '@/components/graph/selectionToolbox/Load3DViewerButton.vue'\nimport MaskEditorButton from '@/components/graph/selectionToolbox/MaskEditorButton.vue'\nimport PinButton from '@/components/graph/selectionToolbox/PinButton.vue'\nimport RefreshSelectionButton from '@/components/graph/selectionToolbox/RefreshSelectionButton.vue'\nimport { useRetriggerableAnimation } from '@/composables/element/useRetriggerableAnimation'\nimport { useCanvasInteractions } from '@/composables/graph/useCanvasInteractions'\nimport { useExtensionService } from '@/services/extensionService'\nimport { type ComfyCommandImpl, useCommandStore } from '@/stores/commandStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { SelectionOverlayInjectionKey } from '@/types/selectionOverlayTypes'\n\nconst commandStore = useCommandStore()\nconst canvasStore = useCanvasStore()\nconst extensionService = useExtensionService()\nconst canvasInteractions = useCanvasInteractions()\n\nconst selectionOverlayState = inject(SelectionOverlayInjectionKey)\nconst { shouldAnimate } = useRetriggerableAnimation(\n  selectionOverlayState?.updateCount,\n  { animateOnMount: true }\n)\n\nconst extensionToolboxCommands = computed<ComfyCommandImpl[]>(() => {\n  const commandIds = new Set<string>(\n    canvasStore.selectedItems\n      .map(\n        (item) =>\n          extensionService\n            .invokeExtensions('getSelectionToolboxCommands', item)\n            .flat() as string[]\n      )\n      .flat()\n  )\n  return Array.from(commandIds)\n    .map((commandId) => commandStore.getCommand(commandId))\n    .filter((command): command is ComfyCommandImpl => command !== undefined)\n})\n</script>\n\n<style scoped>\n.selection-toolbox {\n  transform: translateX(-50%) translateY(-120%);\n}\n\n/* Slide up animation using CSS animation */\n@keyframes slideUp {\n  from {\n    transform: translateX(-50%) translateY(-100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(-50%) translateY(-120%);\n    opacity: 1;\n  }\n}\n\n.animate-slide-up {\n  animation: slideUp 0.3s ease-out;\n}\n</style>\n","<template>\n  <div\n    v-if=\"showInput\"\n    class=\"group-title-editor node-title-editor\"\n    :style=\"inputStyle\"\n  >\n    <EditableText\n      :is-editing=\"showInput\"\n      :model-value=\"editedTitle\"\n      @edit=\"onEdit\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useEventListener } from '@vueuse/core'\nimport { type CSSProperties, computed, ref, watch } from 'vue'\n\nimport EditableText from '@/components/common/EditableText.vue'\nimport { useAbsolutePosition } from '@/composables/element/useAbsolutePosition'\nimport {\n  LGraphGroup,\n  LGraphNode,\n  LiteGraph\n} from '@/lib/litegraph/src/litegraph'\nimport type { LiteGraphCanvasEvent } from '@/lib/litegraph/src/litegraph'\nimport { app } from '@/scripts/app'\nimport { useCanvasStore, useTitleEditorStore } from '@/stores/graphStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\nconst settingStore = useSettingStore()\n\nconst showInput = ref(false)\nconst editedTitle = ref('')\nconst { style: inputPositionStyle, updatePosition } = useAbsolutePosition()\nconst inputFontStyle = ref<CSSProperties>({})\nconst inputStyle = computed<CSSProperties>(() => ({\n  ...inputPositionStyle.value,\n  ...inputFontStyle.value\n}))\n\nconst titleEditorStore = useTitleEditorStore()\nconst canvasStore = useCanvasStore()\nconst previousCanvasDraggable = ref(true)\n\nconst onEdit = (newValue: string) => {\n  if (titleEditorStore.titleEditorTarget && newValue.trim() !== '') {\n    const trimmedTitle = newValue.trim()\n    titleEditorStore.titleEditorTarget.title = trimmedTitle\n\n    // If this is a subgraph node, sync the runtime subgraph name for breadcrumb reactivity\n    const target = titleEditorStore.titleEditorTarget\n    if (target instanceof LGraphNode && target.isSubgraphNode?.()) {\n      target.subgraph.name = trimmedTitle\n    }\n\n    app.graph.setDirtyCanvas(true, true)\n  }\n  showInput.value = false\n  titleEditorStore.titleEditorTarget = null\n  canvasStore.canvas!.allow_dragcanvas = previousCanvasDraggable.value\n}\n\nwatch(\n  () => titleEditorStore.titleEditorTarget,\n  (target) => {\n    if (target === null) {\n      return\n    }\n    editedTitle.value = target.title\n    showInput.value = true\n    const canvas = canvasStore.canvas!\n    previousCanvasDraggable.value = canvas.allow_dragcanvas\n    canvas.allow_dragcanvas = false\n    const scale = canvas.ds.scale\n\n    if (target instanceof LGraphGroup) {\n      const group = target\n      updatePosition({\n        pos: group.pos,\n        size: [group.size[0], group.titleHeight]\n      })\n      inputFontStyle.value = { fontSize: `${group.font_size * scale}px` }\n    } else if (target instanceof LGraphNode) {\n      const node = target\n      const [x, y] = node.getBounding()\n      updatePosition({\n        pos: [x, y],\n        size: [node.width, LiteGraph.NODE_TITLE_HEIGHT]\n      })\n      inputFontStyle.value = { fontSize: `${12 * scale}px` }\n    }\n  }\n)\n\nconst canvasEventHandler = (event: LiteGraphCanvasEvent) => {\n  if (event.detail.subType === 'group-double-click') {\n    if (!settingStore.get('Comfy.Group.DoubleClickTitleToEdit')) {\n      return\n    }\n\n    const group: LGraphGroup = event.detail.group\n    const [_, y] = group.pos\n\n    const e = event.detail.originalEvent\n    const relativeY = e.canvasY - y\n    // Only allow editing if the click is on the title bar\n    if (relativeY <= group.titleHeight) {\n      titleEditorStore.titleEditorTarget = group\n    }\n  } else if (event.detail.subType === 'node-double-click') {\n    if (!settingStore.get('Comfy.Node.DoubleClickTitleToEdit')) {\n      return\n    }\n\n    const node: LGraphNode = event.detail.node\n    const [_, y] = node.pos\n\n    const e = event.detail.originalEvent\n    const relativeY = e.canvasY - y\n    // Only allow editing if the click is on the title bar\n    if (relativeY <= 0) {\n      titleEditorStore.titleEditorTarget = node\n    }\n  }\n}\n\nuseEventListener(document, 'litegraph:canvas', canvasEventHandler)\n</script>\n\n<style scoped>\n.group-title-editor.node-title-editor {\n  z-index: 9999;\n  padding: 0.25rem;\n}\n\n:deep(.editable-text) {\n  width: 100%;\n  height: 100%;\n}\n\n:deep(.editable-text input) {\n  width: 100%;\n  height: 100%;\n  /* Override the default font size */\n  font-size: inherit;\n}\n</style>\n","import { defineStore } from 'pinia'\nimport { ref } from 'vue'\n\nexport const useSearchBoxStore = defineStore('searchBox', () => {\n  const visible = ref(false)\n  function toggleVisible() {\n    visible.value = !visible.value\n  }\n\n  return {\n    visible,\n    toggleVisible\n  }\n})\n","<!-- Auto complete with extra event \"focused-option-changed\" -->\n<script>\nimport AutoComplete from 'primevue/autocomplete'\n\nexport default {\n  name: 'AutoCompletePlus',\n  extends: AutoComplete,\n  emits: ['focused-option-changed'],\n  data() {\n    return {\n      // Flag to determine if IME is active\n      isComposing: false\n    }\n  },\n  mounted() {\n    if (typeof AutoComplete.mounted === 'function') {\n      AutoComplete.mounted.call(this)\n    }\n\n    // Retrieve the actual <input> element and attach IME events\n    const inputEl = this.$el.querySelector('input')\n    if (inputEl) {\n      inputEl.addEventListener('compositionstart', () => {\n        this.isComposing = true\n      })\n      inputEl.addEventListener('compositionend', () => {\n        this.isComposing = false\n      })\n    }\n    // Add a watcher on the focusedOptionIndex property\n    this.$watch(\n      () => this.focusedOptionIndex,\n      (newVal, oldVal) => {\n        // Emit a custom event when focusedOptionIndex changes\n        this.$emit('focused-option-changed', newVal)\n      }\n    )\n  },\n  methods: {\n    // Override onKeyDown to block Enter when IME is active\n    onKeyDown(event) {\n      if (event.key === 'Enter' && this.isComposing) {\n        event.preventDefault()\n        event.stopPropagation()\n        return\n      }\n\n      AutoComplete.methods.onKeyDown.call(this, event)\n    }\n  }\n}\n</script>\n","<template>\n  <div\n    class=\"option-container flex justify-between items-center px-2 py-0 cursor-pointer overflow-hidden w-full\"\n  >\n    <div class=\"option-display-name font-semibold flex flex-col\">\n      <div>\n        <span v-if=\"isBookmarked\">\n          <i class=\"pi pi-bookmark-fill text-sm mr-1\" />\n        </span>\n        <span v-html=\"highlightQuery(nodeDef.display_name, currentQuery)\" />\n        <span>&nbsp;</span>\n        <Tag v-if=\"showIdName\" severity=\"secondary\">\n          <span v-html=\"highlightQuery(nodeDef.name, currentQuery)\" />\n        </Tag>\n      </div>\n      <div\n        v-if=\"showCategory\"\n        class=\"option-category font-light text-sm text-muted overflow-hidden text-ellipsis whitespace-nowrap\"\n      >\n        {{ nodeDef.category.replaceAll('/', ' > ') }}\n      </div>\n    </div>\n    <div class=\"option-badges\">\n      <Tag\n        v-if=\"nodeDef.experimental\"\n        :value=\"$t('g.experimental')\"\n        severity=\"primary\"\n      />\n      <Tag\n        v-if=\"nodeDef.deprecated\"\n        :value=\"$t('g.deprecated')\"\n        severity=\"danger\"\n      />\n      <Tag\n        v-if=\"showNodeFrequency && nodeFrequency > 0\"\n        :value=\"formatNumberWithSuffix(nodeFrequency, { roundToInt: true })\"\n        severity=\"secondary\"\n      />\n      <Chip\n        v-if=\"nodeDef.nodeSource.type !== NodeSourceType.Unknown\"\n        class=\"text-sm font-light\"\n      >\n        {{ nodeDef.nodeSource.displayText }}\n      </Chip>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Chip from 'primevue/chip'\nimport Tag from 'primevue/tag'\nimport { computed } from 'vue'\n\nimport { useNodeBookmarkStore } from '@/stores/nodeBookmarkStore'\nimport { ComfyNodeDefImpl, useNodeFrequencyStore } from '@/stores/nodeDefStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { NodeSourceType } from '@/types/nodeSource'\nimport { highlightQuery } from '@/utils/formatUtil'\nimport { formatNumberWithSuffix } from '@/utils/formatUtil'\n\nconst settingStore = useSettingStore()\nconst showCategory = computed(() =>\n  settingStore.get('Comfy.NodeSearchBoxImpl.ShowCategory')\n)\nconst showIdName = computed(() =>\n  settingStore.get('Comfy.NodeSearchBoxImpl.ShowIdName')\n)\nconst showNodeFrequency = computed(() =>\n  settingStore.get('Comfy.NodeSearchBoxImpl.ShowNodeFrequency')\n)\nconst nodeFrequencyStore = useNodeFrequencyStore()\nconst nodeFrequency = computed(() =>\n  nodeFrequencyStore.getNodeFrequency(props.nodeDef)\n)\n\nconst nodeBookmarkStore = useNodeBookmarkStore()\nconst isBookmarked = computed(() =>\n  nodeBookmarkStore.isBookmarked(props.nodeDef)\n)\n\nconst props = defineProps<{\n  nodeDef: ComfyNodeDefImpl\n  currentQuery: string\n}>()\n</script>\n\n<style scoped>\n:deep(.highlight) {\n  background-color: var(--p-primary-color);\n  color: var(--p-primary-contrast-color);\n  font-weight: bold;\n  border-radius: 0.25rem;\n  padding: 0 0.125rem;\n  margin: -0.125rem 0.125rem;\n}\n</style>\n","<template>\n  <div\n    class=\"comfy-vue-node-search-container flex justify-center items-center w-full min-w-96\"\n  >\n    <div\n      v-if=\"enableNodePreview\"\n      class=\"comfy-vue-node-preview-container absolute left-[-350px] top-[50px]\"\n    >\n      <NodePreview\n        v-if=\"hoveredSuggestion\"\n        :key=\"hoveredSuggestion?.name || ''\"\n        :node-def=\"hoveredSuggestion\"\n      />\n    </div>\n\n    <Button\n      icon=\"pi pi-filter\"\n      severity=\"secondary\"\n      class=\"filter-button z-10\"\n      @click=\"nodeSearchFilterVisible = true\"\n    />\n    <Dialog\n      v-model:visible=\"nodeSearchFilterVisible\"\n      class=\"min-w-96\"\n      dismissable-mask\n      modal\n      @hide=\"reFocusInput\"\n    >\n      <template #header>\n        <h3>{{ $t('g.addNodeFilterCondition') }}</h3>\n      </template>\n      <div class=\"_dialog-body\">\n        <NodeSearchFilter @add-filter=\"onAddFilter\" />\n      </div>\n    </Dialog>\n\n    <AutoCompletePlus\n      :model-value=\"filters\"\n      class=\"comfy-vue-node-search-box z-10 flex-grow\"\n      scroll-height=\"40vh\"\n      :placeholder=\"placeholder\"\n      :input-id=\"inputId\"\n      append-to=\"self\"\n      :suggestions=\"suggestions\"\n      :min-length=\"0\"\n      :delay=\"100\"\n      :loading=\"!nodeFrequencyStore.isLoaded\"\n      complete-on-focus\n      auto-option-focus\n      force-selection\n      multiple\n      :option-label=\"'display_name'\"\n      @complete=\"search($event.query)\"\n      @option-select=\"emit('addNode', $event.value)\"\n      @focused-option-changed=\"setHoverSuggestion($event)\"\n    >\n      <template #option=\"{ option }\">\n        <NodeSearchItem :node-def=\"option\" :current-query=\"currentQuery\" />\n      </template>\n      <!-- FilterAndValue -->\n      <template #chip=\"{ value }\">\n        <SearchFilterChip\n          v-if=\"value.filterDef && value.value\"\n          :key=\"`${value.filterDef.id}-${value.value}`\"\n          :text=\"value.value\"\n          :badge=\"value.filterDef.invokeSequence.toUpperCase()\"\n          :badge-class=\"value.filterDef.invokeSequence + '-badge'\"\n          @remove=\"\n            onRemoveFilter(\n              $event,\n              value as FuseFilterWithValue<ComfyNodeDefImpl, string>\n            )\n          \"\n        />\n      </template>\n    </AutoCompletePlus>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Dialog from 'primevue/dialog'\nimport { computed, nextTick, onMounted, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport NodePreview from '@/components/node/NodePreview.vue'\nimport AutoCompletePlus from '@/components/primevueOverride/AutoCompletePlus.vue'\nimport NodeSearchFilter from '@/components/searchbox/NodeSearchFilter.vue'\nimport NodeSearchItem from '@/components/searchbox/NodeSearchItem.vue'\nimport {\n  ComfyNodeDefImpl,\n  useNodeDefStore,\n  useNodeFrequencyStore\n} from '@/stores/nodeDefStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport type { FuseFilterWithValue } from '@/utils/fuseUtil'\n\nimport SearchFilterChip from '../common/SearchFilterChip.vue'\n\nconst settingStore = useSettingStore()\nconst { t } = useI18n()\n\nconst enableNodePreview = computed(() =>\n  settingStore.get('Comfy.NodeSearchBoxImpl.NodePreview')\n)\n\nconst { filters, searchLimit = 64 } = defineProps<{\n  filters: FuseFilterWithValue<ComfyNodeDefImpl, string>[]\n  searchLimit?: number\n}>()\n\nconst nodeSearchFilterVisible = ref(false)\nconst inputId = `comfy-vue-node-search-box-input-${Math.random()}`\nconst suggestions = ref<ComfyNodeDefImpl[]>([])\nconst hoveredSuggestion = ref<ComfyNodeDefImpl | null>(null)\nconst currentQuery = ref('')\nconst placeholder = computed(() => {\n  return filters.length === 0 ? t('g.searchNodes') + '...' : ''\n})\n\nconst nodeDefStore = useNodeDefStore()\nconst nodeFrequencyStore = useNodeFrequencyStore()\nconst search = (query: string) => {\n  const queryIsEmpty = query === '' && filters.length === 0\n  currentQuery.value = query\n  suggestions.value = queryIsEmpty\n    ? nodeFrequencyStore.topNodeDefs\n    : [\n        ...nodeDefStore.nodeSearchService.searchNode(query, filters, {\n          limit: searchLimit\n        })\n      ]\n}\n\nconst emit = defineEmits(['addFilter', 'removeFilter', 'addNode'])\n\nlet inputElement: HTMLInputElement | null = null\nconst reFocusInput = async () => {\n  inputElement ??= document.getElementById(inputId) as HTMLInputElement\n  if (inputElement) {\n    inputElement.blur()\n    await nextTick(() => inputElement?.focus())\n  }\n}\n\nonMounted(reFocusInput)\nconst onAddFilter = (\n  filterAndValue: FuseFilterWithValue<ComfyNodeDefImpl, string>\n) => {\n  nodeSearchFilterVisible.value = false\n  emit('addFilter', filterAndValue)\n}\nconst onRemoveFilter = async (\n  event: Event,\n  filterAndValue: FuseFilterWithValue<ComfyNodeDefImpl, string>\n) => {\n  event.stopPropagation()\n  event.preventDefault()\n  emit('removeFilter', filterAndValue)\n  await reFocusInput()\n}\nconst setHoverSuggestion = (index: number) => {\n  if (index === -1) {\n    hoveredSuggestion.value = null\n    return\n  }\n  const value = suggestions.value[index]\n  hoveredSuggestion.value = value\n}\n</script>\n","<template>\n  <div>\n    <Dialog\n      v-model:visible=\"visible\"\n      modal\n      :dismissable-mask=\"dismissable\"\n      :pt=\"{\n        root: {\n          class: 'invisible-dialog-root',\n          role: 'search'\n        },\n        mask: { class: 'node-search-box-dialog-mask' },\n        transition: {\n          enterFromClass: 'opacity-0 scale-75',\n          // 100ms is the duration of the transition in the dialog component\n          enterActiveClass: 'transition-all duration-100 ease-out',\n          leaveActiveClass: 'transition-all duration-100 ease-in',\n          leaveToClass: 'opacity-0 scale-75'\n        }\n      }\"\n      @hide=\"clearFilters\"\n    >\n      <template #container>\n        <NodeSearchBox\n          :filters=\"nodeFilters\"\n          @add-filter=\"addFilter\"\n          @remove-filter=\"removeFilter\"\n          @add-node=\"addNode\"\n        />\n      </template>\n    </Dialog>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useEventListener } from '@vueuse/core'\nimport { storeToRefs } from 'pinia'\nimport Dialog from 'primevue/dialog'\nimport { computed, ref, toRaw, watch, watchEffect } from 'vue'\n\nimport { Point } from '@/lib/litegraph/src/interfaces'\nimport {\n  LGraphNode,\n  LiteGraph,\n  LiteGraphCanvasEvent\n} from '@/lib/litegraph/src/litegraph'\nimport type { CanvasPointerEvent } from '@/lib/litegraph/src/types/events'\nimport { useLitegraphService } from '@/services/litegraphService'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { ComfyNodeDefImpl, useNodeDefStore } from '@/stores/nodeDefStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { useSearchBoxStore } from '@/stores/workspace/searchBoxStore'\nimport { LinkReleaseTriggerAction } from '@/types/searchBoxTypes'\nimport { FuseFilterWithValue } from '@/utils/fuseUtil'\n\nimport NodeSearchBox from './NodeSearchBox.vue'\n\nlet triggerEvent: CanvasPointerEvent | null = null\nlet listenerController: AbortController | null = null\nlet disconnectOnReset = false\n\nconst settingStore = useSettingStore()\nconst litegraphService = useLitegraphService()\n\nconst { visible } = storeToRefs(useSearchBoxStore())\nconst dismissable = ref(true)\nconst getNewNodeLocation = (): Point => {\n  return triggerEvent\n    ? [triggerEvent.canvasX, triggerEvent.canvasY]\n    : litegraphService.getCanvasCenter()\n}\nconst nodeFilters = ref<FuseFilterWithValue<ComfyNodeDefImpl, string>[]>([])\nconst addFilter = (filter: FuseFilterWithValue<ComfyNodeDefImpl, string>) => {\n  nodeFilters.value.push(filter)\n}\nconst removeFilter = (\n  filter: FuseFilterWithValue<ComfyNodeDefImpl, string>\n) => {\n  nodeFilters.value = nodeFilters.value.filter(\n    (f) => toRaw(f) !== toRaw(filter)\n  )\n}\nconst clearFilters = () => {\n  nodeFilters.value = []\n}\nconst closeDialog = () => {\n  visible.value = false\n}\nconst canvasStore = useCanvasStore()\n\nconst addNode = (nodeDef: ComfyNodeDefImpl) => {\n  if (!triggerEvent) {\n    console.warn('The trigger event was undefined when addNode was called.')\n    return\n  }\n\n  const node = litegraphService.addNodeOnGraph(nodeDef, {\n    pos: getNewNodeLocation()\n  })\n\n  if (disconnectOnReset) {\n    canvasStore.getCanvas().linkConnector.connectToNode(node, triggerEvent)\n  }\n  disconnectOnReset = false\n\n  // Notify changeTracker - new step should be added\n  useWorkflowStore().activeWorkflow?.changeTracker?.checkState()\n  window.requestAnimationFrame(closeDialog)\n}\n\nconst newSearchBoxEnabled = computed(\n  () => settingStore.get('Comfy.NodeSearchBoxImpl') === 'default'\n)\nconst showSearchBox = (e: CanvasPointerEvent) => {\n  if (newSearchBoxEnabled.value) {\n    if (e.pointerType === 'touch') {\n      setTimeout(() => {\n        showNewSearchBox(e)\n      }, 128)\n    } else {\n      showNewSearchBox(e)\n    }\n  } else {\n    canvasStore.getCanvas().showSearchBox(e)\n  }\n}\n\nconst getFirstLink = () =>\n  canvasStore.getCanvas().linkConnector.renderLinks.at(0)\n\nconst nodeDefStore = useNodeDefStore()\nconst showNewSearchBox = (e: CanvasPointerEvent) => {\n  const firstLink = getFirstLink()\n  if (firstLink) {\n    const filter =\n      firstLink.toType === 'input'\n        ? nodeDefStore.nodeSearchService.inputTypeFilter\n        : nodeDefStore.nodeSearchService.outputTypeFilter\n\n    const dataType = firstLink.fromSlot.type?.toString() ?? ''\n    addFilter({\n      filterDef: filter,\n      value: dataType\n    })\n  }\n\n  visible.value = true\n  triggerEvent = e\n\n  // Prevent the dialog from being dismissed immediately\n  dismissable.value = false\n  setTimeout(() => {\n    dismissable.value = true\n  }, 300)\n}\n\nconst showContextMenu = (e: CanvasPointerEvent) => {\n  const firstLink = getFirstLink()\n  if (!firstLink) return\n\n  const { node, fromSlot, toType } = firstLink\n  const commonOptions = {\n    e,\n    allow_searchbox: true,\n    showSearchBox: () => {\n      cancelResetOnContextClose()\n      showSearchBox(e)\n    }\n  }\n  const afterRerouteId = firstLink.fromReroute?.id\n  const connectionOptions =\n    toType === 'input'\n      ? { nodeFrom: node, slotFrom: fromSlot, afterRerouteId }\n      : { nodeTo: node, slotTo: fromSlot, afterRerouteId }\n\n  const canvas = canvasStore.getCanvas()\n  const menu = canvas.showConnectionMenu({\n    ...connectionOptions,\n    ...commonOptions\n  })\n\n  if (!menu) {\n    console.warn('No menu was returned from showConnectionMenu')\n    return\n  }\n\n  triggerEvent = e\n  listenerController = new AbortController()\n  const { signal } = listenerController\n  const options = { once: true, signal }\n\n  // Connect the node after it is created via context menu\n  useEventListener(\n    canvas.canvas,\n    'connect-new-default-node',\n    (createEvent) => {\n      if (!(createEvent instanceof CustomEvent))\n        throw new Error('Invalid event')\n\n      const node: unknown = createEvent.detail?.node\n      if (!(node instanceof LGraphNode)) throw new Error('Invalid node')\n\n      disconnectOnReset = false\n      createEvent.preventDefault()\n      canvas.linkConnector.connectToNode(node, e)\n    },\n    options\n  )\n\n  // Reset when the context menu is closed\n  const cancelResetOnContextClose = useEventListener(\n    menu.controller.signal,\n    'abort',\n    reset,\n    options\n  )\n}\n\n// Disable litegraph's default behavior of release link and search box.\nwatchEffect(() => {\n  const { canvas } = canvasStore\n  if (!canvas) return\n\n  LiteGraph.release_link_on_empty_shows_menu = false\n  canvas.allow_searchbox = false\n\n  useEventListener(\n    canvas.linkConnector.events,\n    'dropped-on-canvas',\n    handleDroppedOnCanvas\n  )\n})\n\nconst canvasEventHandler = (e: LiteGraphCanvasEvent) => {\n  if (e.detail.subType === 'empty-double-click') {\n    showSearchBox(e.detail.originalEvent)\n  } else if (e.detail.subType === 'group-double-click') {\n    const group = e.detail.group\n    const [_, y] = group.pos\n    const relativeY = e.detail.originalEvent.canvasY - y\n    // Show search box if the click is NOT on the title bar\n    if (relativeY > group.titleHeight) {\n      showSearchBox(e.detail.originalEvent)\n    }\n  }\n}\n\nconst linkReleaseAction = computed(() =>\n  settingStore.get('Comfy.LinkRelease.Action')\n)\n\nconst linkReleaseActionShift = computed(() =>\n  settingStore.get('Comfy.LinkRelease.ActionShift')\n)\n\n// Prevent normal LinkConnector reset (called by CanvasPointer.finally)\nconst preventDefault = (e: Event) => e.preventDefault()\nconst cancelNextReset = (e: CustomEvent<CanvasPointerEvent>) => {\n  e.preventDefault()\n\n  const canvas = canvasStore.getCanvas()\n  canvas.linkConnector.state.snapLinksPos = [e.detail.canvasX, e.detail.canvasY]\n  useEventListener(canvas.linkConnector.events, 'reset', preventDefault, {\n    once: true\n  })\n}\n\nconst handleDroppedOnCanvas = (e: CustomEvent<CanvasPointerEvent>) => {\n  disconnectOnReset = true\n  const action = e.detail.shiftKey\n    ? linkReleaseActionShift.value\n    : linkReleaseAction.value\n  switch (action) {\n    case LinkReleaseTriggerAction.SEARCH_BOX:\n      cancelNextReset(e)\n      showSearchBox(e.detail)\n      break\n    case LinkReleaseTriggerAction.CONTEXT_MENU:\n      cancelNextReset(e)\n      showContextMenu(e.detail)\n      break\n    case LinkReleaseTriggerAction.NO_ACTION:\n    default:\n      break\n  }\n}\n\n// Resets litegraph state\nconst reset = () => {\n  listenerController?.abort()\n  listenerController = null\n  triggerEvent = null\n\n  const canvas = canvasStore.getCanvas()\n  canvas.linkConnector.events.removeEventListener('reset', preventDefault)\n  if (disconnectOnReset) canvas.linkConnector.disconnectLinks()\n\n  canvas.linkConnector.reset()\n  canvas.setDirty(true, true)\n}\n\n// Reset connecting links when the search box is closed\nwatch(visible, () => {\n  if (!visible.value) reset()\n})\n\nuseEventListener(document, 'litegraph:canvas', canvasEventHandler)\n</script>\n\n<style>\n.invisible-dialog-root {\n  width: 60%;\n  min-width: 24rem;\n  max-width: 48rem;\n  border: 0 !important;\n  background-color: transparent !important;\n  margin-top: 25vh;\n  margin-left: 400px;\n}\n@media all and (max-width: 768px) {\n  .invisible-dialog-root {\n    margin-left: 0;\n  }\n}\n\n.node-search-box-dialog-mask {\n  align-items: flex-start !important;\n}\n</style>\n","<template>\n  <Button\n    v-tooltip=\"{\n      value: computedTooltip,\n      showDelay: 300,\n      hideDelay: 300\n    }\"\n    text\n    :pt=\"{\n      root: {\n        class: `side-bar-button ${\n          selected\n            ? 'p-button-primary side-bar-button-selected'\n            : 'p-button-secondary'\n        }`,\n        'aria-label': computedTooltip\n      }\n    }\"\n    @click=\"emit('click', $event)\"\n  >\n    <template #icon>\n      <slot name=\"icon\">\n        <OverlayBadge v-if=\"shouldShowBadge\" :value=\"overlayValue\">\n          <i :class=\"icon + ' side-bar-button-icon'\" />\n        </OverlayBadge>\n        <i v-else :class=\"icon + ' side-bar-button-icon'\" />\n      </slot>\n    </template>\n  </Button>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport OverlayBadge from 'primevue/overlaybadge'\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nconst { t } = useI18n()\nconst {\n  icon = '',\n  selected = false,\n  tooltip = '',\n  tooltipSuffix = '',\n  iconBadge = ''\n} = defineProps<{\n  icon?: string\n  selected?: boolean\n  tooltip?: string\n  tooltipSuffix?: string\n  iconBadge?: string | (() => string | null)\n}>()\n\nconst emit = defineEmits<{\n  (e: 'click', event: MouseEvent): void\n}>()\nconst overlayValue = computed(() =>\n  typeof iconBadge === 'function' ? iconBadge() ?? '' : iconBadge\n)\nconst shouldShowBadge = computed(() => !!overlayValue.value)\nconst computedTooltip = computed(() => t(tooltip) + tooltipSuffix)\n</script>\n\n<style>\n.side-bar-button-icon {\n  font-size: var(--sidebar-icon-size) !important;\n}\n\n.side-bar-button-selected .side-bar-button-icon {\n  font-size: var(--sidebar-icon-size) !important;\n  font-weight: bold;\n}\n</style>\n\n<style scoped>\n.side-bar-button {\n  width: var(--sidebar-width);\n  height: var(--sidebar-width);\n  border-radius: 0;\n}\n\n.comfyui-body-left .side-bar-button.side-bar-button-selected,\n.comfyui-body-left .side-bar-button.side-bar-button-selected:hover {\n  border-left: 4px solid var(--p-button-text-primary-color);\n}\n\n.comfyui-body-right .side-bar-button.side-bar-button-selected,\n.comfyui-body-right .side-bar-button.side-bar-button-selected:hover {\n  border-right: 4px solid var(--p-button-text-primary-color);\n}\n</style>\n","<template>\n  <SidebarIcon\n    :tooltip=\"$t('menu.toggleBottomPanel')\"\n    :selected=\"bottomPanelStore.activePanel == 'terminal'\"\n    @click=\"bottomPanelStore.toggleBottomPanel\"\n  >\n    <template #icon>\n      <i-ph:terminal-bold />\n    </template>\n  </SidebarIcon>\n</template>\n\n<script setup lang=\"ts\">\nimport { useBottomPanelStore } from '@/stores/workspace/bottomPanelStore'\n\nimport SidebarIcon from './SidebarIcon.vue'\n\nconst bottomPanelStore = useBottomPanelStore()\n</script>\n","<template>\n  <SidebarIcon\n    :tooltip=\"\n      $t('shortcuts.keyboardShortcuts') +\n      ' (' +\n      formatKeySequence(command.keybinding!.combo.getKeySequences()) +\n      ')'\n    \"\n    :selected=\"isShortcutsPanelVisible\"\n    @click=\"toggleShortcutsPanel\"\n  >\n    <template #icon>\n      <i-lucide:keyboard />\n    </template>\n  </SidebarIcon>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useBottomPanelStore } from '@/stores/workspace/bottomPanelStore'\n\nimport SidebarIcon from './SidebarIcon.vue'\n\nconst bottomPanelStore = useBottomPanelStore()\nconst command = useCommandStore().getCommand(\n  'Workspace.ToggleBottomPanel.Shortcuts'\n)\n\nconst isShortcutsPanelVisible = computed(\n  () => bottomPanelStore.activePanel === 'shortcuts'\n)\n\nconst toggleShortcutsPanel = () => {\n  bottomPanelStore.togglePanel('shortcuts')\n}\n\nconst formatKeySequence = (sequences: string[]): string => {\n  return sequences\n    .map((seq) => seq.replace(/Control/g, 'Ctrl').replace(/Shift/g, 'Shift'))\n    .join(' + ')\n}\n</script>\n","import axios, { AxiosError, AxiosResponse } from 'axios'\nimport { ref } from 'vue'\n\nimport { COMFY_API_BASE_URL } from '@/config/comfyApi'\nimport type { components, operations } from '@/types/comfyRegistryTypes'\nimport { isAbortError } from '@/utils/typeGuardUtil'\n\nconst releaseApiClient = axios.create({\n  baseURL: COMFY_API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n\n// Use generated types from OpenAPI spec\nexport type ReleaseNote = components['schemas']['ReleaseNote']\nexport type GetReleasesParams =\n  operations['getReleaseNotes']['parameters']['query']\n\n// Use generated error response type\nexport type ErrorResponse = components['schemas']['ErrorResponse']\n\n// Release service for fetching release notes\nexport const useReleaseService = () => {\n  const isLoading = ref(false)\n  const error = ref<string | null>(null)\n\n  // No transformation needed - API response matches the generated type\n\n  // Handle API errors with context\n  const handleApiError = (\n    err: unknown,\n    context: string,\n    routeSpecificErrors?: Record<number, string>\n  ): string => {\n    if (!axios.isAxiosError(err))\n      return err instanceof Error\n        ? `${context}: ${err.message}`\n        : `${context}: Unknown error occurred`\n\n    const axiosError = err as AxiosError<ErrorResponse>\n\n    if (axiosError.response) {\n      const { status, data } = axiosError.response\n\n      if (routeSpecificErrors && routeSpecificErrors[status])\n        return routeSpecificErrors[status]\n\n      switch (status) {\n        case 400:\n          return `Bad request: ${data?.message || 'Invalid input'}`\n        case 401:\n          return 'Unauthorized: Authentication required'\n        case 403:\n          return `Forbidden: ${data?.message || 'Access denied'}`\n        case 404:\n          return `Not found: ${data?.message || 'Resource not found'}`\n        case 500:\n          return `Server error: ${data?.message || 'Internal server error'}`\n        default:\n          return `${context}: ${data?.message || axiosError.message}`\n      }\n    }\n\n    return `${context}: ${axiosError.message}`\n  }\n\n  // Execute API request with error handling\n  const executeApiRequest = async <T>(\n    apiCall: () => Promise<AxiosResponse<T>>,\n    errorContext: string,\n    routeSpecificErrors?: Record<number, string>\n  ): Promise<T | null> => {\n    isLoading.value = true\n    error.value = null\n\n    try {\n      const response = await apiCall()\n      return response.data\n    } catch (err) {\n      // Don't treat cancellations as errors\n      if (isAbortError(err)) return null\n\n      error.value = handleApiError(err, errorContext, routeSpecificErrors)\n      return null\n    } finally {\n      isLoading.value = false\n    }\n  }\n\n  // Fetch release notes from API\n  const getReleases = async (\n    params: GetReleasesParams,\n    signal?: AbortSignal\n  ): Promise<ReleaseNote[] | null> => {\n    const endpoint = '/releases'\n    const errorContext = 'Failed to get releases'\n    const routeSpecificErrors = {\n      400: 'Invalid project or version parameter'\n    }\n\n    const apiResponse = await executeApiRequest(\n      () =>\n        releaseApiClient.get<ReleaseNote[]>(endpoint, {\n          params,\n          signal\n        }),\n      errorContext,\n      routeSpecificErrors\n    )\n\n    return apiResponse\n  }\n\n  return {\n    isLoading,\n    error,\n    getReleases\n  }\n}\n","import { defineStore } from 'pinia'\nimport { computed, ref } from 'vue'\n\nimport { type ReleaseNote, useReleaseService } from '@/services/releaseService'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useSystemStatsStore } from '@/stores/systemStatsStore'\nimport { isElectron } from '@/utils/envUtil'\nimport { compareVersions, stringToLocale } from '@/utils/formatUtil'\n\n// Store for managing release notes\nexport const useReleaseStore = defineStore('release', () => {\n  // State\n  const releases = ref<ReleaseNote[]>([])\n  const isLoading = ref(false)\n  const error = ref<string | null>(null)\n\n  // Services\n  const releaseService = useReleaseService()\n  const systemStatsStore = useSystemStatsStore()\n  const settingStore = useSettingStore()\n\n  // Current ComfyUI version\n  const currentComfyUIVersion = computed(\n    () => systemStatsStore?.systemStats?.system?.comfyui_version ?? ''\n  )\n\n  // Release data from settings\n  const locale = computed(() => settingStore.get('Comfy.Locale'))\n  const releaseVersion = computed(() =>\n    settingStore.get('Comfy.Release.Version')\n  )\n  const releaseStatus = computed(() => settingStore.get('Comfy.Release.Status'))\n  const releaseTimestamp = computed(() =>\n    settingStore.get('Comfy.Release.Timestamp')\n  )\n  const showVersionUpdates = computed(() =>\n    settingStore.get('Comfy.Notification.ShowVersionUpdates')\n  )\n\n  // Most recent release\n  const recentRelease = computed(() => {\n    return releases.value[0] ?? null\n  })\n\n  // 3 most recent releases\n  const recentReleases = computed(() => {\n    return releases.value.slice(0, 3)\n  })\n\n  // Helper constants\n  const THREE_DAYS_MS = 3 * 24 * 60 * 60 * 1000 // 3 days\n\n  // New version available?\n  const isNewVersionAvailable = computed(\n    () =>\n      !!recentRelease.value &&\n      compareVersions(\n        recentRelease.value.version,\n        currentComfyUIVersion.value\n      ) > 0\n  )\n\n  const isLatestVersion = computed(\n    () =>\n      !!recentRelease.value &&\n      !compareVersions(recentRelease.value.version, currentComfyUIVersion.value)\n  )\n\n  const hasMediumOrHighAttention = computed(() =>\n    recentReleases.value\n      .slice(0, -1)\n      .some(\n        (release) =>\n          release.attention === 'medium' || release.attention === 'high'\n      )\n  )\n\n  // Show toast if needed\n  const shouldShowToast = computed(() => {\n    // Only show on desktop version\n    if (!isElectron()) {\n      return false\n    }\n\n    // Skip if notifications are disabled\n    if (!showVersionUpdates.value) {\n      return false\n    }\n\n    if (!isNewVersionAvailable.value) {\n      return false\n    }\n\n    // Skip if low attention\n    if (!hasMediumOrHighAttention.value) {\n      return false\n    }\n\n    // Skip if user already skipped or changelog seen\n    if (\n      releaseVersion.value === recentRelease.value?.version &&\n      ['skipped', 'changelog seen'].includes(releaseStatus.value)\n    ) {\n      return false\n    }\n\n    return true\n  })\n\n  // Show red-dot indicator\n  const shouldShowRedDot = computed(() => {\n    // Only show on desktop version\n    if (!isElectron()) {\n      return false\n    }\n\n    // Skip if notifications are disabled\n    if (!showVersionUpdates.value) {\n      return false\n    }\n\n    // Already latest  no dot\n    if (!isNewVersionAvailable.value) {\n      return false\n    }\n\n    const { version } = recentRelease.value\n\n    // Changelog seen  clear dot\n    if (\n      releaseVersion.value === version &&\n      releaseStatus.value === 'changelog seen'\n    ) {\n      return false\n    }\n\n    // Attention medium / high (levels 2 & 3)\n    if (hasMediumOrHighAttention.value) {\n      // Persist until changelog is opened\n      return true\n    }\n\n    // Attention low (level 1) and skipped  keep up to 3 d\n    if (\n      releaseVersion.value === version &&\n      releaseStatus.value === 'skipped' &&\n      releaseTimestamp.value &&\n      Date.now() - releaseTimestamp.value >= THREE_DAYS_MS\n    ) {\n      return false\n    }\n\n    // Not skipped  show\n    return true\n  })\n\n  // Show \"What's New\" popup\n  const shouldShowPopup = computed(() => {\n    // Only show on desktop version\n    if (!isElectron()) {\n      return false\n    }\n\n    // Skip if notifications are disabled\n    if (!showVersionUpdates.value) {\n      return false\n    }\n\n    if (!isLatestVersion.value) {\n      return false\n    }\n\n    // Hide if already seen\n    if (\n      releaseVersion.value === recentRelease.value.version &&\n      releaseStatus.value === \"what's new seen\"\n    ) {\n      return false\n    }\n\n    return true\n  })\n\n  // Action handlers for user interactions\n  async function handleSkipRelease(version: string): Promise<void> {\n    if (\n      version !== recentRelease.value?.version ||\n      releaseStatus.value === 'changelog seen'\n    ) {\n      return\n    }\n\n    await settingStore.set('Comfy.Release.Version', version)\n    await settingStore.set('Comfy.Release.Status', 'skipped')\n    await settingStore.set('Comfy.Release.Timestamp', Date.now())\n  }\n\n  async function handleShowChangelog(version: string): Promise<void> {\n    if (version !== recentRelease.value?.version) {\n      return\n    }\n\n    await settingStore.set('Comfy.Release.Version', version)\n    await settingStore.set('Comfy.Release.Status', 'changelog seen')\n    await settingStore.set('Comfy.Release.Timestamp', Date.now())\n  }\n\n  async function handleWhatsNewSeen(version: string): Promise<void> {\n    if (version !== recentRelease.value?.version) {\n      return\n    }\n\n    await settingStore.set('Comfy.Release.Version', version)\n    await settingStore.set('Comfy.Release.Status', \"what's new seen\")\n    await settingStore.set('Comfy.Release.Timestamp', Date.now())\n  }\n\n  // Fetch releases from API\n  async function fetchReleases(): Promise<void> {\n    if (isLoading.value) {\n      return\n    }\n\n    // Skip fetching if notifications are disabled\n    if (!showVersionUpdates.value) {\n      return\n    }\n\n    isLoading.value = true\n    error.value = null\n\n    try {\n      // Ensure system stats are loaded\n      if (!systemStatsStore.systemStats) {\n        await systemStatsStore.fetchSystemStats()\n      }\n\n      const fetchedReleases = await releaseService.getReleases({\n        project: 'comfyui',\n        current_version: currentComfyUIVersion.value,\n        form_factor: systemStatsStore.getFormFactor(),\n        locale: stringToLocale(locale.value)\n      })\n\n      if (fetchedReleases !== null) {\n        releases.value = fetchedReleases\n      } else if (releaseService.error.value) {\n        error.value = releaseService.error.value\n      }\n    } catch (err) {\n      error.value =\n        err instanceof Error ? err.message : 'Unknown error occurred'\n    } finally {\n      isLoading.value = false\n    }\n  }\n\n  // Initialize store\n  async function initialize(): Promise<void> {\n    await fetchReleases()\n  }\n\n  return {\n    releases,\n    isLoading,\n    error,\n    recentRelease,\n    recentReleases,\n    shouldShowToast,\n    shouldShowRedDot,\n    shouldShowPopup,\n    shouldShowUpdateButton: isNewVersionAvailable,\n    handleSkipRelease,\n    handleShowChangelog,\n    handleWhatsNewSeen,\n    fetchReleases,\n    initialize\n  }\n})\n","<template>\n  <div class=\"help-center-menu\" role=\"menu\" aria-label=\"Help Center Menu\">\n    <!-- Main Menu Items -->\n    <nav class=\"help-menu-section\" role=\"menubar\">\n      <button\n        v-for=\"menuItem in menuItems\"\n        v-show=\"menuItem.visible !== false\"\n        :key=\"menuItem.key\"\n        type=\"button\"\n        class=\"help-menu-item\"\n        :class=\"{ 'more-item': menuItem.key === 'more' }\"\n        role=\"menuitem\"\n        @click=\"menuItem.action\"\n        @mouseenter=\"onMenuItemHover(menuItem.key, $event)\"\n        @mouseleave=\"onMenuItemLeave(menuItem.key)\"\n      >\n        <i :class=\"menuItem.icon\" class=\"help-menu-icon\" />\n        <span class=\"menu-label\">{{ menuItem.label }}</span>\n        <i v-if=\"menuItem.key === 'more'\" class=\"pi pi-chevron-right\" />\n      </button>\n    </nav>\n\n    <!-- More Submenu -->\n    <Teleport to=\"body\">\n      <div\n        v-if=\"isSubmenuVisible\"\n        ref=\"submenuRef\"\n        class=\"more-submenu\"\n        :style=\"submenuStyle\"\n        @mouseenter=\"onSubmenuHover\"\n        @mouseleave=\"onSubmenuLeave\"\n      >\n        <template\n          v-for=\"submenuItem in moreMenuItem?.items\"\n          :key=\"submenuItem.key\"\n        >\n          <div\n            v-if=\"submenuItem.type === 'divider'\"\n            v-show=\"submenuItem.visible !== false\"\n            class=\"submenu-divider\"\n          />\n          <button\n            v-else\n            v-show=\"submenuItem.visible !== false\"\n            type=\"button\"\n            class=\"help-menu-item submenu-item\"\n            role=\"menuitem\"\n            @click=\"submenuItem.action\"\n          >\n            <span class=\"menu-label\">{{ submenuItem.label }}</span>\n          </button>\n        </template>\n      </div>\n    </Teleport>\n\n    <!-- What's New Section -->\n    <section v-if=\"showVersionUpdates\" class=\"whats-new-section\">\n      <h3 class=\"section-description\">{{ $t('helpCenter.whatsNew') }}</h3>\n\n      <!-- Release Items -->\n      <div v-if=\"hasReleases\" role=\"group\" aria-label=\"Recent releases\">\n        <article\n          v-for=\"release in releaseStore.recentReleases\"\n          :key=\"release.id || release.version\"\n          class=\"help-menu-item release-menu-item\"\n          role=\"button\"\n          tabindex=\"0\"\n          @click=\"onReleaseClick(release)\"\n          @keydown.enter=\"onReleaseClick(release)\"\n          @keydown.space.prevent=\"onReleaseClick(release)\"\n        >\n          <i class=\"pi pi-refresh help-menu-icon\" aria-hidden=\"true\" />\n          <div class=\"release-content\">\n            <span class=\"release-title\">\n              {{\n                $t('g.releaseTitle', {\n                  package: 'Comfy',\n                  version: release.version\n                })\n              }}\n            </span>\n            <time class=\"release-date\" :datetime=\"release.published_at\">\n              <span class=\"normal-state\">\n                {{ formatReleaseDate(release.published_at) }}\n              </span>\n              <span class=\"hover-state\">\n                {{ $t('helpCenter.clickToLearnMore') }}\n              </span>\n            </time>\n          </div>\n          <Button\n            v-if=\"shouldShowUpdateButton(release)\"\n            :label=\"$t('helpCenter.updateAvailable')\"\n            size=\"small\"\n            class=\"update-button\"\n            @click.stop=\"onUpdate(release)\"\n          />\n        </article>\n      </div>\n\n      <!-- Loading State -->\n      <div\n        v-else-if=\"releaseStore.isLoading\"\n        class=\"help-menu-item\"\n        role=\"status\"\n        aria-live=\"polite\"\n      >\n        <i class=\"pi pi-spin pi-spinner help-menu-icon\" aria-hidden=\"true\" />\n        <span>{{ $t('helpCenter.loadingReleases') }}</span>\n      </div>\n\n      <!-- No Releases State -->\n      <div v-else class=\"help-menu-item\" role=\"status\">\n        <i class=\"pi pi-info-circle help-menu-icon\" aria-hidden=\"true\" />\n        <span>{{ $t('helpCenter.noRecentReleases') }}</span>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { type CSSProperties, computed, nextTick, onMounted, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { type ReleaseNote } from '@/services/releaseService'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useReleaseStore } from '@/stores/releaseStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { electronAPI, isElectron } from '@/utils/envUtil'\nimport { formatVersionAnchor } from '@/utils/formatUtil'\n\n// Types\ninterface MenuItem {\n  key: string\n  icon?: string\n  label?: string\n  action?: () => void\n  visible?: boolean\n  type?: 'item' | 'divider'\n  items?: MenuItem[]\n}\n\n// Constants\nconst EXTERNAL_LINKS = {\n  DOCS: 'https://docs.comfy.org/',\n  DISCORD: 'https://www.comfy.org/discord',\n  GITHUB: 'https://github.com/comfyanonymous/ComfyUI',\n  DESKTOP_GUIDE: 'https://comfyorg.notion.site/',\n  UPDATE_GUIDE: 'https://docs.comfy.org/installation/update_comfyui'\n} as const\n\nconst TIME_UNITS = {\n  MINUTE: 60 * 1000,\n  HOUR: 60 * 60 * 1000,\n  DAY: 24 * 60 * 60 * 1000,\n  WEEK: 7 * 24 * 60 * 60 * 1000,\n  MONTH: 30 * 24 * 60 * 60 * 1000,\n  YEAR: 365 * 24 * 60 * 60 * 1000\n} as const\n\nconst SUBMENU_CONFIG = {\n  DELAY_MS: 100,\n  OFFSET_PX: 8,\n  Z_INDEX: 10001\n} as const\n\n// Composables\nconst { t, locale } = useI18n()\nconst releaseStore = useReleaseStore()\nconst commandStore = useCommandStore()\nconst settingStore = useSettingStore()\n\n// Emits\nconst emit = defineEmits<{\n  close: []\n}>()\n\n// State\nconst isSubmenuVisible = ref(false)\nconst submenuRef = ref<HTMLElement | null>(null)\nconst submenuStyle = ref<CSSProperties>({})\nlet hoverTimeout: number | null = null\n\n// Computed\nconst hasReleases = computed(() => releaseStore.releases.length > 0)\nconst showVersionUpdates = computed(() =>\n  settingStore.get('Comfy.Notification.ShowVersionUpdates')\n)\n\nconst moreItems = computed<MenuItem[]>(() => {\n  const allMoreItems: MenuItem[] = [\n    {\n      key: 'desktop-guide',\n      type: 'item',\n      label: t('helpCenter.desktopUserGuide'),\n      visible: isElectron(),\n      action: () => {\n        openExternalLink(EXTERNAL_LINKS.DESKTOP_GUIDE)\n        emit('close')\n      }\n    },\n    {\n      key: 'dev-tools',\n      type: 'item',\n      label: t('helpCenter.openDevTools'),\n      visible: isElectron(),\n      action: () => {\n        openDevTools()\n        emit('close')\n      }\n    },\n    {\n      key: 'divider-1',\n      type: 'divider',\n      visible: isElectron()\n    },\n    {\n      key: 'reinstall',\n      type: 'item',\n      label: t('helpCenter.reinstall'),\n      visible: isElectron(),\n      action: () => {\n        onReinstall()\n        emit('close')\n      }\n    }\n  ]\n\n  // Filter for visible items only\n  return allMoreItems.filter((item) => item.visible !== false)\n})\n\nconst hasVisibleMoreItems = computed(() => {\n  return !!moreItems.value.length\n})\n\nconst moreMenuItem = computed(() =>\n  menuItems.value.find((item) => item.key === 'more')\n)\n\nconst menuItems = computed<MenuItem[]>(() => {\n  return [\n    {\n      key: 'docs',\n      type: 'item',\n      icon: 'pi pi-book',\n      label: t('helpCenter.docs'),\n      action: () => {\n        openExternalLink(EXTERNAL_LINKS.DOCS)\n        emit('close')\n      }\n    },\n    {\n      key: 'discord',\n      type: 'item',\n      icon: 'pi pi-discord',\n      label: 'Discord',\n      action: () => {\n        openExternalLink(EXTERNAL_LINKS.DISCORD)\n        emit('close')\n      }\n    },\n    {\n      key: 'github',\n      type: 'item',\n      icon: 'pi pi-github',\n      label: t('helpCenter.github'),\n      action: () => {\n        openExternalLink(EXTERNAL_LINKS.GITHUB)\n        emit('close')\n      }\n    },\n    {\n      key: 'help',\n      type: 'item',\n      icon: 'pi pi-question-circle',\n      label: t('helpCenter.helpFeedback'),\n      action: () => {\n        void commandStore.execute('Comfy.Feedback')\n        emit('close')\n      }\n    },\n    {\n      key: 'more',\n      type: 'item',\n      icon: '',\n      label: t('helpCenter.more'),\n      visible: hasVisibleMoreItems.value,\n      action: () => {}, // No action for more item\n      items: moreItems.value\n    }\n  ]\n})\n\n// Utility Functions\nconst openExternalLink = (url: string): void => {\n  window.open(url, '_blank', 'noopener,noreferrer')\n}\n\nconst clearHoverTimeout = (): void => {\n  if (hoverTimeout) {\n    clearTimeout(hoverTimeout)\n    hoverTimeout = null\n  }\n}\n\nconst calculateSubmenuPosition = (button: HTMLElement): CSSProperties => {\n  const rect = button.getBoundingClientRect()\n  const submenuWidth = 210 // Width defined in CSS\n\n  // Get actual submenu height if available, otherwise estimate based on visible item count\n  const visibleItemCount =\n    moreMenuItem.value?.items?.filter((item) => item.visible !== false)\n      .length || 0\n  const estimatedHeight = visibleItemCount * 48 + 16 // ~48px per item + padding\n  const submenuHeight = submenuRef.value?.offsetHeight || estimatedHeight\n\n  // Get viewport dimensions\n  const viewportWidth = window.innerWidth\n  const viewportHeight = window.innerHeight\n\n  // Calculate basic position (aligned with button)\n  let top = rect.top\n  let left = rect.right + SUBMENU_CONFIG.OFFSET_PX\n\n  // Check if submenu would overflow viewport on the right\n  if (left + submenuWidth > viewportWidth) {\n    // Position submenu to the left of the button instead\n    left = rect.left - submenuWidth - SUBMENU_CONFIG.OFFSET_PX\n  }\n\n  // Check if submenu would overflow viewport at the bottom\n  if (top + submenuHeight > viewportHeight) {\n    // Position submenu above the button, aligned to bottom\n    top = Math.max(\n      SUBMENU_CONFIG.OFFSET_PX, // Minimum distance from top of viewport\n      rect.bottom - submenuHeight\n    )\n  }\n\n  // Ensure submenu doesn't go above viewport\n  if (top < SUBMENU_CONFIG.OFFSET_PX) {\n    top = SUBMENU_CONFIG.OFFSET_PX\n  }\n\n  top -= 8\n\n  return {\n    position: 'fixed',\n    top: `${top}px`,\n    left: `${left}px`,\n    zIndex: SUBMENU_CONFIG.Z_INDEX\n  }\n}\n\nconst formatReleaseDate = (dateString?: string): string => {\n  if (!dateString) return 'date'\n\n  const date = new Date(dateString)\n  const now = new Date()\n  const diffTime = Math.abs(now.getTime() - date.getTime())\n\n  const timeUnits = [\n    { unit: TIME_UNITS.YEAR, suffix: 'y' },\n    { unit: TIME_UNITS.MONTH, suffix: 'mo' },\n    { unit: TIME_UNITS.WEEK, suffix: 'w' },\n    { unit: TIME_UNITS.DAY, suffix: 'd' },\n    { unit: TIME_UNITS.HOUR, suffix: 'h' },\n    { unit: TIME_UNITS.MINUTE, suffix: 'min' }\n  ]\n\n  for (const { unit, suffix } of timeUnits) {\n    const value = Math.floor(diffTime / unit)\n    if (value > 0) {\n      return `${value}${suffix} ago`\n    }\n  }\n\n  return 'now'\n}\n\nconst shouldShowUpdateButton = (release: ReleaseNote): boolean => {\n  return (\n    releaseStore.shouldShowUpdateButton &&\n    release === releaseStore.recentReleases[0]\n  )\n}\n\n// Event Handlers\nconst onMenuItemHover = async (\n  key: string,\n  event: MouseEvent\n): Promise<void> => {\n  if (key !== 'more' || !moreMenuItem.value?.items) return\n\n  // Don't show submenu if all items are hidden\n  const hasVisibleItems = moreMenuItem.value.items.some(\n    (item) => item.visible !== false\n  )\n  if (!hasVisibleItems) return\n\n  clearHoverTimeout()\n\n  const moreButton = event.currentTarget as HTMLElement\n\n  // Calculate initial position before showing submenu\n  submenuStyle.value = calculateSubmenuPosition(moreButton)\n\n  // Show submenu with correct position\n  isSubmenuVisible.value = true\n\n  // After submenu is rendered, refine position if needed\n  await nextTick()\n  if (submenuRef.value) {\n    submenuStyle.value = calculateSubmenuPosition(moreButton)\n  }\n}\n\nconst onMenuItemLeave = (key: string): void => {\n  if (key !== 'more') return\n\n  hoverTimeout = window.setTimeout(() => {\n    isSubmenuVisible.value = false\n  }, SUBMENU_CONFIG.DELAY_MS)\n}\n\nconst onSubmenuHover = (): void => {\n  clearHoverTimeout()\n}\n\nconst onSubmenuLeave = (): void => {\n  isSubmenuVisible.value = false\n}\n\nconst openDevTools = (): void => {\n  if (isElectron()) {\n    electronAPI().openDevTools()\n  }\n}\n\nconst onReinstall = (): void => {\n  if (isElectron()) {\n    void electronAPI().reinstall()\n  }\n}\n\nconst onReleaseClick = (release: ReleaseNote): void => {\n  void releaseStore.handleShowChangelog(release.version)\n  const versionAnchor = formatVersionAnchor(release.version)\n  const changelogUrl = `${getChangelogUrl()}#${versionAnchor}`\n  openExternalLink(changelogUrl)\n  emit('close')\n}\n\nconst onUpdate = (_: ReleaseNote): void => {\n  openExternalLink(EXTERNAL_LINKS.UPDATE_GUIDE)\n  emit('close')\n}\n\n// Generate language-aware changelog URL\nconst getChangelogUrl = (): string => {\n  const isChineseLocale = locale.value === 'zh'\n  return isChineseLocale\n    ? 'https://docs.comfy.org/zh-CN/changelog'\n    : 'https://docs.comfy.org/changelog'\n}\n\n// Lifecycle\nonMounted(async () => {\n  if (!hasReleases.value) {\n    await releaseStore.fetchReleases()\n  }\n})\n</script>\n\n<style scoped>\n.help-center-menu {\n  width: 380px;\n  max-height: 500px;\n  overflow-y: auto;\n  background: var(--p-content-background);\n  border-radius: 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);\n  border: 1px solid var(--p-content-border-color);\n  backdrop-filter: blur(8px);\n  position: relative;\n}\n\n.help-menu-section {\n  padding: 0.5rem 0;\n  border-bottom: 1px solid var(--p-content-border-color);\n}\n\n.help-menu-item {\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  font-size: 0.9rem;\n  color: inherit;\n  text-align: left;\n}\n\n.help-menu-item:hover {\n  background-color: #007aff26;\n}\n\n.help-menu-item:focus,\n.help-menu-item:focus-visible {\n  outline: none;\n  box-shadow: none;\n}\n\n.help-menu-icon {\n  margin-right: 0.75rem;\n  font-size: 1rem;\n  color: var(--p-text-muted-color);\n  width: 16px;\n  display: flex;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.menu-label {\n  flex: 1;\n}\n\n.more-item {\n  justify-content: space-between;\n}\n\n.whats-new-section {\n  padding: 0.5rem 0;\n}\n\n.section-description {\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: var(--p-text-muted-color);\n  margin: 0 0 0.5rem 0;\n  padding: 0 1rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.release-menu-item {\n  position: relative;\n}\n\n.release-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  min-width: 0;\n}\n\n.release-title {\n  font-size: 0.9rem;\n  line-height: 1.2;\n  font-weight: 500;\n}\n\n.release-date {\n  height: 16px;\n  font-size: 0.75rem;\n  color: var(--p-text-muted-color);\n}\n\n.release-date .hover-state {\n  display: none;\n}\n\n.release-menu-item:hover .release-date .normal-state,\n.release-menu-item:focus-within .release-date .normal-state {\n  display: none;\n}\n\n.release-menu-item:hover .release-date .hover-state,\n.release-menu-item:focus-within .release-date .hover-state {\n  display: inline;\n}\n\n.update-button {\n  margin-left: 0.5rem;\n  font-size: 0.8rem;\n  padding: 0.25rem 0.75rem;\n  flex-shrink: 0;\n}\n\n/* Submenu Styles */\n.more-submenu {\n  width: 210px;\n  padding: 0.5rem 0;\n  background: var(--p-content-background);\n  border-radius: 12px;\n  border: 1px solid var(--p-content-border-color);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n  transition: opacity 0.15s ease-out;\n}\n\n.submenu-item {\n  padding: 0.75rem 1rem;\n  color: inherit;\n  font-size: 0.9rem;\n  font-weight: inherit;\n  line-height: inherit;\n}\n\n.submenu-item:hover {\n  background-color: #007aff26;\n}\n\n.submenu-item:focus,\n.submenu-item:focus-visible {\n  outline: none;\n  box-shadow: none;\n}\n\n.submenu-divider {\n  height: 1px;\n  background: #3e3e3e;\n  margin: 0.5rem 0;\n}\n\n/* Scrollbar Styling */\n.help-center-menu::-webkit-scrollbar {\n  width: 6px;\n}\n\n.help-center-menu::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.help-center-menu::-webkit-scrollbar-thumb {\n  background: var(--p-content-border-color);\n  border-radius: 3px;\n}\n\n.help-center-menu::-webkit-scrollbar-thumb:hover {\n  background: var(--p-text-muted-color);\n}\n\n/* Reduced Motion */\n@media (prefers-reduced-motion: reduce) {\n  .help-menu-item {\n    transition: none;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"shouldShow\" class=\"release-toast-popup\">\n    <div class=\"release-notification-toast\">\n      <!-- Header section with icon and text -->\n      <div class=\"toast-header\">\n        <div class=\"toast-icon\">\n          <i class=\"pi pi-download\" />\n        </div>\n        <div class=\"toast-text\">\n          <div class=\"toast-title\">\n            {{ $t('releaseToast.newVersionAvailable') }}\n          </div>\n          <div class=\"toast-version-badge\">\n            {{ latestRelease?.version }}\n          </div>\n        </div>\n      </div>\n\n      <!-- Actions section -->\n      <div class=\"toast-actions-section\">\n        <div class=\"actions-row\">\n          <div class=\"left-actions\">\n            <a\n              class=\"learn-more-link\"\n              :href=\"changelogUrl\"\n              target=\"_blank\"\n              rel=\"noopener,noreferrer\"\n              @click=\"handleLearnMore\"\n            >\n              {{ $t('releaseToast.whatsNew') }}\n            </a>\n          </div>\n          <div class=\"right-actions\">\n            <button class=\"skip-button\" @click=\"handleSkip\">\n              {{ $t('releaseToast.skip') }}\n            </button>\n            <button class=\"cta-button\" @click=\"handleUpdate\">\n              {{ $t('releaseToast.update') }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, onMounted, ref, watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport type { ReleaseNote } from '@/services/releaseService'\nimport { useReleaseStore } from '@/stores/releaseStore'\nimport { formatVersionAnchor } from '@/utils/formatUtil'\n\nconst { locale } = useI18n()\nconst releaseStore = useReleaseStore()\n\n// Local state for dismissed status\nconst isDismissed = ref(false)\n\n// Get latest release from store\nconst latestRelease = computed<ReleaseNote | null>(\n  () => releaseStore.recentRelease\n)\n\n// Show toast when new version available and not dismissed\nconst shouldShow = computed(\n  () => releaseStore.shouldShowToast && !isDismissed.value\n)\n\n// Generate changelog URL with version anchor (language-aware)\nconst changelogUrl = computed(() => {\n  const isChineseLocale = locale.value === 'zh'\n  const baseUrl = isChineseLocale\n    ? 'https://docs.comfy.org/zh-CN/changelog'\n    : 'https://docs.comfy.org/changelog'\n\n  if (latestRelease.value?.version) {\n    const versionAnchor = formatVersionAnchor(latestRelease.value.version)\n    return `${baseUrl}#${versionAnchor}`\n  }\n  return baseUrl\n})\n\n// Auto-hide timer\nlet hideTimer: ReturnType<typeof setTimeout> | null = null\n\nconst startAutoHide = () => {\n  if (hideTimer) clearTimeout(hideTimer)\n  hideTimer = setTimeout(() => {\n    dismissToast()\n  }, 8000) // 8 second auto-hide\n}\n\nconst clearAutoHide = () => {\n  if (hideTimer) {\n    clearTimeout(hideTimer)\n    hideTimer = null\n  }\n}\n\nconst dismissToast = () => {\n  isDismissed.value = true\n  clearAutoHide()\n}\n\nconst handleSkip = () => {\n  if (latestRelease.value) {\n    void releaseStore.handleSkipRelease(latestRelease.value.version)\n  }\n  dismissToast()\n}\n\nconst handleLearnMore = () => {\n  if (latestRelease.value) {\n    void releaseStore.handleShowChangelog(latestRelease.value.version)\n  }\n  // Do not dismiss; anchor will navigate in new tab but keep toast? spec maybe wants dismiss? We'll dismiss.\n  dismissToast()\n}\n\nconst handleUpdate = () => {\n  window.open('https://docs.comfy.org/installation/update_comfyui', '_blank')\n  dismissToast()\n}\n\n// Learn more handled by anchor href\n\n// Start auto-hide when toast becomes visible\nwatch(shouldShow, (isVisible) => {\n  if (isVisible) {\n    startAutoHide()\n  } else {\n    clearAutoHide()\n  }\n})\n\n// Initialize on mount\nonMounted(async () => {\n  // Fetch releases if not already loaded\n  if (!releaseStore.releases.length) {\n    await releaseStore.fetchReleases()\n  }\n})\n</script>\n\n<style scoped>\n/* Toast popup - positioning handled by parent */\n.release-toast-popup {\n  position: absolute;\n  bottom: 1rem;\n  z-index: 1000;\n  pointer-events: auto;\n}\n\n/* Sidebar positioning classes applied by parent - matching help center */\n.release-toast-popup.sidebar-left {\n  left: 1rem;\n}\n\n.release-toast-popup.sidebar-left.small-sidebar {\n  left: 1rem;\n}\n\n.release-toast-popup.sidebar-right {\n  right: 1rem;\n}\n\n/* Main toast container */\n.release-notification-toast {\n  width: 448px;\n  padding: 16px 16px 8px;\n  background: #353535;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  border-radius: 12px;\n  outline: 1px solid #4e4e4e;\n  outline-offset: -1px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n/* Header section */\n.toast-header {\n  display: flex;\n  gap: 16px;\n  align-items: flex-start;\n}\n\n/* Icon container */\n.toast-icon {\n  width: 42px;\n  height: 42px;\n  padding: 10px;\n  background: rgba(0, 122, 255, 0.2);\n  border-radius: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.toast-icon i {\n  color: #007aff;\n  font-size: 16px;\n}\n\n/* Text content */\n.toast-text {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  gap: 4px;\n}\n\n.toast-title {\n  color: white;\n  font-size: 14px;\n  font-family: 'Satoshi', sans-serif;\n  font-weight: 500;\n  line-height: 18.2px;\n}\n\n.toast-version-badge {\n  color: #a0a1a2;\n  font-size: 12px;\n  font-family: 'Satoshi', sans-serif;\n  font-weight: 500;\n  line-height: 15.6px;\n}\n\n/* Actions section */\n.toast-actions-section {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.actions-row {\n  padding-left: 58px; /* Align with text content */\n  padding-right: 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.left-actions {\n  display: flex;\n  align-items: center;\n}\n\n/* Learn more link - simple text link */\n.learn-more-link {\n  color: #60a5fa;\n  font-size: 12px;\n  font-family: 'Inter', sans-serif;\n  font-weight: 500;\n  line-height: 15.6px;\n  text-decoration: none;\n}\n\n.learn-more-link:hover {\n  text-decoration: underline;\n}\n\n.right-actions {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n/* Button styles */\n.skip-button {\n  padding: 8px 16px;\n  background: #353535;\n  border-radius: 6px;\n  outline: 1px solid #4e4e4e;\n  outline-offset: -1px;\n  border: none;\n  color: #aeaeb2;\n  font-size: 12px;\n  font-family: 'Inter', sans-serif;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.skip-button:hover {\n  background: #404040;\n}\n\n.cta-button {\n  padding: 8px 16px;\n  background: white;\n  border-radius: 6px;\n  outline: 1px solid #4e4e4e;\n  outline-offset: -1px;\n  border: none;\n  color: black;\n  font-size: 12px;\n  font-family: 'Inter', sans-serif;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.cta-button:hover {\n  background: #f0f0f0;\n}\n</style>\n","<template>\n  <div v-if=\"shouldShow\" class=\"whats-new-popup-container\">\n    <!-- Arrow pointing to help center -->\n    <div class=\"help-center-arrow\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"16\"\n        height=\"19\"\n        viewBox=\"0 0 16 19\"\n        fill=\"none\"\n      >\n        <!-- Arrow fill -->\n        <path\n          d=\"M15.25 1.27246L15.25 17.7275L0.999023 9.5L15.25 1.27246Z\"\n          fill=\"#353535\"\n        />\n        <!-- Top and bottom outlines only -->\n        <path\n          d=\"M15.25 1.27246L0.999023 9.5\"\n          stroke=\"#4e4e4e\"\n          stroke-width=\"1\"\n          fill=\"none\"\n        />\n        <path\n          d=\"M0.999023 9.5L15.25 17.7275\"\n          stroke=\"#4e4e4e\"\n          stroke-width=\"1\"\n          fill=\"none\"\n        />\n      </svg>\n    </div>\n\n    <div class=\"whats-new-popup\" @click.stop>\n      <!-- Close Button -->\n      <button\n        class=\"close-button\"\n        :aria-label=\"$t('g.close')\"\n        @click=\"closePopup\"\n      >\n        <div class=\"close-icon\"></div>\n      </button>\n\n      <!-- Release Content -->\n      <div class=\"popup-content\">\n        <div class=\"content-text\" v-html=\"formattedContent\"></div>\n\n        <!-- Actions Section -->\n        <div class=\"popup-actions\">\n          <a\n            class=\"learn-more-link\"\n            :href=\"changelogUrl\"\n            target=\"_blank\"\n            rel=\"noopener,noreferrer\"\n            @click=\"closePopup\"\n          >\n            {{ $t('whatsNewPopup.learnMore') }}\n          </a>\n          <!-- TODO: CTA button -->\n          <!-- <button class=\"cta-button\" @click=\"handleCTA\">CTA</button> -->\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { marked } from 'marked'\nimport { computed, onMounted, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport type { ReleaseNote } from '@/services/releaseService'\nimport { useReleaseStore } from '@/stores/releaseStore'\nimport { formatVersionAnchor } from '@/utils/formatUtil'\n\nconst { locale, t } = useI18n()\nconst releaseStore = useReleaseStore()\n\n// Local state for dismissed status\nconst isDismissed = ref(false)\n\n// Get latest release from store\nconst latestRelease = computed<ReleaseNote | null>(\n  () => releaseStore.recentRelease\n)\n\n// Show popup when on latest version and not dismissed\nconst shouldShow = computed(\n  () => releaseStore.shouldShowPopup && !isDismissed.value\n)\n\n// Generate changelog URL with version anchor (language-aware)\nconst changelogUrl = computed(() => {\n  const isChineseLocale = locale.value === 'zh'\n  const baseUrl = isChineseLocale\n    ? 'https://docs.comfy.org/zh-CN/changelog'\n    : 'https://docs.comfy.org/changelog'\n\n  if (latestRelease.value?.version) {\n    const versionAnchor = formatVersionAnchor(latestRelease.value.version)\n    return `${baseUrl}#${versionAnchor}`\n  }\n  return baseUrl\n})\n\n// Format release content for display using marked\nconst formattedContent = computed(() => {\n  if (!latestRelease.value?.content) {\n    return `<p>${t('whatsNewPopup.noReleaseNotes')}</p>`\n  }\n\n  try {\n    // Use marked to parse markdown to HTML\n    return marked(latestRelease.value.content, {\n      gfm: true // Enable GitHub Flavored Markdown\n    })\n  } catch (error) {\n    console.error('Error parsing markdown:', error)\n    // Fallback to plain text with line breaks\n    return latestRelease.value.content.replace(/\\n/g, '<br>')\n  }\n})\n\nconst show = () => {\n  isDismissed.value = false\n}\n\nconst hide = () => {\n  isDismissed.value = true\n}\n\nconst closePopup = async () => {\n  // Mark \"what's new\" seen when popup is closed\n  if (latestRelease.value) {\n    await releaseStore.handleWhatsNewSeen(latestRelease.value.version)\n  }\n  hide()\n}\n\n// Learn more handled by anchor href\n\n// const handleCTA = async () => {\n//   window.open('https://docs.comfy.org/installation/update_comfyui', '_blank')\n//   await closePopup()\n// }\n\n// Initialize on mount\nonMounted(async () => {\n  // Fetch releases if not already loaded\n  if (!releaseStore.releases.length) {\n    await releaseStore.fetchReleases()\n  }\n})\n\n// Expose methods for parent component\ndefineExpose({\n  show,\n  hide\n})\n</script>\n\n<style scoped>\n/* Popup container - positioning handled by parent */\n.whats-new-popup-container {\n  position: absolute;\n  bottom: 1rem;\n  z-index: 1000;\n  pointer-events: auto;\n}\n\n/* Arrow pointing to help center */\n.help-center-arrow {\n  position: absolute;\n  bottom: calc(\n    var(--sidebar-width, 4rem) + 0.25rem\n  ); /* Position toward center of help center icon */\n  transform: none;\n  z-index: 999;\n  pointer-events: none;\n}\n\n/* Position arrow based on sidebar location */\n.whats-new-popup-container.sidebar-left .help-center-arrow {\n  left: -14px; /* Overlap with popup outline */\n}\n\n.whats-new-popup-container.sidebar-left.small-sidebar .help-center-arrow {\n  left: -14px; /* Overlap with popup outline */\n  bottom: calc(2.5rem + 0.25rem); /* Adjust for small sidebar */\n}\n\n/* Sidebar positioning classes applied by parent */\n.whats-new-popup-container.sidebar-left {\n  left: 1rem;\n}\n\n.whats-new-popup-container.sidebar-left.small-sidebar {\n  left: 1rem;\n}\n\n.whats-new-popup-container.sidebar-right {\n  right: 1rem;\n}\n\n.whats-new-popup {\n  background: #353535;\n  border-radius: 12px;\n  max-width: 400px;\n  width: 400px;\n  outline: 1px solid #4e4e4e;\n  outline-offset: -1px;\n  box-shadow: 0px 8px 32px rgba(0, 0, 0, 0.3);\n  position: relative;\n}\n\n/* Content Section */\n.popup-content {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  max-height: 80vh;\n  overflow-y: auto;\n  padding: 32px 32px 24px;\n  border-radius: 12px;\n}\n\n/* Close button */\n.close-button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 32px;\n  height: 32px;\n  padding: 6px;\n  background: #7c7c7c;\n  border-radius: 16px;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transform: translate(30%, -30%);\n  transition:\n    background-color 0.2s ease,\n    transform 0.1s ease;\n  z-index: 1;\n}\n\n.close-button:hover {\n  background: #8e8e8e;\n}\n\n.close-button:active {\n  background: #6a6a6a;\n  transform: translate(30%, -30%) scale(0.95);\n}\n\n.close-icon {\n  width: 16px;\n  height: 16px;\n  position: relative;\n  opacity: 0.9;\n  transition: opacity 0.2s ease;\n}\n\n.close-button:hover .close-icon {\n  opacity: 1;\n}\n\n.close-icon::before,\n.close-icon::after {\n  content: '';\n  position: absolute;\n  width: 12px;\n  height: 2px;\n  background: white;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%) rotate(45deg);\n  transition: background-color 0.2s ease;\n}\n\n.close-icon::after {\n  transform: translate(-50%, -50%) rotate(-45deg);\n}\n\n/* Content Section */\n.popup-content {\n  display: flex;\n  flex-direction: column;\n}\n\n.content-text {\n  color: white;\n  font-size: 14px;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n\n/* Style the markdown content */\n/* Title */\n.content-text :deep(*) {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n.content-text :deep(h1) {\n  font-size: 16px;\n  font-weight: 700;\n  margin-bottom: 8px;\n}\n\n/* Version subtitle - targets the first p tag after h1 */\n.content-text :deep(h1 + p) {\n  color: #c0c0c0;\n  font-size: 16px;\n  font-weight: 500;\n  margin-bottom: 16px;\n  opacity: 0.8;\n}\n\n/* Regular paragraphs - short description */\n.content-text :deep(p) {\n  margin-bottom: 16px;\n  color: #e0e0e0;\n}\n\n/* List */\n.content-text :deep(ul),\n.content-text :deep(ol) {\n  margin-bottom: 16px;\n  padding-left: 0;\n  list-style: none;\n}\n\n.content-text :deep(ul:first-child),\n.content-text :deep(ol:first-child) {\n  margin-top: 0;\n}\n\n.content-text :deep(ul:last-child),\n.content-text :deep(ol:last-child) {\n  margin-bottom: 0;\n}\n\n/* List items */\n.content-text :deep(li) {\n  margin-bottom: 8px;\n  position: relative;\n  padding-left: 20px;\n}\n\n.content-text :deep(li:last-child) {\n  margin-bottom: 0;\n}\n\n/* Custom bullet points */\n.content-text :deep(li::before) {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 10px;\n  display: flex;\n  width: 8px;\n  height: 8px;\n  justify-content: center;\n  align-items: center;\n  aspect-ratio: 1/1;\n  border-radius: 100px;\n  background: #60a5fa;\n}\n\n/* List item strong text */\n.content-text :deep(li strong) {\n  color: #fff;\n  font-size: 14px;\n  display: block;\n  margin-bottom: 4px;\n}\n\n.content-text :deep(li p) {\n  font-size: 12px;\n  margin-bottom: 0;\n  line-height: 2;\n}\n\n/* Code styling */\n.content-text :deep(code) {\n  background-color: #2a2a2a;\n  border: 1px solid #4a4a4a;\n  border-radius: 4px;\n  padding: 2px 6px;\n  color: #f8f8f2;\n  white-space: nowrap;\n}\n\n/* Remove top margin for first media element */\n.content-text :deep(img:first-child),\n.content-text :deep(video:first-child),\n.content-text :deep(iframe:first-child) {\n  margin-top: -32px; /* Align with the top edge of the popup content */\n  margin-bottom: 24px;\n}\n\n/* Media elements */\n.content-text :deep(img),\n.content-text :deep(video),\n.content-text :deep(iframe) {\n  width: calc(100% + 64px);\n  height: auto;\n  margin: 24px -32px;\n  display: block;\n}\n\n/* Actions Section */\n.popup-actions {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 8px;\n}\n\n.learn-more-link {\n  color: #60a5fa;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 18.2px;\n  text-decoration: none;\n}\n\n.learn-more-link:hover {\n  text-decoration: underline;\n}\n\n.cta-button {\n  height: 40px;\n  padding: 0 20px;\n  background: white;\n  border-radius: 6px;\n  outline: 1px solid #4e4e4e;\n  outline-offset: -1px;\n  border: none;\n  color: #121212;\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n}\n\n.cta-button:hover {\n  background: #f0f0f0;\n}\n</style>\n","<template>\n  <div>\n    <SidebarIcon\n      icon=\"pi pi-question-circle\"\n      class=\"comfy-help-center-btn\"\n      :tooltip=\"$t('sideToolbar.helpCenter')\"\n      :icon-badge=\"shouldShowRedDot ? '' : ''\"\n      @click=\"toggleHelpCenter\"\n    />\n\n    <!-- Help Center Popup positioned within canvas area -->\n    <Teleport to=\"#graph-canvas-container\">\n      <div\n        v-if=\"isHelpCenterVisible\"\n        class=\"help-center-popup\"\n        :class=\"{\n          'sidebar-left': sidebarLocation === 'left',\n          'sidebar-right': sidebarLocation === 'right',\n          'small-sidebar': sidebarSize === 'small'\n        }\"\n      >\n        <HelpCenterMenuContent @close=\"closeHelpCenter\" />\n      </div>\n    </Teleport>\n\n    <!-- Release Notification Toast positioned within canvas area -->\n    <Teleport to=\"#graph-canvas-container\">\n      <ReleaseNotificationToast\n        :class=\"{\n          'sidebar-left': sidebarLocation === 'left',\n          'sidebar-right': sidebarLocation === 'right',\n          'small-sidebar': sidebarSize === 'small'\n        }\"\n      />\n    </Teleport>\n\n    <!-- WhatsNew Popup positioned within canvas area -->\n    <Teleport to=\"#graph-canvas-container\">\n      <WhatsNewPopup\n        :class=\"{\n          'sidebar-left': sidebarLocation === 'left',\n          'sidebar-right': sidebarLocation === 'right',\n          'small-sidebar': sidebarSize === 'small'\n        }\"\n      />\n    </Teleport>\n\n    <!-- Backdrop to close popup when clicking outside -->\n    <Teleport to=\"body\">\n      <div\n        v-if=\"isHelpCenterVisible\"\n        class=\"help-center-backdrop\"\n        @click=\"closeHelpCenter\"\n      />\n    </Teleport>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport { computed, onMounted, ref } from 'vue'\n\nimport HelpCenterMenuContent from '@/components/helpcenter/HelpCenterMenuContent.vue'\nimport ReleaseNotificationToast from '@/components/helpcenter/ReleaseNotificationToast.vue'\nimport WhatsNewPopup from '@/components/helpcenter/WhatsNewPopup.vue'\nimport { useReleaseStore } from '@/stores/releaseStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\nimport SidebarIcon from './SidebarIcon.vue'\n\nconst settingStore = useSettingStore()\nconst releaseStore = useReleaseStore()\nconst { shouldShowRedDot } = storeToRefs(releaseStore)\nconst isHelpCenterVisible = ref(false)\n\nconst sidebarLocation = computed(() =>\n  settingStore.get('Comfy.Sidebar.Location')\n)\n\nconst sidebarSize = computed(() => settingStore.get('Comfy.Sidebar.Size'))\n\nconst toggleHelpCenter = () => {\n  isHelpCenterVisible.value = !isHelpCenterVisible.value\n}\n\nconst closeHelpCenter = () => {\n  isHelpCenterVisible.value = false\n}\n\n// Initialize release store on mount\nonMounted(async () => {\n  // Initialize release store to fetch releases for toast and popup\n  await releaseStore.initialize()\n})\n</script>\n\n<style scoped>\n.help-center-backdrop {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 9999;\n  background: transparent;\n}\n\n.help-center-popup {\n  position: absolute;\n  bottom: 1rem;\n  z-index: 10000;\n  animation: slideInUp 0.2s ease-out;\n  pointer-events: auto;\n}\n\n.help-center-popup.sidebar-left {\n  left: 1rem;\n}\n\n.help-center-popup.sidebar-left.small-sidebar {\n  left: 1rem;\n}\n\n.help-center-popup.sidebar-right {\n  right: 1rem;\n}\n\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n:deep(.p-badge) {\n  background: #ff3b30;\n  color: #ff3b30;\n  min-width: 8px;\n  height: 8px;\n  padding: 0;\n  border-radius: 9999px;\n  font-size: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n  border: none;\n  outline: none;\n  box-shadow: none;\n}\n\n:deep(.p-badge.p-badge-dot) {\n  width: 8px !important;\n}\n</style>\n","<template>\n  <SidebarIcon icon=\"pi pi-sign-out\" :tooltip=\"tooltip\" @click=\"logout\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useUserStore } from '@/stores/userStore'\n\nimport SidebarIcon from './SidebarIcon.vue'\n\nconst { t } = useI18n()\nconst userStore = useUserStore()\n\nconst tooltip = computed(\n  () => `${t('sideToolbar.logout')} (${userStore.currentUser?.username})`\n)\nconst logout = async () => {\n  await userStore.logout()\n  window.location.reload()\n}\n</script>\n","<template>\n  <teleport :to=\"teleportTarget\">\n    <nav class=\"side-tool-bar-container\" :class=\"{ 'small-sidebar': isSmall }\">\n      <SidebarIcon\n        v-for=\"tab in tabs\"\n        :key=\"tab.id\"\n        :icon=\"tab.icon\"\n        :icon-badge=\"tab.iconBadge\"\n        :tooltip=\"tab.tooltip\"\n        :tooltip-suffix=\"getTabTooltipSuffix(tab)\"\n        :selected=\"tab.id === selectedTab?.id\"\n        :class=\"tab.id + '-tab-button'\"\n        @click=\"onTabClick(tab)\"\n      />\n      <div class=\"side-tool-bar-end\">\n        <SidebarLogoutIcon v-if=\"userStore.isMultiUserServer\" />\n        <SidebarHelpCenterIcon />\n        <SidebarBottomPanelToggleButton />\n        <SidebarShortcutsToggleButton />\n      </div>\n    </nav>\n  </teleport>\n  <div\n    v-if=\"selectedTab\"\n    class=\"sidebar-content-container h-full overflow-y-auto overflow-x-hidden\"\n  >\n    <ExtensionSlot :extension=\"selectedTab\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nimport ExtensionSlot from '@/components/common/ExtensionSlot.vue'\nimport SidebarBottomPanelToggleButton from '@/components/sidebar/SidebarBottomPanelToggleButton.vue'\nimport SidebarShortcutsToggleButton from '@/components/sidebar/SidebarShortcutsToggleButton.vue'\nimport { useKeybindingStore } from '@/stores/keybindingStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useUserStore } from '@/stores/userStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport type { SidebarTabExtension } from '@/types/extensionTypes'\n\nimport SidebarHelpCenterIcon from './SidebarHelpCenterIcon.vue'\nimport SidebarIcon from './SidebarIcon.vue'\nimport SidebarLogoutIcon from './SidebarLogoutIcon.vue'\n\nconst workspaceStore = useWorkspaceStore()\nconst settingStore = useSettingStore()\nconst userStore = useUserStore()\n\nconst teleportTarget = computed(() =>\n  settingStore.get('Comfy.Sidebar.Location') === 'left'\n    ? '.comfyui-body-left'\n    : '.comfyui-body-right'\n)\n\nconst isSmall = computed(\n  () => settingStore.get('Comfy.Sidebar.Size') === 'small'\n)\n\nconst tabs = computed(() => workspaceStore.getSidebarTabs())\nconst selectedTab = computed(() => workspaceStore.sidebarTab.activeSidebarTab)\nconst onTabClick = (item: SidebarTabExtension) => {\n  workspaceStore.sidebarTab.toggleSidebarTab(item.id)\n}\nconst keybindingStore = useKeybindingStore()\nconst getTabTooltipSuffix = (tab: SidebarTabExtension) => {\n  const keybinding = keybindingStore.getKeybindingByCommandId(\n    `Workspace.ToggleSidebarTab.${tab.id}`\n  )\n  return keybinding ? ` (${keybinding.combo.toString()})` : ''\n}\n</script>\n\n<style scoped>\n.side-tool-bar-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  width: var(--sidebar-width);\n  height: 100%;\n\n  background-color: var(--comfy-menu-secondary-bg);\n  color: var(--fg-color);\n  box-shadow: var(--bar-shadow);\n\n  --sidebar-width: 4rem;\n  --sidebar-icon-size: 1.5rem;\n}\n\n.side-tool-bar-container.small-sidebar {\n  --sidebar-width: 2.5rem;\n  --sidebar-icon-size: 1rem;\n}\n\n.side-tool-bar-end {\n  align-self: flex-end;\n  margin-top: auto;\n}\n</style>\n","<template>\n  <div\n    ref=\"positionRef\"\n    class=\"absolute left-1/2 -translate-x-1/2\"\n    :class=\"positions.positioner\"\n  ></div>\n  <Popover\n    ref=\"popoverRef\"\n    append-to=\"body\"\n    :pt=\"{\n      root: {\n        class: 'workflow-popover-fade fit-content ' + positions.root,\n        'data-popover-id': id,\n        style: {\n          transform: positions.active\n        }\n      }\n    }\"\n    @mouseenter=\"cancelHidePopover\"\n    @mouseleave=\"hidePopover\"\n  >\n    <div class=\"workflow-preview-content\">\n      <div\n        v-if=\"thumbnailUrl && !isActiveTab\"\n        class=\"workflow-preview-thumbnail relative\"\n      >\n        <img\n          :src=\"thumbnailUrl\"\n          class=\"block h-[200px] object-cover rounded-lg p-2\"\n          :style=\"{ width: `${POPOVER_WIDTH}px` }\"\n        />\n      </div>\n      <div class=\"workflow-preview-footer\">\n        <span class=\"workflow-preview-name\">{{ workflowFilename }}</span>\n      </div>\n    </div>\n  </Popover>\n</template>\n\n<script setup lang=\"ts\">\nimport Popover from 'primevue/popover'\nimport { computed, nextTick, ref, toRefs, useId } from 'vue'\n\nimport { useSettingStore } from '@/stores/settingStore'\n\nconst POPOVER_WIDTH = 250\n\ninterface Props {\n  workflowFilename: string\n  thumbnailUrl?: string\n  isActiveTab: boolean\n}\n\nconst props = defineProps<Props>()\nconst { thumbnailUrl, isActiveTab } = toRefs(props)\n\nconst settingStore = useSettingStore()\nconst positions = computed<{\n  positioner: string\n  root?: string\n  active?: string\n}>(() => {\n  if (\n    settingStore.get('Comfy.Workflow.WorkflowTabsPosition') === 'Topbar' &&\n    settingStore.get('Comfy.UseNewMenu') === 'Bottom'\n  ) {\n    return {\n      positioner: 'top-0',\n      root: 'p-popover-flipped',\n      active: isActiveTab.value ? 'translateY(-100%)' : undefined\n    }\n  }\n\n  return {\n    positioner: 'bottom-0'\n  }\n})\n\nconst popoverRef = ref<InstanceType<typeof Popover> | null>(null)\nconst positionRef = ref<HTMLElement | null>(null)\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null\nlet showTimeout: ReturnType<typeof setTimeout> | null = null\nconst id = useId()\n\nconst showPopover = (event: Event) => {\n  // Clear any existing timeouts\n  if (hideTimeout) {\n    clearTimeout(hideTimeout)\n    hideTimeout = null\n  }\n  if (showTimeout) {\n    clearTimeout(showTimeout)\n    showTimeout = null\n  }\n\n  // Show popover after a short delay\n  showTimeout = setTimeout(async () => {\n    if (popoverRef.value && positionRef.value) {\n      popoverRef.value.show(event, positionRef.value)\n      await nextTick()\n      // PrimeVue has a bug where when the tabs are scrolled, it positions the element incorrectly\n      // Manually set the position to the middle of the tab and prevent it from going off the left/right edge\n      const el = document.querySelector(\n        `.workflow-popover-fade[data-popover-id=\"${id}\"]`\n      ) as HTMLElement\n      if (el) {\n        const middle = positionRef.value!.getBoundingClientRect().left\n        const popoverWidth = el.getBoundingClientRect().width\n        const halfWidth = popoverWidth / 2\n        let pos = middle - halfWidth\n        let shift = 0\n\n        // Calculate shift when clamping is needed\n        if (pos < 0) {\n          shift = pos - 8 // Negative shift to move arrow left\n          pos = 8\n        } else if (pos + popoverWidth > window.innerWidth) {\n          const newPos = window.innerWidth - popoverWidth - 16\n          shift = pos - newPos // Positive shift to move arrow right\n          pos = newPos\n        }\n\n        if (shift + halfWidth < 0) {\n          shift = -halfWidth + 24\n        }\n\n        el.style.left = `${pos}px`\n        el.style.setProperty('--shift', `${shift}px`)\n      }\n    }\n  }, 200) // 200ms delay before showing\n}\n\nconst cancelHidePopover = () => {\n  // Temporarily disable this functionality until we need the popover to be interactive:\n  /*\n  if (hideTimeout) {\n    clearTimeout(hideTimeout)\n    hideTimeout = null\n  }\n  */\n}\n\nconst hidePopover = () => {\n  // Clear show timeout if mouse leaves before popover appears\n  if (showTimeout) {\n    clearTimeout(showTimeout)\n    showTimeout = null\n  }\n\n  hideTimeout = setTimeout(() => {\n    if (popoverRef.value) {\n      popoverRef.value.hide()\n    }\n  }, 100) // Minimal delay to allow moving to popover\n}\n\nconst togglePopover = (event: Event) => {\n  if (popoverRef.value) {\n    popoverRef.value.toggle(event)\n  }\n}\n\ndefineExpose({\n  showPopover,\n  hidePopover,\n  togglePopover\n})\n</script>\n\n<style scoped>\n.workflow-preview-content {\n  @apply flex flex-col rounded-xl overflow-hidden;\n  max-width: var(--popover-width);\n  background-color: var(--comfy-menu-secondary-bg);\n  color: var(--fg-color);\n}\n\n.workflow-preview-thumbnail {\n  @apply relative p-2;\n}\n\n.workflow-preview-thumbnail img {\n  @apply shadow-md;\n  background-color: color-mix(\n    in srgb,\n    var(--comfy-menu-secondary-bg) 70%,\n    black\n  );\n}\n\n.dark-theme .workflow-preview-thumbnail img {\n  @apply shadow-lg;\n}\n\n.workflow-preview-footer {\n  @apply pt-1 pb-2 px-3;\n}\n\n.workflow-preview-name {\n  @apply block text-sm font-medium overflow-hidden text-ellipsis whitespace-nowrap;\n  color: var(--fg-color);\n}\n</style>\n\n<style>\n.workflow-popover-fade {\n  --p-popover-background: transparent;\n  --p-popover-content-padding: 0;\n  @apply bg-transparent rounded-xl shadow-lg;\n  transition: opacity 0.15s ease-out !important;\n}\n\n.workflow-popover-fade.p-popover-flipped {\n  @apply -translate-y-full;\n}\n\n.dark-theme .workflow-popover-fade {\n  @apply shadow-2xl;\n}\n\n.workflow-popover-fade.p-popover:after,\n.workflow-popover-fade.p-popover:before {\n  --p-popover-border-color: var(--comfy-menu-secondary-bg);\n  left: 50%;\n  transform: translateX(calc(-50% + var(--shift)));\n  margin-left: 0;\n}\n</style>\n","<template>\n  <div\n    ref=\"workflowTabRef\"\n    class=\"flex p-2 gap-2 workflow-tab\"\n    v-bind=\"$attrs\"\n    @mouseenter=\"handleMouseEnter\"\n    @mouseleave=\"handleMouseLeave\"\n    @click=\"handleClick\"\n  >\n    <span class=\"workflow-label text-sm max-w-[150px] truncate inline-block\">\n      {{ workflowOption.workflow.filename }}\n    </span>\n    <div class=\"relative\">\n      <span v-if=\"shouldShowStatusIndicator\" class=\"status-indicator\"></span>\n      <Button\n        class=\"close-button p-0 w-auto\"\n        icon=\"pi pi-times\"\n        text\n        severity=\"secondary\"\n        size=\"small\"\n        @click.stop=\"onCloseWorkflow(workflowOption)\"\n      />\n    </div>\n  </div>\n\n  <WorkflowTabPopover\n    ref=\"popoverRef\"\n    :workflow-filename=\"workflowOption.workflow.filename\"\n    :thumbnail-url=\"thumbnailUrl\"\n    :is-active-tab=\"isActiveTab\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport { computed, onUnmounted, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport {\n  usePragmaticDraggable,\n  usePragmaticDroppable\n} from '@/composables/usePragmaticDragAndDrop'\nimport { useWorkflowThumbnail } from '@/composables/useWorkflowThumbnail'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { ComfyWorkflow } from '@/stores/workflowStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\n\nimport WorkflowTabPopover from './WorkflowTabPopover.vue'\n\ninterface WorkflowOption {\n  value: string\n  workflow: ComfyWorkflow\n}\n\nconst props = defineProps<{\n  class?: string\n  workflowOption: WorkflowOption\n}>()\n\nconst { t } = useI18n()\n\nconst workspaceStore = useWorkspaceStore()\nconst workflowStore = useWorkflowStore()\nconst settingStore = useSettingStore()\nconst workflowTabRef = ref<HTMLElement | null>(null)\nconst popoverRef = ref<InstanceType<typeof WorkflowTabPopover> | null>(null)\nconst workflowThumbnail = useWorkflowThumbnail()\n\n// Use computed refs to cache autosave settings\nconst autoSaveSetting = computed(() =>\n  settingStore.get('Comfy.Workflow.AutoSave')\n)\nconst autoSaveDelay = computed(() =>\n  settingStore.get('Comfy.Workflow.AutoSaveDelay')\n)\n\nconst shouldShowStatusIndicator = computed(() => {\n  if (workspaceStore.shiftDown) {\n    // Branch 1: Shift key is held down, do not show the status indicator.\n    return false\n  }\n  if (!props.workflowOption.workflow.isPersisted) {\n    // Branch 2: Workflow is not persisted, show the status indicator.\n    return true\n  }\n  if (props.workflowOption.workflow.isModified) {\n    // Branch 3: Workflow is modified.\n    if (autoSaveSetting.value === 'off') {\n      // Sub-branch 3a: Autosave is off, so show the status indicator.\n      return true\n    }\n    if (autoSaveSetting.value === 'after delay' && autoSaveDelay.value > 3000) {\n      // Sub-branch 3b: Autosave delay is too high, so show the status indicator.\n      return true\n    }\n    // Sub-branch 3c: Workflow is modified but no condition applies, do not show the status indicator.\n    return false\n  }\n  // Default: do not show the status indicator. This should not be reachable.\n  return false\n})\n\nconst isActiveTab = computed(() => {\n  return workflowStore.activeWorkflow?.key === props.workflowOption.workflow.key\n})\n\nconst thumbnailUrl = computed(() => {\n  return workflowThumbnail.getThumbnail(props.workflowOption.workflow.key)\n})\n\n// Event handlers that delegate to the popover component\nconst handleMouseEnter = (event: Event) => {\n  popoverRef.value?.showPopover(event)\n}\n\nconst handleMouseLeave = () => {\n  popoverRef.value?.hidePopover()\n}\n\nconst handleClick = (event: Event) => {\n  popoverRef.value?.togglePopover(event)\n}\n\nconst closeWorkflows = async (options: WorkflowOption[]) => {\n  for (const opt of options) {\n    if (\n      !(await useWorkflowService().closeWorkflow(opt.workflow, {\n        warnIfUnsaved: !workspaceStore.shiftDown,\n        hint: t('sideToolbar.workflowTab.dirtyCloseHint')\n      }))\n    ) {\n      // User clicked cancel\n      break\n    }\n  }\n}\n\nconst onCloseWorkflow = async (option: WorkflowOption) => {\n  await closeWorkflows([option])\n}\nconst tabGetter = () => workflowTabRef.value as HTMLElement\n\nusePragmaticDraggable(tabGetter, {\n  getInitialData: () => {\n    return {\n      workflowKey: props.workflowOption.workflow.key\n    }\n  }\n})\n\nusePragmaticDroppable(tabGetter, {\n  getData: () => {\n    return {\n      workflowKey: props.workflowOption.workflow.key\n    }\n  },\n  onDrop: (e) => {\n    const fromIndex = workflowStore.openWorkflows.findIndex(\n      (wf) => wf.key === e.source.data.workflowKey\n    )\n    const toIndex = workflowStore.openWorkflows.findIndex(\n      (wf) => wf.key === e.location.current.dropTargets[0]?.data.workflowKey\n    )\n    if (fromIndex !== toIndex) {\n      workflowStore.reorderWorkflows(fromIndex, toIndex)\n    }\n  }\n})\n\nonUnmounted(() => {\n  popoverRef.value?.hidePopover()\n})\n</script>\n\n<style scoped>\n.status-indicator {\n  @apply absolute font-bold;\n  font-size: 1.5rem;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n</style>\n\n<style>\n.p-tooltip.workflow-tab-tooltip {\n  z-index: 1200 !important;\n}\n</style>\n","import { useMutationObserver, useResizeObserver } from '@vueuse/core'\nimport { debounce } from 'lodash'\nimport { readonly, ref } from 'vue'\n\n/**\n * Observes an element for overflow changes and optionally debounces the check\n * @param element - The element to observe\n * @param options - The options for the observer\n * @param options.debounceTime - The time to debounce the check in milliseconds\n * @param options.useMutationObserver - Whether to use a mutation observer to check for overflow\n * @param options.useResizeObserver - Whether to use a resize observer to check for overflow\n * @returns An object containing the isOverflowing state and the checkOverflow function to manually trigger\n */\nexport const useOverflowObserver = (\n  element: HTMLElement,\n  options?: {\n    debounceTime?: number\n    useMutationObserver?: boolean\n    useResizeObserver?: boolean\n    onCheck?: (isOverflowing: boolean) => void\n  }\n) => {\n  options = {\n    debounceTime: 25,\n    useMutationObserver: true,\n    useResizeObserver: true,\n    ...options\n  }\n\n  const isOverflowing = ref(false)\n  const disposeFns: (() => void)[] = []\n  const disposed = ref(false)\n\n  const checkOverflowFn = () => {\n    isOverflowing.value = element.scrollWidth > element.clientWidth\n    options.onCheck?.(isOverflowing.value)\n  }\n\n  const checkOverflow = options.debounceTime\n    ? debounce(checkOverflowFn, options.debounceTime)\n    : checkOverflowFn\n\n  if (options.useMutationObserver) {\n    disposeFns.push(\n      useMutationObserver(element, checkOverflow, {\n        subtree: true,\n        childList: true\n      }).stop\n    )\n  }\n  if (options.useResizeObserver) {\n    disposeFns.push(useResizeObserver(element, checkOverflow).stop)\n  }\n\n  return {\n    isOverflowing: readonly(isOverflowing),\n    disposed: readonly(disposed),\n    checkOverflow,\n    dispose: () => {\n      disposed.value = true\n      disposeFns.forEach((fn) => fn())\n    }\n  }\n}\n","import { useEventListener } from '@vueuse/core'\n\nexport const whileMouseDown = (\n  elementOrEvent: HTMLElement | Event,\n  callback: (iteration: number) => void,\n  interval: number = 30\n) => {\n  const element =\n    elementOrEvent instanceof HTMLElement\n      ? elementOrEvent\n      : (elementOrEvent.target as HTMLElement)\n\n  let iteration = 0\n\n  const intervalId = setInterval(() => {\n    callback(iteration++)\n  }, interval)\n\n  const dispose = useEventListener(element, 'mouseup', () => {\n    clearInterval(intervalId)\n    dispose()\n  })\n\n  return {\n    dispose\n  }\n}\n","<template>\n  <div\n    class=\"workflow-tabs-container flex flex-row max-w-full h-full flex-auto overflow-hidden\"\n    :class=\"{ 'workflow-tabs-container-desktop': isDesktop }\"\n  >\n    <Button\n      v-if=\"showOverflowArrows\"\n      icon=\"pi pi-chevron-left\"\n      text\n      severity=\"secondary\"\n      class=\"overflow-arrow overflow-arrow-left\"\n      :disabled=\"!leftArrowEnabled\"\n      @mousedown=\"whileMouseDown($event, () => scroll(-1))\"\n    />\n    <ScrollPanel\n      ref=\"scrollPanelRef\"\n      class=\"overflow-hidden no-drag\"\n      :pt:content=\"{\n        class: 'p-0 w-full',\n        onwheel: handleWheel\n      }\"\n      pt:bar-x=\"h-1\"\n    >\n      <SelectButton\n        class=\"workflow-tabs bg-transparent\"\n        :class=\"props.class\"\n        :model-value=\"selectedWorkflow\"\n        :options=\"options\"\n        option-label=\"label\"\n        data-key=\"value\"\n        @update:model-value=\"onWorkflowChange\"\n      >\n        <template #option=\"{ option }\">\n          <WorkflowTab\n            :workflow-option=\"option\"\n            @contextmenu=\"showContextMenu($event, option)\"\n            @click.middle=\"onCloseWorkflow(option)\"\n          />\n        </template>\n      </SelectButton>\n    </ScrollPanel>\n    <Button\n      v-if=\"showOverflowArrows\"\n      icon=\"pi pi-chevron-right\"\n      text\n      severity=\"secondary\"\n      class=\"overflow-arrow overflow-arrow-right\"\n      :disabled=\"!rightArrowEnabled\"\n      @mousedown=\"whileMouseDown($event, () => scroll(1))\"\n    />\n    <Button\n      v-tooltip=\"{ value: $t('sideToolbar.newBlankWorkflow'), showDelay: 300 }\"\n      class=\"new-blank-workflow-button flex-shrink-0 no-drag rounded-none\"\n      icon=\"pi pi-plus\"\n      text\n      severity=\"secondary\"\n      :aria-label=\"$t('sideToolbar.newBlankWorkflow')\"\n      @click=\"() => commandStore.execute('Comfy.NewBlankWorkflow')\"\n    />\n    <ContextMenu ref=\"menu\" :model=\"contextMenuItems\" />\n    <div\n      v-if=\"menuSetting !== 'Bottom' && isDesktop\"\n      class=\"window-actions-spacer flex-shrink-0 app-drag\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useScroll } from '@vueuse/core'\nimport Button from 'primevue/button'\nimport ContextMenu from 'primevue/contextmenu'\nimport ScrollPanel from 'primevue/scrollpanel'\nimport SelectButton from 'primevue/selectbutton'\nimport { computed, nextTick, onUpdated, ref, watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport WorkflowTab from '@/components/topbar/WorkflowTab.vue'\nimport { useOverflowObserver } from '@/composables/element/useOverflowObserver'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { ComfyWorkflow, useWorkflowBookmarkStore } from '@/stores/workflowStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport { isElectron } from '@/utils/envUtil'\nimport { whileMouseDown } from '@/utils/mouseDownUtil'\n\ninterface WorkflowOption {\n  value: string\n  workflow: ComfyWorkflow\n}\n\nconst props = defineProps<{\n  class?: string\n}>()\n\nconst { t } = useI18n()\nconst workspaceStore = useWorkspaceStore()\nconst workflowStore = useWorkflowStore()\nconst workflowBookmarkStore = useWorkflowBookmarkStore()\nconst settingStore = useSettingStore()\nconst workflowService = useWorkflowService()\n\nconst rightClickedTab = ref<WorkflowOption | undefined>()\nconst menu = ref()\nconst scrollPanelRef = ref()\nconst showOverflowArrows = ref(false)\nconst leftArrowEnabled = ref(false)\nconst rightArrowEnabled = ref(false)\n\nconst isDesktop = isElectron()\nconst menuSetting = computed(() => settingStore.get('Comfy.UseNewMenu'))\n\nconst workflowToOption = (workflow: ComfyWorkflow): WorkflowOption => ({\n  value: workflow.path,\n  workflow\n})\n\nconst options = computed<WorkflowOption[]>(() =>\n  workflowStore.openWorkflows.map(workflowToOption)\n)\nconst selectedWorkflow = computed<WorkflowOption | null>(() =>\n  workflowStore.activeWorkflow\n    ? workflowToOption(workflowStore.activeWorkflow as ComfyWorkflow)\n    : null\n)\n\nconst onWorkflowChange = async (option: WorkflowOption) => {\n  // Prevent unselecting the current workflow\n  if (!option) {\n    return\n  }\n  // Prevent reloading the current workflow\n  if (selectedWorkflow.value?.value === option.value) {\n    return\n  }\n\n  await workflowService.openWorkflow(option.workflow)\n}\n\nconst closeWorkflows = async (options: WorkflowOption[]) => {\n  for (const opt of options) {\n    if (\n      !(await workflowService.closeWorkflow(opt.workflow, {\n        warnIfUnsaved: !workspaceStore.shiftDown\n      }))\n    ) {\n      // User clicked cancel\n      break\n    }\n  }\n}\n\nconst onCloseWorkflow = async (option: WorkflowOption) => {\n  await closeWorkflows([option])\n}\n\nconst showContextMenu = (event: MouseEvent, option: WorkflowOption) => {\n  rightClickedTab.value = option\n  menu.value.show(event)\n}\nconst contextMenuItems = computed(() => {\n  const tab = rightClickedTab.value as WorkflowOption\n  if (!tab) return []\n  const index = options.value.findIndex((v) => v.workflow === tab.workflow)\n\n  return [\n    {\n      label: t('tabMenu.duplicateTab'),\n      command: async () => {\n        await workflowService.duplicateWorkflow(tab.workflow)\n      }\n    },\n    {\n      separator: true\n    },\n    {\n      label: t('tabMenu.closeTab'),\n      command: () => onCloseWorkflow(tab)\n    },\n    {\n      label: t('tabMenu.closeTabsToLeft'),\n      command: () => closeWorkflows(options.value.slice(0, index)),\n      disabled: index <= 0\n    },\n    {\n      label: t('tabMenu.closeTabsToRight'),\n      command: () => closeWorkflows(options.value.slice(index + 1)),\n      disabled: index === options.value.length - 1\n    },\n    {\n      label: t('tabMenu.closeOtherTabs'),\n      command: () =>\n        closeWorkflows([\n          ...options.value.slice(index + 1),\n          ...options.value.slice(0, index)\n        ]),\n      disabled: options.value.length <= 1\n    },\n    {\n      label: workflowBookmarkStore.isBookmarked(tab.workflow.path)\n        ? t('tabMenu.removeFromBookmarks')\n        : t('tabMenu.addToBookmarks'),\n      command: () => workflowBookmarkStore.toggleBookmarked(tab.workflow.path),\n      disabled: tab.workflow.isTemporary\n    }\n  ]\n})\nconst commandStore = useCommandStore()\n\n// Horizontal scroll on wheel\nconst handleWheel = (event: WheelEvent) => {\n  const scrollElement = event.currentTarget as HTMLElement\n  const scrollAmount = event.deltaX || event.deltaY\n  scrollElement.scroll({\n    left: scrollElement.scrollLeft + scrollAmount\n  })\n}\n\nconst scroll = (direction: number) => {\n  const scrollElement = scrollPanelRef.value.$el.querySelector(\n    '.p-scrollpanel-content'\n  ) as HTMLElement\n  scrollElement.scrollBy({ left: direction * 20 })\n}\n\n// Scroll to active offscreen tab when opened\nwatch(\n  () => workflowStore.activeWorkflow,\n  async () => {\n    if (!selectedWorkflow.value) return\n\n    await nextTick()\n\n    const activeTabElement = document.querySelector('.p-togglebutton-checked')\n    if (!activeTabElement || !scrollPanelRef.value) return\n\n    const container = scrollPanelRef.value.$el.querySelector(\n      '.p-scrollpanel-content'\n    )\n    if (!container) return\n\n    const tabRect = activeTabElement.getBoundingClientRect()\n    const containerRect = container.getBoundingClientRect()\n\n    const offsetLeft = tabRect.left - containerRect.left\n    const offsetRight = tabRect.right - containerRect.right\n\n    if (offsetRight > 0) {\n      container.scrollBy({ left: offsetRight })\n    } else if (offsetLeft < 0) {\n      container.scrollBy({ left: offsetLeft })\n    }\n  },\n  { immediate: true }\n)\n\nconst scrollContent = computed(\n  () =>\n    scrollPanelRef.value?.$el.querySelector(\n      '.p-scrollpanel-content'\n    ) as HTMLElement\n)\nlet overflowObserver: ReturnType<typeof useOverflowObserver> | null = null\nlet overflowWatch: ReturnType<typeof watch> | null = null\nwatch(scrollContent, (value) => {\n  const scrollState = useScroll(value)\n\n  watch(scrollState.arrivedState, () => {\n    leftArrowEnabled.value = !scrollState.arrivedState.left\n    rightArrowEnabled.value = !scrollState.arrivedState.right\n  })\n\n  overflowObserver?.dispose()\n  overflowWatch?.stop()\n  overflowObserver = useOverflowObserver(value)\n  overflowWatch = watch(\n    overflowObserver.isOverflowing,\n    (value) => {\n      showOverflowArrows.value = value\n      void nextTick(() => {\n        // Force a new check after arrows are updated\n        scrollState.measure()\n      })\n    },\n    { immediate: true }\n  )\n})\n\nonUpdated(() => {\n  if (!overflowObserver?.disposed.value) {\n    overflowObserver?.checkOverflow()\n  }\n})\n</script>\n\n<style scoped>\n.workflow-tabs-container {\n  background-color: var(--comfy-menu-secondary-bg);\n}\n\n:deep(.p-togglebutton) {\n  @apply p-0 bg-transparent rounded-none flex-shrink relative border-0 border-r border-solid;\n  border-right-color: var(--border-color);\n  min-width: 90px;\n}\n\n.overflow-arrow {\n  @apply px-2 rounded-none;\n}\n\n.overflow-arrow[disabled] {\n  @apply opacity-25;\n}\n\n:deep(.p-togglebutton > .p-togglebutton-content) {\n  @apply max-w-full;\n}\n\n:deep(.workflow-tab) {\n  @apply max-w-full;\n}\n\n:deep(.p-togglebutton::before) {\n  @apply hidden;\n}\n\n:deep(.p-togglebutton:first-child) {\n  @apply border-l border-solid;\n  border-left-color: var(--border-color);\n}\n\n:deep(.p-togglebutton:not(:first-child)) {\n  @apply border-l-0;\n}\n\n:deep(.p-togglebutton.p-togglebutton-checked) {\n  @apply border-b border-solid h-full;\n  border-bottom-color: var(--p-button-text-primary-color);\n}\n\n:deep(.p-togglebutton:not(.p-togglebutton-checked)) {\n  @apply opacity-75;\n}\n\n:deep(.p-togglebutton-checked) .close-button,\n:deep(.p-togglebutton:hover) .close-button {\n  @apply visible;\n}\n\n:deep(.p-togglebutton:hover) .status-indicator {\n  @apply hidden;\n}\n\n:deep(.p-togglebutton) .close-button {\n  @apply invisible;\n}\n\n:deep(.p-scrollpanel-content) {\n  @apply h-full;\n}\n\n:deep(.workflow-tabs) {\n  display: flex;\n}\n\n/* Scrollbar half opacity to avoid blocking the active tab bottom border */\n:deep(.p-scrollpanel:hover .p-scrollpanel-bar),\n:deep(.p-scrollpanel:active .p-scrollpanel-bar) {\n  @apply opacity-50;\n}\n\n:deep(.p-selectbutton) {\n  @apply rounded-none h-full;\n}\n\n.workflow-tabs-container-desktop {\n  max-width: env(titlebar-area-width, 100vw);\n}\n\n.window-actions-spacer {\n  @apply flex-auto;\n  /* If we are using custom titlebar, then we need to add a gap for the user to drag the window */\n  --window-actions-spacer-width: min(75px, env(titlebar-area-width, 0) * 9999);\n  min-width: var(--window-actions-spacer-width);\n}\n</style>\n","import type { LGraphNode } from '@/lib/litegraph/src/litegraph'\nimport type { IComboWidget } from '@/lib/litegraph/src/types/widgets'\n\n/**\n * Function that calculates dynamic pricing based on node widget values\n */\ntype PricingFunction = (node: LGraphNode) => string\n\n/**\n * Safely executes a pricing function with error handling\n * Returns null if the function throws an error, allowing the node to still render\n */\nfunction safePricingExecution(\n  fn: PricingFunction,\n  node: LGraphNode,\n  fallback: string = ''\n): string {\n  try {\n    return fn(node)\n  } catch (error) {\n    // Log error in development but don't throw to avoid breaking node rendering\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(\n        'Pricing calculation failed for node:',\n        node.constructor?.nodeData?.name,\n        error\n      )\n    }\n    return fallback\n  }\n}\n\n/**\n * Helper function to calculate Runway duration-based pricing\n * @param node - The LiteGraph node\n * @returns Formatted price string\n */\nconst calculateRunwayDurationPrice = (node: LGraphNode): string => {\n  const durationWidget = node.widgets?.find(\n    (w) => w.name === 'duration'\n  ) as IComboWidget\n\n  if (!durationWidget) return '$0.05/second'\n\n  const duration = Number(durationWidget.value)\n  // If duration is 0 or NaN, don't fall back to 5 seconds - just use 0\n  const validDuration = isNaN(duration) ? 5 : duration\n  const cost = (0.05 * validDuration).toFixed(2)\n  return `$${cost}/Run`\n}\n\nconst pixversePricingCalculator = (node: LGraphNode): string => {\n  const durationWidget = node.widgets?.find(\n    (w) => w.name === 'duration_seconds'\n  ) as IComboWidget\n  const qualityWidget = node.widgets?.find(\n    (w) => w.name === 'quality'\n  ) as IComboWidget\n  const motionModeWidget = node.widgets?.find(\n    (w) => w.name === 'motion_mode'\n  ) as IComboWidget\n\n  if (!durationWidget || !qualityWidget) {\n    return '$0.45-1.2/Run (varies with duration, quality & motion mode)'\n  }\n\n  const duration = String(durationWidget.value)\n  const quality = String(qualityWidget.value)\n  const motionMode = String(motionModeWidget?.value)\n\n  // Basic pricing based on duration and quality\n  if (duration.includes('5')) {\n    if (quality.includes('1080p')) return '$1.2/Run'\n    if (quality.includes('720p') && motionMode?.includes('fast'))\n      return '$1.2/Run'\n    if (quality.includes('720p') && motionMode?.includes('normal'))\n      return '$0.6/Run'\n    if (quality.includes('540p') && motionMode?.includes('fast'))\n      return '$0.9/Run'\n    if (quality.includes('540p') && motionMode?.includes('normal'))\n      return '$0.45/Run'\n    if (quality.includes('360p') && motionMode?.includes('fast'))\n      return '$0.9/Run'\n    if (quality.includes('360p') && motionMode?.includes('normal'))\n      return '$0.45/Run'\n    if (quality.includes('720p') && motionMode?.includes('fast'))\n      return '$1.2/Run'\n  } else if (duration.includes('8')) {\n    if (quality.includes('720p') && motionMode?.includes('normal'))\n      return '$1.2/Run'\n    if (quality.includes('540p') && motionMode?.includes('normal'))\n      return '$0.9/Run'\n    if (quality.includes('540p') && motionMode?.includes('fast'))\n      return '$1.2/Run'\n    if (quality.includes('360p') && motionMode?.includes('normal'))\n      return '$0.9/Run'\n    if (quality.includes('360p') && motionMode?.includes('fast'))\n      return '$1.2/Run'\n    if (quality.includes('1080p') && motionMode?.includes('normal'))\n      return '$1.2/Run'\n    if (quality.includes('1080p') && motionMode?.includes('fast'))\n      return '$1.2/Run'\n    if (quality.includes('720p') && motionMode?.includes('normal'))\n      return '$1.2/Run'\n    if (quality.includes('720p') && motionMode?.includes('fast'))\n      return '$1.2/Run'\n  }\n\n  return '$0.9/Run'\n}\n\n/**\n * Static pricing data for API nodes, now supporting both strings and functions\n */\nconst apiNodeCosts: Record<string, { displayPrice: string | PricingFunction }> =\n  {\n    FluxProCannyNode: {\n      displayPrice: '$0.05/Run'\n    },\n    FluxProDepthNode: {\n      displayPrice: '$0.05/Run'\n    },\n    FluxProExpandNode: {\n      displayPrice: '$0.05/Run'\n    },\n    FluxProFillNode: {\n      displayPrice: '$0.05/Run'\n    },\n    FluxProUltraImageNode: {\n      displayPrice: '$0.06/Run'\n    },\n    FluxProKontextProNode: {\n      displayPrice: '$0.04/Run'\n    },\n    FluxProKontextMaxNode: {\n      displayPrice: '$0.08/Run'\n    },\n    IdeogramV1: {\n      displayPrice: (node: LGraphNode): string => {\n        const numImagesWidget = node.widgets?.find(\n          (w) => w.name === 'num_images'\n        ) as IComboWidget\n        const turboWidget = node.widgets?.find(\n          (w) => w.name === 'turbo'\n        ) as IComboWidget\n\n        if (!numImagesWidget) return '$0.02-0.06 x num_images/Run'\n\n        const numImages = Number(numImagesWidget.value) || 1\n        const turbo = String(turboWidget?.value).toLowerCase() === 'true'\n        const basePrice = turbo ? 0.02 : 0.06\n        const cost = (basePrice * numImages).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    IdeogramV2: {\n      displayPrice: (node: LGraphNode): string => {\n        const numImagesWidget = node.widgets?.find(\n          (w) => w.name === 'num_images'\n        ) as IComboWidget\n        const turboWidget = node.widgets?.find(\n          (w) => w.name === 'turbo'\n        ) as IComboWidget\n\n        if (!numImagesWidget) return '$0.05-0.08 x num_images/Run'\n\n        const numImages = Number(numImagesWidget.value) || 1\n        const turbo = String(turboWidget?.value).toLowerCase() === 'true'\n        const basePrice = turbo ? 0.05 : 0.08\n        const cost = (basePrice * numImages).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    IdeogramV3: {\n      displayPrice: (node: LGraphNode): string => {\n        const renderingSpeedWidget = node.widgets?.find(\n          (w) => w.name === 'rendering_speed'\n        ) as IComboWidget\n        const numImagesWidget = node.widgets?.find(\n          (w) => w.name === 'num_images'\n        ) as IComboWidget\n\n        if (!renderingSpeedWidget)\n          return '$0.03-0.08 x num_images/Run (varies with rendering speed & num_images)'\n\n        const numImages = Number(numImagesWidget?.value) || 1\n        let basePrice = 0.06 // default balanced price\n\n        const renderingSpeed = String(renderingSpeedWidget.value)\n        if (renderingSpeed.toLowerCase().includes('quality')) {\n          basePrice = 0.09\n        } else if (renderingSpeed.toLowerCase().includes('balanced')) {\n          basePrice = 0.06\n        } else if (renderingSpeed.toLowerCase().includes('turbo')) {\n          basePrice = 0.03\n        }\n\n        const totalCost = (basePrice * numImages).toFixed(2)\n        return `$${totalCost}/Run`\n      }\n    },\n    KlingCameraControlI2VNode: {\n      displayPrice: '$0.49/Run'\n    },\n    KlingCameraControlT2VNode: {\n      displayPrice: '$0.14/Run'\n    },\n    KlingDualCharacterVideoEffectNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modeWidget = node.widgets?.find(\n          (w) => w.name === 'mode'\n        ) as IComboWidget\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model_name'\n        ) as IComboWidget\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n        if (!modeWidget || !modelWidget || !durationWidget)\n          return '$0.14-2.80/Run (varies with model, mode & duration)'\n\n        const modeValue = String(modeWidget.value)\n        const durationValue = String(durationWidget.value)\n        const modelValue = String(modelWidget.value)\n        console.log('modelValue', modelValue)\n        console.log('modeValue', modeValue)\n        console.log('durationValue', durationValue)\n\n        // Same pricing matrix as KlingTextToVideoNode\n        if (modelValue.includes('v1-6') || modelValue.includes('v1-5')) {\n          if (modeValue.includes('pro')) {\n            return durationValue.includes('10') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return durationValue.includes('10') ? '$0.56/Run' : '$0.28/Run'\n          }\n        } else if (modelValue.includes('v1')) {\n          if (modeValue.includes('pro')) {\n            return durationValue.includes('10') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return durationValue.includes('10') ? '$0.28/Run' : '$0.14/Run'\n          }\n        }\n\n        return '$0.14/Run'\n      }\n    },\n    KlingImage2VideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modeWidget = node.widgets?.find(\n          (w) => w.name === 'mode'\n        ) as IComboWidget\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model_name'\n        ) as IComboWidget\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n\n        if (!modeWidget) {\n          if (!modelWidget)\n            return '$0.14-2.80/Run (varies with model, mode & duration)'\n\n          const modelValue = String(modelWidget.value)\n          if (modelValue.includes('v2-master')) {\n            return '$1.40/Run'\n          } else if (\n            modelValue.includes('v1-6') ||\n            modelValue.includes('v1-5')\n          ) {\n            return '$0.28/Run'\n          }\n          return '$0.14/Run'\n        }\n\n        const modeValue = String(modeWidget.value)\n        const durationValue = String(durationWidget.value)\n        const modelValue = String(modelWidget.value)\n        console.log('modelValue', modelValue)\n        console.log('modeValue', modeValue)\n        console.log('durationValue', durationValue)\n\n        // Same pricing matrix as KlingTextToVideoNode\n        if (modelValue.includes('v2-master')) {\n          if (durationValue.includes('10')) {\n            return '$2.80/Run'\n          }\n          return '$1.40/Run' // 5s default\n        } else if (modelValue.includes('v1-6') || modelValue.includes('v1-5')) {\n          if (modeValue.includes('pro')) {\n            return durationValue.includes('10') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return durationValue.includes('10') ? '$0.56/Run' : '$0.28/Run'\n          }\n        } else if (modelValue.includes('v1')) {\n          if (modeValue.includes('pro')) {\n            return durationValue.includes('10') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return durationValue.includes('10') ? '$0.28/Run' : '$0.14/Run'\n          }\n        }\n\n        return '$0.14/Run'\n      }\n    },\n    KlingImageGenerationNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const imageInputWidget = node.inputs?.find((i) => i.name === 'image')\n        // If link is not null => image is connected => modality is image to image\n        const modality = imageInputWidget?.link\n          ? 'image to image'\n          : 'text to image'\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model_name'\n        ) as IComboWidget\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n\n        if (!modelWidget)\n          return '$0.0035-0.028 x n/Run (varies with modality & model)'\n\n        const model = String(modelWidget.value)\n        const n = Number(nWidget?.value) || 1\n        let basePrice = 0.014 // default\n\n        if (modality.includes('text to image')) {\n          if (model.includes('kling-v1-5') || model.includes('kling-v2')) {\n            basePrice = 0.014\n          } else if (model.includes('kling-v1')) {\n            basePrice = 0.0035\n          }\n        } else if (modality.includes('image to image')) {\n          if (model.includes('kling-v1-5')) {\n            basePrice = 0.028\n          } else if (model.includes('kling-v1')) {\n            basePrice = 0.0035\n          }\n        }\n\n        const totalCost = (basePrice * n).toFixed(4)\n        return `$${totalCost}/Run`\n      }\n    },\n    KlingLipSyncAudioToVideoNode: {\n      displayPrice: '~$0.10/Run'\n    },\n    KlingLipSyncTextToVideoNode: {\n      displayPrice: '~$0.10/Run'\n    },\n    KlingSingleImageVideoEffectNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const effectSceneWidget = node.widgets?.find(\n          (w) => w.name === 'effect_scene'\n        ) as IComboWidget\n\n        if (!effectSceneWidget)\n          return '$0.28-0.49/Run (varies with effect scene)'\n\n        const effectScene = String(effectSceneWidget.value)\n        if (\n          effectScene.includes('fuzzyfuzzy') ||\n          effectScene.includes('squish')\n        ) {\n          return '$0.28/Run'\n        } else if (effectScene.includes('dizzydizzy')) {\n          return '$0.49/Run'\n        } else if (effectScene.includes('bloombloom')) {\n          return '$0.49/Run'\n        } else if (effectScene.includes('expansion')) {\n          return '$0.28/Run'\n        }\n\n        return '$0.28/Run'\n      }\n    },\n    KlingStartEndFrameNode: {\n      displayPrice: (node: LGraphNode): string => {\n        // Same pricing as KlingTextToVideoNode per CSV (\"Same as text to video\")\n        const modeWidget = node.widgets?.find(\n          (w) => w.name === 'mode'\n        ) as IComboWidget\n        if (!modeWidget)\n          return '$0.14-2.80/Run (varies with model, mode & duration)'\n\n        const modeValue = String(modeWidget.value)\n\n        // Same pricing matrix as KlingTextToVideoNode\n        if (modeValue.includes('v2-master')) {\n          if (modeValue.includes('10s')) {\n            return '$2.80/Run'\n          }\n          return '$1.40/Run' // 5s default\n        } else if (modeValue.includes('v1-6')) {\n          if (modeValue.includes('pro')) {\n            return modeValue.includes('10s') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return modeValue.includes('10s') ? '$0.56/Run' : '$0.28/Run'\n          }\n        } else if (modeValue.includes('v1')) {\n          if (modeValue.includes('pro')) {\n            return modeValue.includes('10s') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return modeValue.includes('10s') ? '$0.28/Run' : '$0.14/Run'\n          }\n        }\n\n        return '$0.14/Run'\n      }\n    },\n    KlingTextToVideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modeWidget = node.widgets?.find(\n          (w) => w.name === 'mode'\n        ) as IComboWidget\n        if (!modeWidget)\n          return '$0.14-2.80/Run (varies with model, mode & duration)'\n\n        const modeValue = String(modeWidget.value)\n\n        // Pricing matrix from CSV data based on mode string content\n        if (modeValue.includes('v2-master')) {\n          if (modeValue.includes('10s')) {\n            return '$2.80/Run'\n          }\n          return '$1.40/Run' // 5s default\n        } else if (modeValue.includes('v1-6')) {\n          if (modeValue.includes('pro')) {\n            return modeValue.includes('10s') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return modeValue.includes('10s') ? '$0.56/Run' : '$0.28/Run'\n          }\n        } else if (modeValue.includes('v1')) {\n          if (modeValue.includes('pro')) {\n            return modeValue.includes('10s') ? '$0.98/Run' : '$0.49/Run'\n          } else {\n            return modeValue.includes('10s') ? '$0.28/Run' : '$0.14/Run'\n          }\n        }\n\n        return '$0.14/Run'\n      }\n    },\n    KlingVideoExtendNode: {\n      displayPrice: '$0.28/Run'\n    },\n    KlingVirtualTryOnNode: {\n      displayPrice: '$0.07/Run'\n    },\n    LumaImageToVideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        // Same pricing as LumaVideoNode per CSV\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n        const resolutionWidget = node.widgets?.find(\n          (w) => w.name === 'resolution'\n        ) as IComboWidget\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n\n        if (!modelWidget || !resolutionWidget || !durationWidget) {\n          return '$0.14-11.47/Run (varies with model, resolution & duration)'\n        }\n\n        const model = String(modelWidget.value)\n        const resolution = String(resolutionWidget.value).toLowerCase()\n        const duration = String(durationWidget.value)\n        console.log('model', model)\n        console.log('resolution', resolution)\n        console.log('duration', duration)\n\n        if (model.includes('ray-flash-2')) {\n          if (duration.includes('5s')) {\n            if (resolution.includes('4k')) return '$2.19/Run'\n            if (resolution.includes('1080p')) return '$0.55/Run'\n            if (resolution.includes('720p')) return '$0.24/Run'\n            if (resolution.includes('540p')) return '$0.14/Run'\n          } else if (duration.includes('9s')) {\n            if (resolution.includes('4k')) return '$3.95/Run'\n            if (resolution.includes('1080p')) return '$0.99/Run'\n            if (resolution.includes('720p')) return '$0.43/Run'\n            if (resolution.includes('540p')) return '$0.252/Run'\n          }\n        } else if (model.includes('ray-2')) {\n          if (duration.includes('5s')) {\n            if (resolution.includes('4k')) return '$6.37/Run'\n            if (resolution.includes('1080p')) return '$1.59/Run'\n            if (resolution.includes('720p')) return '$0.71/Run'\n            if (resolution.includes('540p')) return '$0.40/Run'\n          } else if (duration.includes('9s')) {\n            if (resolution.includes('4k')) return '$11.47/Run'\n            if (resolution.includes('1080p')) return '$2.87/Run'\n            if (resolution.includes('720p')) return '$1.28/Run'\n            if (resolution.includes('540p')) return '$0.72/Run'\n          }\n        } else if (model.includes('ray-1.6')) {\n          return '$0.35/Run'\n        }\n\n        return '$0.55/Run'\n      }\n    },\n    LumaVideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n        const resolutionWidget = node.widgets?.find(\n          (w) => w.name === 'resolution'\n        ) as IComboWidget\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n\n        if (!modelWidget || !resolutionWidget || !durationWidget) {\n          return '$0.14-11.47/Run (varies with model, resolution & duration)'\n        }\n\n        const model = String(modelWidget.value)\n        const resolution = String(resolutionWidget.value).toLowerCase()\n        const duration = String(durationWidget.value)\n\n        if (model.includes('ray-flash-2')) {\n          if (duration.includes('5s')) {\n            if (resolution.includes('4k')) return '$2.19/Run'\n            if (resolution.includes('1080p')) return '$0.55/Run'\n            if (resolution.includes('720p')) return '$0.24/Run'\n            if (resolution.includes('540p')) return '$0.14/Run'\n          } else if (duration.includes('9s')) {\n            if (resolution.includes('4k')) return '$3.95/Run'\n            if (resolution.includes('1080p')) return '$0.99/Run'\n            if (resolution.includes('720p')) return '$0.43/Run'\n            if (resolution.includes('540p')) return '$0.252/Run'\n          }\n        } else if (model.includes('ray-2')) {\n          if (duration.includes('5s')) {\n            if (resolution.includes('4k')) return '$6.37/Run'\n            if (resolution.includes('1080p')) return '$1.59/Run'\n            if (resolution.includes('720p')) return '$0.71/Run'\n            if (resolution.includes('540p')) return '$0.40/Run'\n          } else if (duration.includes('9s')) {\n            if (resolution.includes('4k')) return '$11.47/Run'\n            if (resolution.includes('1080p')) return '$2.87/Run'\n            if (resolution.includes('720p')) return '$1.28/Run'\n            if (resolution.includes('540p')) return '$0.72/Run'\n          }\n        } else if (model.includes('ray-1-6')) {\n          return '$0.35/Run'\n        }\n\n        return '$0.55/Run'\n      }\n    },\n    MinimaxImageToVideoNode: {\n      displayPrice: '$0.43/Run'\n    },\n    MinimaxTextToVideoNode: {\n      displayPrice: '$0.43/Run'\n    },\n    OpenAIDalle2: {\n      displayPrice: (node: LGraphNode): string => {\n        const sizeWidget = node.widgets?.find(\n          (w) => w.name === 'size'\n        ) as IComboWidget\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n\n        if (!sizeWidget) return '$0.016-0.02 x n/Run (varies with size & n)'\n\n        const size = String(sizeWidget.value)\n        const n = Number(nWidget?.value) || 1\n        let basePrice = 0.02 // default\n\n        if (size.includes('1024x1024')) {\n          basePrice = 0.02\n        } else if (size.includes('512x512')) {\n          basePrice = 0.018\n        } else if (size.includes('256x256')) {\n          basePrice = 0.016\n        }\n\n        const totalCost = (basePrice * n).toFixed(3)\n        return `$${totalCost}/Run`\n      }\n    },\n    OpenAIDalle3: {\n      displayPrice: (node: LGraphNode): string => {\n        // Get size and quality widgets\n        const sizeWidget = node.widgets?.find(\n          (w) => w.name === 'size'\n        ) as IComboWidget\n        const qualityWidget = node.widgets?.find(\n          (w) => w.name === 'quality'\n        ) as IComboWidget\n\n        if (!sizeWidget || !qualityWidget)\n          return '$0.04-0.12/Run (varies with size & quality)'\n\n        const size = String(sizeWidget.value)\n        const quality = String(qualityWidget.value)\n\n        // Pricing matrix based on CSV data\n        if (size.includes('1024x1024')) {\n          return quality.includes('hd') ? '$0.08/Run' : '$0.04/Run'\n        } else if (size.includes('1792x1024') || size.includes('1024x1792')) {\n          return quality.includes('hd') ? '$0.12/Run' : '$0.08/Run'\n        }\n\n        // Default value\n        return '$0.04/Run'\n      }\n    },\n    OpenAIGPTImage1: {\n      displayPrice: (node: LGraphNode): string => {\n        const qualityWidget = node.widgets?.find(\n          (w) => w.name === 'quality'\n        ) as IComboWidget\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n\n        if (!qualityWidget)\n          return '$0.011-0.30 x n/Run (varies with quality & n)'\n\n        const quality = String(qualityWidget.value)\n        const n = Number(nWidget?.value) || 1\n        let basePriceRange = '$0.046-0.07' // default medium\n\n        if (quality.includes('high')) {\n          basePriceRange = '$0.167-0.30'\n        } else if (quality.includes('medium')) {\n          basePriceRange = '$0.046-0.07'\n        } else if (quality.includes('low')) {\n          basePriceRange = '$0.011-0.02'\n        }\n\n        if (n === 1) {\n          return `${basePriceRange}/Run`\n        } else {\n          return `${basePriceRange} x ${n}/Run`\n        }\n      }\n    },\n    PikaImageToVideoNode2_2: {\n      displayPrice: (node: LGraphNode): string => {\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n        const resolutionWidget = node.widgets?.find(\n          (w) => w.name === 'resolution'\n        ) as IComboWidget\n\n        if (!durationWidget || !resolutionWidget) {\n          return '$0.2-1.0/Run (varies with duration & resolution)'\n        }\n\n        const duration = String(durationWidget.value)\n        const resolution = String(resolutionWidget.value)\n\n        if (duration.includes('5')) {\n          if (resolution.includes('1080p')) return '$0.45/Run'\n          if (resolution.includes('720p')) return '$0.2/Run'\n        } else if (duration.includes('10')) {\n          if (resolution.includes('1080p')) return '$1.0/Run'\n          if (resolution.includes('720p')) return '$0.6/Run'\n        }\n\n        return '$0.2/Run'\n      }\n    },\n    PikaScenesV2_2: {\n      displayPrice: (node: LGraphNode): string => {\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n        const resolutionWidget = node.widgets?.find(\n          (w) => w.name === 'resolution'\n        ) as IComboWidget\n\n        if (!durationWidget || !resolutionWidget) {\n          return '$0.2-1.0/Run (varies with duration & resolution)'\n        }\n\n        const duration = String(durationWidget.value)\n        const resolution = String(resolutionWidget.value)\n\n        if (duration.includes('5')) {\n          if (resolution.includes('720p')) return '$0.3/Run'\n          if (resolution.includes('1080p')) return '$0.5/Run'\n        } else if (duration.includes('10')) {\n          if (resolution.includes('720p')) return '$0.4/Run'\n          if (resolution.includes('1080p')) return '$1.5/Run'\n        }\n\n        return '$0.3/Run'\n      }\n    },\n    PikaStartEndFrameNode2_2: {\n      displayPrice: (node: LGraphNode): string => {\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n        const resolutionWidget = node.widgets?.find(\n          (w) => w.name === 'resolution'\n        ) as IComboWidget\n\n        if (!durationWidget || !resolutionWidget) {\n          return '$0.2-1.0/Run (varies with duration & resolution)'\n        }\n\n        const duration = String(durationWidget.value)\n        const resolution = String(resolutionWidget.value)\n\n        if (duration.includes('5')) {\n          if (resolution.includes('720p')) return '$0.2/Run'\n          if (resolution.includes('1080p')) return '$0.3/Run'\n        } else if (duration.includes('10')) {\n          if (resolution.includes('720p')) return '$0.25/Run'\n          if (resolution.includes('1080p')) return '$1.0/Run'\n        }\n\n        return '$0.2/Run'\n      }\n    },\n    PikaTextToVideoNode2_2: {\n      displayPrice: (node: LGraphNode): string => {\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration'\n        ) as IComboWidget\n        const resolutionWidget = node.widgets?.find(\n          (w) => w.name === 'resolution'\n        ) as IComboWidget\n\n        if (!durationWidget || !resolutionWidget) {\n          return '$0.2-1.5/Run (varies with duration & resolution)'\n        }\n\n        const duration = String(durationWidget.value)\n        const resolution = String(resolutionWidget.value)\n\n        if (duration.includes('5')) {\n          if (resolution.includes('1080p')) return '$0.45/Run'\n          if (resolution.includes('720p')) return '$0.2/Run'\n        } else if (duration.includes('10')) {\n          if (resolution.includes('1080p')) return '$1.0/Run'\n          if (resolution.includes('720p')) return '$0.6/Run'\n        }\n\n        return '$0.45/Run'\n      }\n    },\n    Pikadditions: {\n      displayPrice: '$0.3/Run'\n    },\n    Pikaffects: {\n      displayPrice: '$0.45/Run'\n    },\n    Pikaswaps: {\n      displayPrice: '$0.3/Run'\n    },\n    PixverseImageToVideoNode: {\n      displayPrice: pixversePricingCalculator\n    },\n    PixverseTextToVideoNode: {\n      displayPrice: pixversePricingCalculator\n    },\n    PixverseTransitionVideoNode: {\n      displayPrice: pixversePricingCalculator\n    },\n    RecraftCreativeUpscaleNode: {\n      displayPrice: '$0.25/Run'\n    },\n    RecraftCrispUpscaleNode: {\n      displayPrice: '$0.004/Run'\n    },\n    RecraftGenerateColorFromImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.04 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.04 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftGenerateImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.04 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.04 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftGenerateVectorImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.08 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.08 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftImageInpaintingNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.04 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.04 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftImageToImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.04 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.04 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftRemoveBackgroundNode: {\n      displayPrice: '$0.01/Run'\n    },\n    RecraftReplaceBackgroundNode: {\n      displayPrice: '$0.04/Run'\n    },\n    RecraftTextToImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.04 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.04 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftTextToVectorNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.08 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.08 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    RecraftVectorizeImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const nWidget = node.widgets?.find(\n          (w) => w.name === 'n'\n        ) as IComboWidget\n        if (!nWidget) return '$0.01 x n/Run'\n\n        const n = Number(nWidget.value) || 1\n        const cost = (0.01 * n).toFixed(2)\n        return `$${cost}/Run`\n      }\n    },\n    StabilityStableImageSD_3_5Node: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n\n        if (!modelWidget) return '$0.035-0.065/Run (varies with model)'\n\n        const model = String(modelWidget.value).toLowerCase()\n        if (model.includes('large')) {\n          return '$0.065/Run'\n        } else if (model.includes('medium')) {\n          return '$0.035/Run'\n        }\n\n        return '$0.035/Run'\n      }\n    },\n    StabilityStableImageUltraNode: {\n      displayPrice: '$0.08/Run'\n    },\n    StabilityUpscaleConservativeNode: {\n      displayPrice: '$0.25/Run'\n    },\n    StabilityUpscaleCreativeNode: {\n      displayPrice: '$0.25/Run'\n    },\n    StabilityUpscaleFastNode: {\n      displayPrice: '$0.01/Run'\n    },\n    VeoVideoGenerationNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const durationWidget = node.widgets?.find(\n          (w) => w.name === 'duration_seconds'\n        ) as IComboWidget\n\n        if (!durationWidget) return '$2.50-5.0/Run (varies with duration)'\n\n        const price = 0.5 * Number(durationWidget.value)\n        return `$${price.toFixed(2)}/Run`\n      }\n    },\n    Veo3VideoGenerationNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n        const generateAudioWidget = node.widgets?.find(\n          (w) => w.name === 'generate_audio'\n        ) as IComboWidget\n\n        if (!modelWidget || !generateAudioWidget) {\n          return '$2.00-6.00/Run (varies with model & audio generation)'\n        }\n\n        const model = String(modelWidget.value)\n        const generateAudio =\n          String(generateAudioWidget.value).toLowerCase() === 'true'\n\n        if (model.includes('veo-3.0-fast-generate-001')) {\n          return generateAudio ? '$3.20/Run' : '$2.00/Run'\n        } else if (model.includes('veo-3.0-generate-001')) {\n          return generateAudio ? '$6.00/Run' : '$4.00/Run'\n        }\n\n        // Default fallback\n        return '$2.00-6.00/Run'\n      }\n    },\n    LumaImageNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n        const aspectRatioWidget = node.widgets?.find(\n          (w) => w.name === 'aspect_ratio'\n        ) as IComboWidget\n\n        if (!modelWidget || !aspectRatioWidget) {\n          return '$0.0045-0.0182/Run (varies with model & aspect ratio)'\n        }\n\n        const model = String(modelWidget.value)\n\n        if (model.includes('photon-flash-1')) {\n          return '$0.0019/Run'\n        } else if (model.includes('photon-1')) {\n          return '$0.0073/Run'\n        }\n\n        return '$0.0172/Run'\n      }\n    },\n    LumaImageModifyNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n\n        if (!modelWidget) {\n          return '$0.0019-0.0073/Run (varies with model)'\n        }\n\n        const model = String(modelWidget.value)\n\n        if (model.includes('photon-flash-1')) {\n          return '$0.0019/Run'\n        } else if (model.includes('photon-1')) {\n          return '$0.0073/Run'\n        }\n\n        return '$0.0172/Run'\n      }\n    },\n    MoonvalleyTxt2VideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const lengthWidget = node.widgets?.find(\n          (w) => w.name === 'length'\n        ) as IComboWidget\n\n        // If no length widget exists, default to 5s pricing\n        if (!lengthWidget) return '$1.50/Run'\n\n        const length = String(lengthWidget.value)\n        if (length === '5s') {\n          return '$1.50/Run'\n        } else if (length === '10s') {\n          return '$3.00/Run'\n        }\n\n        return '$1.50/Run'\n      }\n    },\n    MoonvalleyImg2VideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const lengthWidget = node.widgets?.find(\n          (w) => w.name === 'length'\n        ) as IComboWidget\n\n        // If no length widget exists, default to 5s pricing\n        if (!lengthWidget) return '$1.50/Run'\n\n        const length = String(lengthWidget.value)\n        if (length === '5s') {\n          return '$1.50/Run'\n        } else if (length === '10s') {\n          return '$3.00/Run'\n        }\n\n        return '$1.50/Run'\n      }\n    },\n    MoonvalleyVideo2VideoNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const lengthWidget = node.widgets?.find(\n          (w) => w.name === 'length'\n        ) as IComboWidget\n\n        // If no length widget exists, default to 5s pricing\n        if (!lengthWidget) return '$2.25/Run'\n\n        const length = String(lengthWidget.value)\n        if (length === '5s') {\n          return '$2.25/Run'\n        } else if (length === '10s') {\n          return '$4.00/Run'\n        }\n\n        return '$2.25/Run'\n      }\n    },\n    // Runway nodes - using actual node names from ComfyUI\n    RunwayTextToImageNode: {\n      displayPrice: '$0.08/Run'\n    },\n    RunwayImageToVideoNodeGen3a: {\n      displayPrice: calculateRunwayDurationPrice\n    },\n    RunwayImageToVideoNodeGen4: {\n      displayPrice: calculateRunwayDurationPrice\n    },\n    RunwayFirstLastFrameNode: {\n      displayPrice: calculateRunwayDurationPrice\n    },\n    // Rodin nodes - all have the same pricing structure\n    Rodin3D_Regular: {\n      displayPrice: '$0.4/Run'\n    },\n    Rodin3D_Detail: {\n      displayPrice: '$0.4/Run'\n    },\n    Rodin3D_Smooth: {\n      displayPrice: '$0.4/Run'\n    },\n    Rodin3D_Sketch: {\n      displayPrice: '$0.4/Run'\n    },\n    // Tripo nodes - using actual node names from ComfyUI\n    TripoTextToModelNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const quadWidget = node.widgets?.find(\n          (w) => w.name === 'quad'\n        ) as IComboWidget\n        const styleWidget = node.widgets?.find(\n          (w) => w.name === 'style'\n        ) as IComboWidget\n        const textureWidget = node.widgets?.find(\n          (w) => w.name === 'texture'\n        ) as IComboWidget\n        const textureQualityWidget = node.widgets?.find(\n          (w) => w.name === 'texture_quality'\n        ) as IComboWidget\n\n        if (!quadWidget || !styleWidget || !textureWidget)\n          return '$0.1-0.4/Run (varies with quad, style, texture & quality)'\n\n        const quad = String(quadWidget.value).toLowerCase() === 'true'\n        const style = String(styleWidget.value).toLowerCase()\n        const texture = String(textureWidget.value).toLowerCase() === 'true'\n        const textureQuality = String(\n          textureQualityWidget?.value || 'standard'\n        ).toLowerCase()\n\n        // Pricing logic based on CSV data\n        if (style.includes('none')) {\n          if (!quad) {\n            if (!texture) return '$0.10/Run'\n            else return '$0.15/Run'\n          } else {\n            if (textureQuality.includes('detailed')) {\n              if (!texture) return '$0.30/Run'\n              else return '$0.35/Run'\n            } else {\n              if (!texture) return '$0.20/Run'\n              else return '$0.25/Run'\n            }\n          }\n        } else {\n          // any style\n          if (!quad) {\n            if (!texture) return '$0.15/Run'\n            else return '$0.20/Run'\n          } else {\n            if (textureQuality.includes('detailed')) {\n              if (!texture) return '$0.35/Run'\n              else return '$0.40/Run'\n            } else {\n              if (!texture) return '$0.25/Run'\n              else return '$0.30/Run'\n            }\n          }\n        }\n      }\n    },\n    TripoImageToModelNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const quadWidget = node.widgets?.find(\n          (w) => w.name === 'quad'\n        ) as IComboWidget\n        const styleWidget = node.widgets?.find(\n          (w) => w.name === 'style'\n        ) as IComboWidget\n        const textureWidget = node.widgets?.find(\n          (w) => w.name === 'texture'\n        ) as IComboWidget\n        const textureQualityWidget = node.widgets?.find(\n          (w) => w.name === 'texture_quality'\n        ) as IComboWidget\n\n        if (!quadWidget || !styleWidget || !textureWidget)\n          return '$0.2-0.5/Run (varies with quad, style, texture & quality)'\n\n        const quad = String(quadWidget.value).toLowerCase() === 'true'\n        const style = String(styleWidget.value).toLowerCase()\n        const texture = String(textureWidget.value).toLowerCase() === 'true'\n        const textureQuality = String(\n          textureQualityWidget?.value || 'standard'\n        ).toLowerCase()\n\n        // Pricing logic based on CSV data for Image to Model\n        if (style.includes('none')) {\n          if (!quad) {\n            if (!texture) return '$0.20/Run'\n            else return '$0.25/Run'\n          } else {\n            if (textureQuality.includes('detailed')) {\n              if (!texture) return '$0.40/Run'\n              else return '$0.45/Run'\n            } else {\n              if (!texture) return '$0.30/Run'\n              else return '$0.35/Run'\n            }\n          }\n        } else {\n          // any style\n          if (!quad) {\n            if (!texture) return '$0.25/Run'\n            else return '$0.30/Run'\n          } else {\n            if (textureQuality.includes('detailed')) {\n              if (!texture) return '$0.45/Run'\n              else return '$0.50/Run'\n            } else {\n              if (!texture) return '$0.35/Run'\n              else return '$0.40/Run'\n            }\n          }\n        }\n      }\n    },\n    TripoRefineNode: {\n      displayPrice: '$0.3/Run'\n    },\n    TripoTextureNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const textureQualityWidget = node.widgets?.find(\n          (w) => w.name === 'texture_quality'\n        ) as IComboWidget\n\n        if (!textureQualityWidget) return '$0.1-0.2/Run (varies with quality)'\n\n        const textureQuality = String(textureQualityWidget.value)\n        return textureQuality.includes('detailed') ? '$0.2/Run' : '$0.1/Run'\n      }\n    },\n    TripoConvertModelNode: {\n      displayPrice: '$0.10/Run'\n    },\n    TripoRetargetRiggedModelNode: {\n      displayPrice: '$0.10/Run'\n    },\n    TripoMultiviewToModelNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const quadWidget = node.widgets?.find(\n          (w) => w.name === 'quad'\n        ) as IComboWidget\n        const styleWidget = node.widgets?.find(\n          (w) => w.name === 'style'\n        ) as IComboWidget\n        const textureWidget = node.widgets?.find(\n          (w) => w.name === 'texture'\n        ) as IComboWidget\n        const textureQualityWidget = node.widgets?.find(\n          (w) => w.name === 'texture_quality'\n        ) as IComboWidget\n\n        if (!quadWidget || !styleWidget || !textureWidget)\n          return '$0.2-0.5/Run (varies with quad, style, texture & quality)'\n\n        const quad = String(quadWidget.value).toLowerCase() === 'true'\n        const style = String(styleWidget.value).toLowerCase()\n        const texture = String(textureWidget.value).toLowerCase() === 'true'\n        const textureQuality = String(\n          textureQualityWidget?.value || 'standard'\n        ).toLowerCase()\n\n        // Pricing logic based on CSV data for Multiview to Model (same as Image to Model)\n        if (style.includes('none')) {\n          if (!quad) {\n            if (!texture) return '$0.20/Run'\n            else return '$0.25/Run'\n          } else {\n            if (textureQuality.includes('detailed')) {\n              if (!texture) return '$0.40/Run'\n              else return '$0.45/Run'\n            } else {\n              if (!texture) return '$0.30/Run'\n              else return '$0.35/Run'\n            }\n          }\n        } else {\n          // any style\n          if (!quad) {\n            if (!texture) return '$0.25/Run'\n            else return '$0.30/Run'\n          } else {\n            if (textureQuality.includes('detailed')) {\n              if (!texture) return '$0.45/Run'\n              else return '$0.50/Run'\n            } else {\n              if (!texture) return '$0.35/Run'\n              else return '$0.40/Run'\n            }\n          }\n        }\n      }\n    },\n    // Google/Gemini nodes\n    GeminiNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n\n        if (!modelWidget) return 'Token-based'\n\n        const model = String(modelWidget.value)\n\n        // Google Veo video generation\n        if (model.includes('veo-2.0')) {\n          return '$0.5/second'\n        } else if (model.includes('gemini-2.5-pro-preview-05-06')) {\n          return '$0.00016/$0.0006 per 1K tokens'\n        } else if (model.includes('gemini-2.5-flash-preview-04-17')) {\n          return '$0.00125/$0.01 per 1K tokens'\n        }\n        // For other Gemini models, show token-based pricing info\n        return 'Token-based'\n      }\n    },\n    // OpenAI nodes\n    OpenAIChatNode: {\n      displayPrice: (node: LGraphNode): string => {\n        const modelWidget = node.widgets?.find(\n          (w) => w.name === 'model'\n        ) as IComboWidget\n\n        if (!modelWidget) return 'Token-based'\n\n        const model = String(modelWidget.value)\n\n        // Specific pricing for exposed models based on official pricing data (converted to per 1K tokens)\n        if (model.includes('o4-mini')) {\n          return '$0.0011/$0.0044 per 1K tokens'\n        } else if (model.includes('o1-pro')) {\n          return '$0.15/$0.60 per 1K tokens'\n        } else if (model.includes('o1')) {\n          return '$0.015/$0.06 per 1K tokens'\n        } else if (model.includes('o3-mini')) {\n          return '$0.0011/$0.0044 per 1K tokens'\n        } else if (model.includes('o3')) {\n          return '$0.01/$0.04 per 1K tokens'\n        } else if (model.includes('gpt-4o')) {\n          return '$0.0025/$0.01 per 1K tokens'\n        } else if (model.includes('gpt-4.1-nano')) {\n          return '$0.0001/$0.0004 per 1K tokens'\n        } else if (model.includes('gpt-4.1-mini')) {\n          return '$0.0004/$0.0016 per 1K tokens'\n        } else if (model.includes('gpt-4.1')) {\n          return '$0.002/$0.008 per 1K tokens'\n        }\n        return 'Token-based'\n      }\n    }\n  }\n\n/**\n * Composable to get node pricing information for API nodes\n */\nexport const useNodePricing = () => {\n  /**\n   * Get the price display for a node\n   */\n  const getNodeDisplayPrice = (node: LGraphNode): string => {\n    if (!node.constructor?.nodeData?.api_node) return ''\n\n    const nodeName = node.constructor.nodeData.name\n    const priceConfig = apiNodeCosts[nodeName]\n\n    if (!priceConfig) return ''\n\n    // If it's a function, call it with the node to get dynamic pricing\n    if (typeof priceConfig.displayPrice === 'function') {\n      return safePricingExecution(priceConfig.displayPrice, node, '')\n    }\n\n    // Otherwise return the static price\n    return priceConfig.displayPrice\n  }\n\n  const getNodePricingConfig = (node: LGraphNode) =>\n    apiNodeCosts[node.constructor.nodeData?.name ?? '']\n\n  const getRelevantWidgetNames = (nodeType: string): string[] => {\n    const widgetMap: Record<string, string[]> = {\n      KlingTextToVideoNode: ['mode', 'model_name', 'duration'],\n      KlingImage2VideoNode: ['mode', 'model_name', 'duration'],\n      KlingImageGenerationNode: ['modality', 'model_name', 'n'],\n      KlingDualCharacterVideoEffectNode: ['mode', 'model_name', 'duration'],\n      KlingSingleImageVideoEffectNode: ['effect_scene'],\n      KlingStartEndFrameNode: ['mode', 'model_name', 'duration'],\n      OpenAIDalle3: ['size', 'quality'],\n      OpenAIDalle2: ['size', 'n'],\n      OpenAIGPTImage1: ['quality', 'n'],\n      IdeogramV1: ['num_images', 'turbo'],\n      IdeogramV2: ['num_images', 'turbo'],\n      IdeogramV3: ['rendering_speed', 'num_images'],\n      FluxProKontextProNode: [],\n      FluxProKontextMaxNode: [],\n      VeoVideoGenerationNode: ['duration_seconds'],\n      Veo3VideoGenerationNode: ['model', 'generate_audio'],\n      LumaVideoNode: ['model', 'resolution', 'duration'],\n      LumaImageToVideoNode: ['model', 'resolution', 'duration'],\n      LumaImageNode: ['model', 'aspect_ratio'],\n      LumaImageModifyNode: ['model', 'aspect_ratio'],\n      PikaTextToVideoNode2_2: ['duration', 'resolution'],\n      PikaImageToVideoNode2_2: ['duration', 'resolution'],\n      PikaScenesV2_2: ['duration', 'resolution'],\n      PikaStartEndFrameNode2_2: ['duration', 'resolution'],\n      PixverseTextToVideoNode: ['duration_seconds', 'quality', 'motion_mode'],\n      PixverseTransitionVideoNode: [\n        'duration_seconds',\n        'motion_mode',\n        'quality'\n      ],\n      PixverseImageToVideoNode: ['duration_seconds', 'quality', 'motion_mode'],\n      StabilityStableImageSD_3_5Node: ['model'],\n      RecraftTextToImageNode: ['n'],\n      RecraftImageToImageNode: ['n'],\n      RecraftImageInpaintingNode: ['n'],\n      RecraftTextToVectorNode: ['n'],\n      RecraftVectorizeImageNode: ['n'],\n      RecraftGenerateColorFromImageNode: ['n'],\n      RecraftGenerateImageNode: ['n'],\n      RecraftGenerateVectorImageNode: ['n'],\n      MoonvalleyTxt2VideoNode: ['length'],\n      MoonvalleyImg2VideoNode: ['length'],\n      MoonvalleyVideo2VideoNode: ['length'],\n      // Runway nodes\n      RunwayImageToVideoNodeGen3a: ['duration'],\n      RunwayImageToVideoNodeGen4: ['duration'],\n      RunwayFirstLastFrameNode: ['duration'],\n      // Tripo nodes\n      TripoTextToModelNode: ['quad', 'style', 'texture', 'texture_quality'],\n      TripoImageToModelNode: ['quad', 'style', 'texture', 'texture_quality'],\n      TripoTextureNode: ['texture_quality'],\n      // Google/Gemini nodes\n      GeminiNode: ['model'],\n      // OpenAI nodes\n      OpenAIChatNode: ['model']\n    }\n    return widgetMap[nodeType] || []\n  }\n\n  return {\n    getNodeDisplayPrice,\n    getNodePricingConfig,\n    getRelevantWidgetNames\n  }\n}\n","import { computedWithControl } from '@vueuse/core'\nimport { type ComputedRef, ref } from 'vue'\n\nimport { useChainCallback } from '@/composables/functional/useChainCallback'\nimport type { LGraphNode } from '@/lib/litegraph/src/litegraph'\n\nexport interface UseComputedWithWidgetWatchOptions {\n  /**\n   * Names of widgets to observe for changes.\n   * If not provided, all widgets will be observed.\n   */\n  widgetNames?: string[]\n\n  /**\n   * Whether to trigger a canvas redraw when widget values change.\n   * @default false\n   */\n  triggerCanvasRedraw?: boolean\n}\n\n/**\n * A composable that creates a computed that has a node's widget values as a dependencies.\n * Essentially `computedWithControl` (https://vueuse.org/shared/computedWithControl/) where\n * the explicitly defined extra dependencies are LGraphNode widgets.\n *\n * @param node - The LGraphNode whose widget values are to be watched\n * @param options - Configuration options for the watcher\n * @returns A function to create computed that responds to widget changes\n *\n * @example\n * ```ts\n * const computedWithWidgetWatch = useComputedWithWidgetWatch(node, {\n *   widgetNames: ['width', 'height'],\n *   triggerCanvasRedraw: true\n * })\n *\n * const dynamicPrice = computedWithWidgetWatch(() => {\n *   return calculatePrice(node)\n * })\n * ```\n */\nexport const useComputedWithWidgetWatch = (\n  node: LGraphNode,\n  options: UseComputedWithWidgetWatchOptions = {}\n) => {\n  const { widgetNames, triggerCanvasRedraw = false } = options\n\n  // Create a reactive trigger based on widget values\n  const widgetValues = ref<Record<string, any>>({})\n\n  // Initialize widget observers\n  if (node.widgets) {\n    const widgetsToObserve = widgetNames\n      ? node.widgets.filter((widget) => widgetNames.includes(widget.name))\n      : node.widgets\n\n    // Initialize current values\n    const currentValues: Record<string, any> = {}\n    widgetsToObserve.forEach((widget) => {\n      currentValues[widget.name] = widget.value\n    })\n    widgetValues.value = currentValues\n\n    widgetsToObserve.forEach((widget) => {\n      widget.callback = useChainCallback(widget.callback, () => {\n        // Update the reactive widget values\n        widgetValues.value = {\n          ...widgetValues.value,\n          [widget.name]: widget.value\n        }\n\n        // Optionally trigger a canvas redraw\n        if (triggerCanvasRedraw) {\n          node.graph?.setDirtyCanvas(true, true)\n        }\n      })\n    })\n  }\n\n  // Returns a function that creates a computed that responds to widget changes.\n  // The computed will be re-evaluated whenever any observed widget changes.\n  return <T>(computeFn: () => T): ComputedRef<T> => {\n    return computedWithControl(widgetValues, computeFn)\n  }\n}\n","import _ from 'lodash'\nimport { computed, onMounted, watch } from 'vue'\n\nimport { useNodePricing } from '@/composables/node/useNodePricing'\nimport { useComputedWithWidgetWatch } from '@/composables/node/useWatchWidget'\nimport {\n  BadgePosition,\n  LGraphBadge,\n  type LGraphNode\n} from '@/lib/litegraph/src/litegraph'\nimport { app } from '@/scripts/app'\nimport { useExtensionStore } from '@/stores/extensionStore'\nimport { ComfyNodeDefImpl, useNodeDefStore } from '@/stores/nodeDefStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useColorPaletteStore } from '@/stores/workspace/colorPaletteStore'\nimport { NodeBadgeMode } from '@/types/nodeSource'\nimport { adjustColor } from '@/utils/colorUtil'\n\n/**\n * Add LGraphBadge to LGraphNode based on settings.\n *\n * Following badges are added:\n * - Node ID badge\n * - Node source badge\n * - Node life cycle badge\n * - API node credits badge\n */\nexport const useNodeBadge = () => {\n  const settingStore = useSettingStore()\n  const extensionStore = useExtensionStore()\n  const colorPaletteStore = useColorPaletteStore()\n\n  const nodeSourceBadgeMode = computed(\n    () =>\n      settingStore.get('Comfy.NodeBadge.NodeSourceBadgeMode') as NodeBadgeMode\n  )\n  const nodeIdBadgeMode = computed(\n    () => settingStore.get('Comfy.NodeBadge.NodeIdBadgeMode') as NodeBadgeMode\n  )\n  const nodeLifeCycleBadgeMode = computed(\n    () =>\n      settingStore.get(\n        'Comfy.NodeBadge.NodeLifeCycleBadgeMode'\n      ) as NodeBadgeMode\n  )\n\n  const showApiPricingBadge = computed(() =>\n    settingStore.get('Comfy.NodeBadge.ShowApiPricing')\n  )\n\n  watch(\n    [\n      nodeSourceBadgeMode,\n      nodeIdBadgeMode,\n      nodeLifeCycleBadgeMode,\n      showApiPricingBadge\n    ],\n    () => {\n      app.graph?.setDirtyCanvas(true, true)\n    }\n  )\n\n  const nodeDefStore = useNodeDefStore()\n  function badgeTextVisible(\n    nodeDef: ComfyNodeDefImpl | null,\n    badgeMode: NodeBadgeMode\n  ): boolean {\n    return !(\n      badgeMode === NodeBadgeMode.None ||\n      (nodeDef?.isCoreNode && badgeMode === NodeBadgeMode.HideBuiltIn)\n    )\n  }\n\n  onMounted(() => {\n    const nodePricing = useNodePricing()\n\n    extensionStore.registerExtension({\n      name: 'Comfy.NodeBadge',\n      nodeCreated(node: LGraphNode) {\n        node.badgePosition = BadgePosition.TopRight\n\n        const badge = computed(() => {\n          const nodeDef = nodeDefStore.fromLGraphNode(node)\n          return new LGraphBadge({\n            text: _.truncate(\n              [\n                badgeTextVisible(nodeDef, nodeIdBadgeMode.value)\n                  ? `#${node.id}`\n                  : '',\n                badgeTextVisible(nodeDef, nodeLifeCycleBadgeMode.value)\n                  ? nodeDef?.nodeLifeCycleBadgeText ?? ''\n                  : '',\n                badgeTextVisible(nodeDef, nodeSourceBadgeMode.value)\n                  ? nodeDef?.nodeSource?.badgeText ?? ''\n                  : ''\n              ]\n                .filter((s) => s.length > 0)\n                .join(' '),\n              {\n                length: 31\n              }\n            ),\n            fgColor:\n              colorPaletteStore.completedActivePalette.colors.litegraph_base\n                .BADGE_FG_COLOR,\n            bgColor:\n              colorPaletteStore.completedActivePalette.colors.litegraph_base\n                .BADGE_BG_COLOR\n          })\n        })\n\n        node.badges.push(() => badge.value)\n\n        if (node.constructor.nodeData?.api_node && showApiPricingBadge.value) {\n          // Get the pricing function to determine if this node has dynamic pricing\n          const pricingConfig = nodePricing.getNodePricingConfig(node)\n          const hasDynamicPricing =\n            typeof pricingConfig?.displayPrice === 'function'\n\n          let creditsBadge\n          const createBadge = () => {\n            const price = nodePricing.getNodeDisplayPrice(node)\n\n            const isLightTheme =\n              colorPaletteStore.completedActivePalette.light_theme\n            return new LGraphBadge({\n              text: price,\n              iconOptions: {\n                unicode: '\\ue96b',\n                fontFamily: 'PrimeIcons',\n                color: isLightTheme\n                  ? adjustColor('#FABC25', { lightness: 0.5 })\n                  : '#FABC25',\n                bgColor: isLightTheme\n                  ? adjustColor('#654020', { lightness: 0.5 })\n                  : '#654020',\n                fontSize: 8\n              },\n              fgColor:\n                colorPaletteStore.completedActivePalette.colors.litegraph_base\n                  .BADGE_FG_COLOR,\n              bgColor: isLightTheme\n                ? adjustColor('#8D6932', { lightness: 0.5 })\n                : '#8D6932'\n            })\n          }\n\n          if (hasDynamicPricing) {\n            // For dynamic pricing nodes, use computed that watches widget changes\n            const relevantWidgetNames = nodePricing.getRelevantWidgetNames(\n              node.constructor.nodeData?.name\n            )\n\n            const computedWithWidgetWatch = useComputedWithWidgetWatch(node, {\n              widgetNames: relevantWidgetNames,\n              triggerCanvasRedraw: true\n            })\n\n            creditsBadge = computedWithWidgetWatch(createBadge)\n          } else {\n            // For static pricing nodes, use regular computed\n            creditsBadge = computed(createBadge)\n          }\n\n          node.badges.push(() => creditsBadge.value)\n        }\n      }\n    })\n  })\n}\n","import { Ref } from 'vue'\n\nimport { usePragmaticDroppable } from '@/composables/usePragmaticDragAndDrop'\nimport { LGraphNode } from '@/lib/litegraph/src/litegraph'\nimport { LiteGraph } from '@/lib/litegraph/src/litegraph'\nimport { app as comfyApp } from '@/scripts/app'\nimport { useLitegraphService } from '@/services/litegraphService'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { ComfyModelDef } from '@/stores/modelStore'\nimport { ModelNodeProvider } from '@/stores/modelToNodeStore'\nimport { useModelToNodeStore } from '@/stores/modelToNodeStore'\nimport { ComfyNodeDefImpl } from '@/stores/nodeDefStore'\nimport { ComfyWorkflow } from '@/stores/workflowStore'\nimport { RenderedTreeExplorerNode } from '@/types/treeExplorerTypes'\n\nexport const useCanvasDrop = (canvasRef: Ref<HTMLCanvasElement>) => {\n  const modelToNodeStore = useModelToNodeStore()\n  const litegraphService = useLitegraphService()\n  const workflowService = useWorkflowService()\n\n  usePragmaticDroppable(() => canvasRef.value, {\n    getDropEffect: (args): Exclude<DataTransfer['dropEffect'], 'none'> =>\n      args.source.data.type === 'tree-explorer-node' ? 'copy' : 'move',\n    onDrop: async (event) => {\n      const loc = event.location.current.input\n      const dndData = event.source.data\n\n      if (dndData.type === 'tree-explorer-node') {\n        const node = dndData.data as RenderedTreeExplorerNode\n        if (node.data instanceof ComfyNodeDefImpl) {\n          const nodeDef = node.data\n          const pos = comfyApp.clientPosToCanvasPos([loc.clientX, loc.clientY])\n          // Add an offset on y to make sure after adding the node, the cursor\n          // is on the node (top left corner)\n          pos[1] += LiteGraph.NODE_TITLE_HEIGHT\n          litegraphService.addNodeOnGraph(nodeDef, { pos })\n        } else if (node.data instanceof ComfyModelDef) {\n          const model = node.data\n          const pos = comfyApp.clientPosToCanvasPos([loc.clientX, loc.clientY])\n          const nodeAtPos = comfyApp.graph.getNodeOnPos(pos[0], pos[1])\n          let targetProvider: ModelNodeProvider | null = null\n          let targetGraphNode: LGraphNode | null = null\n          if (nodeAtPos) {\n            const providers = modelToNodeStore.getAllNodeProviders(\n              model.directory\n            )\n            for (const provider of providers) {\n              if (provider.nodeDef.name === nodeAtPos.comfyClass) {\n                targetGraphNode = nodeAtPos\n                targetProvider = provider\n              }\n            }\n          }\n          if (!targetGraphNode) {\n            const provider = modelToNodeStore.getNodeProvider(model.directory)\n            if (provider) {\n              targetGraphNode = litegraphService.addNodeOnGraph(\n                provider.nodeDef,\n                {\n                  pos\n                }\n              )\n              targetProvider = provider\n            }\n          }\n          if (targetGraphNode) {\n            const widget = targetGraphNode.widgets?.find(\n              (widget) => widget.name === targetProvider?.key\n            )\n            if (widget) {\n              widget.value = model.file_name\n            }\n          }\n        } else if (node.data instanceof ComfyWorkflow) {\n          const workflow = node.data\n          const position = comfyApp.clientPosToCanvasPos([\n            loc.clientX,\n            loc.clientY\n          ])\n          await workflowService.insertWorkflow(workflow, { position })\n        }\n      }\n    }\n  })\n}\n","import { st, te } from '@/i18n'\nimport type {\n  IContextMenuOptions,\n  IContextMenuValue,\n  INodeInputSlot,\n  IWidget\n} from '@/lib/litegraph/src/litegraph'\nimport { LGraphCanvas, LiteGraph } from '@/lib/litegraph/src/litegraph'\nimport { normalizeI18nKey } from '@/utils/formatUtil'\n\n/**\n * Add translation for litegraph context menu.\n */\nexport const useContextMenuTranslation = () => {\n  const f = LGraphCanvas.prototype.getCanvasMenuOptions\n  const getCanvasCenterMenuOptions = function (\n    this: LGraphCanvas,\n    ...args: Parameters<typeof f>\n  ) {\n    const res = f.apply(this, args) as ReturnType<typeof f>\n    for (const item of res) {\n      if (item?.content) {\n        item.content = st(`contextMenu.${item.content}`, item.content)\n      }\n    }\n    return res\n  }\n\n  LGraphCanvas.prototype.getCanvasMenuOptions = getCanvasCenterMenuOptions\n\n  function translateMenus(\n    values: readonly (IContextMenuValue | string | null)[] | undefined,\n    options: IContextMenuOptions\n  ) {\n    if (!values) return\n    const reInput = /Convert (.*) to input/\n    const reWidget = /Convert (.*) to widget/\n    const cvt = st('contextMenu.Convert ', 'Convert ')\n    const tinp = st('contextMenu. to input', ' to input')\n    const twgt = st('contextMenu. to widget', ' to widget')\n    for (const value of values) {\n      if (typeof value === 'string') continue\n\n      translateMenus(value?.submenu?.options, options)\n      if (!value?.content) {\n        continue\n      }\n      if (te(`contextMenu.${value.content}`)) {\n        value.content = st(`contextMenu.${value.content}`, value.content)\n      }\n\n      // for capture translation text of input and widget\n      const extraInfo: any = options.extra || options.parentMenu?.options?.extra\n      // widgets and inputs\n      const matchInput = value.content?.match(reInput)\n      if (matchInput) {\n        let match = matchInput[1]\n        extraInfo?.inputs?.find((i: INodeInputSlot) => {\n          if (i.name != match) return false\n          match = i.label ? i.label : i.name\n        })\n        extraInfo?.widgets?.find((i: IWidget) => {\n          if (i.name != match) return false\n          match = i.label ? i.label : i.name\n        })\n        value.content = cvt + match + tinp\n        continue\n      }\n      const matchWidget = value.content?.match(reWidget)\n      if (matchWidget) {\n        let match = matchWidget[1]\n        extraInfo?.inputs?.find((i: INodeInputSlot) => {\n          if (i.name != match) return false\n          match = i.label ? i.label : i.name\n        })\n        extraInfo?.widgets?.find((i: IWidget) => {\n          if (i.name != match) return false\n          match = i.label ? i.label : i.name\n        })\n        value.content = cvt + match + twgt\n        continue\n      }\n    }\n  }\n\n  const OriginalContextMenu = LiteGraph.ContextMenu\n  function ContextMenu(\n    values: (IContextMenuValue | string)[],\n    options: IContextMenuOptions\n  ) {\n    if (options.title) {\n      options.title = st(\n        `nodeDefs.${normalizeI18nKey(options.title)}.display_name`,\n        options.title\n      )\n    }\n    translateMenus(values, options)\n    const ctx = new OriginalContextMenu(values, options)\n    return ctx\n  }\n\n  LiteGraph.ContextMenu = ContextMenu as unknown as typeof LiteGraph.ContextMenu\n  LiteGraph.ContextMenu.prototype = OriginalContextMenu.prototype\n}\n","import { useEventListener } from '@vueuse/core'\n\nimport { useCanvasStore } from '@/stores/graphStore'\n\n/**\n * Adds a handler on copy that serializes selected nodes to JSON\n */\nexport const useCopy = () => {\n  const canvasStore = useCanvasStore()\n\n  useEventListener(document, 'copy', (e) => {\n    if (!(e.target instanceof Element)) {\n      return\n    }\n    if (\n      (e.target instanceof HTMLTextAreaElement &&\n        e.target.type === 'textarea') ||\n      (e.target instanceof HTMLInputElement && e.target.type === 'text')\n    ) {\n      // Default system copy\n      return\n    }\n    const isTargetInGraph =\n      e.target.classList.contains('litegraph') ||\n      e.target.classList.contains('graph-canvas-container') ||\n      e.target.id === 'graph-canvas'\n\n    // copy nodes and clear clipboard\n    const canvas = canvasStore.canvas\n    if (isTargetInGraph && canvas?.selectedItems) {\n      canvas.copyToClipboard()\n      // clearData doesn't remove images from clipboard\n      e.clipboardData?.setData('text', ' ')\n      e.preventDefault()\n      e.stopImmediatePropagation()\n      return false\n    }\n  })\n}\n","import {\n  ContextMenu,\n  DragAndScale,\n  LGraph,\n  LGraphBadge,\n  LGraphCanvas,\n  LGraphGroup,\n  LGraphNode,\n  LLink,\n  LiteGraph\n} from '@/lib/litegraph/src/litegraph'\n\n/**\n * Assign all properties of LiteGraph to window to make it backward compatible.\n */\nexport const useGlobalLitegraph = () => {\n  // @ts-expect-error fixme ts strict error\n  window['LiteGraph'] = LiteGraph\n  // @ts-expect-error fixme ts strict error\n  window['LGraph'] = LGraph\n  // @ts-expect-error fixme ts strict error\n  window['LLink'] = LLink\n  // @ts-expect-error fixme ts strict error\n  window['LGraphNode'] = LGraphNode\n  // @ts-expect-error fixme ts strict error\n  window['LGraphGroup'] = LGraphGroup\n  // @ts-expect-error fixme ts strict error\n  window['DragAndScale'] = DragAndScale\n  // @ts-expect-error fixme ts strict error\n  window['LGraphCanvas'] = LGraphCanvas\n  // @ts-expect-error fixme ts strict error\n  window['ContextMenu'] = ContextMenu\n  // @ts-expect-error fixme ts strict error\n  window['LGraphBadge'] = LGraphBadge\n}\n","import { watchEffect } from 'vue'\n\nimport {\n  CanvasPointer,\n  LGraphNode,\n  LiteGraph\n} from '@/lib/litegraph/src/litegraph'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\n/**\n * Watch for changes in the setting store and update the LiteGraph settings accordingly.\n */\nexport const useLitegraphSettings = () => {\n  const settingStore = useSettingStore()\n  const canvasStore = useCanvasStore()\n\n  watchEffect(() => {\n    const canvasInfoEnabled = settingStore.get('Comfy.Graph.CanvasInfo')\n    if (canvasStore.canvas) {\n      canvasStore.canvas.show_info = canvasInfoEnabled\n    }\n  })\n\n  watchEffect(() => {\n    const zoomSpeed = settingStore.get('Comfy.Graph.ZoomSpeed')\n    if (canvasStore.canvas) {\n      canvasStore.canvas.zoom_speed = zoomSpeed\n    }\n  })\n\n  watchEffect(() => {\n    LiteGraph.snaps_for_comfy = settingStore.get(\n      'Comfy.Node.AutoSnapLinkToSlot'\n    )\n  })\n\n  watchEffect(() => {\n    LiteGraph.snap_highlights_node = settingStore.get(\n      'Comfy.Node.SnapHighlightsNode'\n    )\n  })\n\n  watchEffect(() => {\n    LGraphNode.keepAllLinksOnBypass = settingStore.get(\n      'Comfy.Node.BypassAllLinksOnDelete'\n    )\n  })\n\n  watchEffect(() => {\n    LiteGraph.middle_click_slot_add_default_node = settingStore.get(\n      'Comfy.Node.MiddleClickRerouteNode'\n    )\n  })\n\n  watchEffect(() => {\n    const linkRenderMode = settingStore.get('Comfy.LinkRenderMode')\n    if (canvasStore.canvas) {\n      canvasStore.canvas.links_render_mode = linkRenderMode\n      canvasStore.canvas.setDirty(/* fg */ false, /* bg */ true)\n    }\n  })\n\n  watchEffect(() => {\n    const lowQualityRenderingZoomThreshold = settingStore.get(\n      'LiteGraph.Canvas.LowQualityRenderingZoomThreshold'\n    )\n    if (canvasStore.canvas) {\n      canvasStore.canvas.low_quality_zoom_threshold =\n        lowQualityRenderingZoomThreshold\n      canvasStore.canvas.setDirty(/* fg */ true, /* bg */ true)\n    }\n  })\n\n  watchEffect(() => {\n    const linkMarkerShape = settingStore.get('Comfy.Graph.LinkMarkers')\n    const { canvas } = canvasStore\n    if (canvas) {\n      canvas.linkMarkerShape = linkMarkerShape\n      canvas.setDirty(false, true)\n    }\n  })\n\n  watchEffect(() => {\n    const maximumFps = settingStore.get('LiteGraph.Canvas.MaximumFps')\n    const { canvas } = canvasStore\n    if (canvas) canvas.maximumFps = maximumFps\n  })\n\n  watchEffect(() => {\n    const dragZoomEnabled = settingStore.get('Comfy.Graph.CtrlShiftZoom')\n    const { canvas } = canvasStore\n    if (canvas) canvas.dragZoomEnabled = dragZoomEnabled\n  })\n\n  watchEffect(() => {\n    CanvasPointer.doubleClickTime = settingStore.get(\n      'Comfy.Pointer.DoubleClickTime'\n    )\n  })\n\n  watchEffect(() => {\n    CanvasPointer.bufferTime = settingStore.get('Comfy.Pointer.ClickBufferTime')\n  })\n\n  watchEffect(() => {\n    CanvasPointer.maxClickDrift = settingStore.get('Comfy.Pointer.ClickDrift')\n  })\n\n  watchEffect(() => {\n    LiteGraph.CANVAS_GRID_SIZE = settingStore.get('Comfy.SnapToGrid.GridSize')\n  })\n\n  watchEffect(() => {\n    LiteGraph.alwaysSnapToGrid = settingStore.get('pysssss.SnapToGrid')\n  })\n\n  watchEffect(() => {\n    LiteGraph.context_menu_scaling = settingStore.get(\n      'LiteGraph.ContextMenu.Scaling'\n    )\n  })\n\n  watchEffect(() => {\n    LiteGraph.Reroute.maxSplineOffset = settingStore.get(\n      'LiteGraph.Reroute.SplineOffset'\n    )\n  })\n\n  watchEffect(() => {\n    const navigationMode = settingStore.get('Comfy.Canvas.NavigationMode') as\n      | 'standard'\n      | 'legacy'\n\n    LiteGraph.canvasNavigationMode = navigationMode\n    LiteGraph.macTrackpadGestures = navigationMode === 'standard'\n  })\n\n  watchEffect(() => {\n    LiteGraph.saveViewportWithGraph = settingStore.get(\n      'Comfy.EnableWorkflowViewRestore'\n    )\n  })\n}\n","import { useEventListener } from '@vueuse/core'\n\nimport { LiteGraph } from '@/lib/litegraph/src/litegraph'\nimport type { LGraphNode } from '@/lib/litegraph/src/litegraph'\nimport { ComfyWorkflowJSON } from '@/schemas/comfyWorkflowSchema'\nimport { app } from '@/scripts/app'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport { isAudioNode, isImageNode, isVideoNode } from '@/utils/litegraphUtil'\n\n/**\n * Adds a handler on paste that extracts and loads images or workflows from pasted JSON data\n */\nexport const usePaste = () => {\n  const workspaceStore = useWorkspaceStore()\n  const canvasStore = useCanvasStore()\n\n  const pasteItemsOnNode = (\n    items: DataTransferItemList,\n    node: LGraphNode | null,\n    contentType: string\n  ) => {\n    if (!node) return\n\n    const filteredItems = Array.from(items).filter((item) =>\n      item.type.startsWith(contentType)\n    )\n\n    const blob = filteredItems[0]?.getAsFile()\n    if (!blob) return\n\n    node.pasteFile?.(blob)\n    node.pasteFiles?.(\n      Array.from(filteredItems)\n        .map((i) => i.getAsFile())\n        .filter((f) => f !== null)\n    )\n  }\n\n  useEventListener(document, 'paste', async (e) => {\n    const isTargetInGraph =\n      e.target instanceof Element &&\n      (e.target.classList.contains('litegraph') ||\n        e.target.classList.contains('graph-canvas-container') ||\n        e.target.id === 'graph-canvas')\n\n    // If the target is not in the graph, we don't want to handle the paste event\n    if (!isTargetInGraph) return\n\n    // ctrl+shift+v is used to paste nodes with connections\n    // this is handled by litegraph\n    if (workspaceStore.shiftDown) return\n\n    const { canvas } = canvasStore\n    if (!canvas) return\n\n    const { graph } = canvas\n    let data: DataTransfer | string | null = e.clipboardData\n    if (!data) throw new Error('No clipboard data on clipboard event')\n\n    const { items } = data\n\n    const currentNode = canvas.current_node as LGraphNode\n    const isNodeSelected = currentNode?.is_selected\n\n    const isImageNodeSelected = isNodeSelected && isImageNode(currentNode)\n    const isVideoNodeSelected = isNodeSelected && isVideoNode(currentNode)\n    const isAudioNodeSelected = isNodeSelected && isAudioNode(currentNode)\n\n    let imageNode: LGraphNode | null = isImageNodeSelected ? currentNode : null\n    let audioNode: LGraphNode | null = isAudioNodeSelected ? currentNode : null\n    const videoNode: LGraphNode | null = isVideoNodeSelected\n      ? currentNode\n      : null\n\n    // Look for image paste data\n    for (const item of items) {\n      if (item.type.startsWith('image/')) {\n        if (!imageNode) {\n          // No image node selected: add a new one\n          const newNode = LiteGraph.createNode('LoadImage')\n          if (newNode) {\n            newNode.pos = [canvas.graph_mouse[0], canvas.graph_mouse[1]]\n            imageNode = graph?.add(newNode) ?? null\n          }\n          graph?.change()\n        }\n        pasteItemsOnNode(items, imageNode, 'image')\n        return\n      } else if (item.type.startsWith('video/')) {\n        if (!videoNode) {\n          // No video node selected: add a new one\n          // TODO: when video node exists\n        } else {\n          pasteItemsOnNode(items, videoNode, 'video')\n          return\n        }\n      } else if (item.type.startsWith('audio/')) {\n        if (!audioNode) {\n          // No audio node selected: add a new one\n          const newNode = LiteGraph.createNode('LoadAudio')\n          if (newNode) {\n            newNode.pos = [canvas.graph_mouse[0], canvas.graph_mouse[1]]\n            audioNode = graph?.add(newNode) ?? null\n          }\n          graph?.change()\n        }\n        pasteItemsOnNode(items, audioNode, 'audio')\n        return\n      }\n    }\n\n    // No image found. Look for node data\n    data = data.getData('text/plain')\n    let workflow: ComfyWorkflowJSON | null = null\n    try {\n      data = data.slice(data.indexOf('{'))\n      workflow = JSON.parse(data)\n    } catch (err) {\n      try {\n        data = data.slice(data.indexOf('workflow\\n'))\n        data = data.slice(data.indexOf('{'))\n        workflow = JSON.parse(data)\n      } catch (error) {\n        workflow = null\n      }\n    }\n\n    if (workflow && workflow.version && workflow.nodes && workflow.extra) {\n      await app.loadGraphData(workflow)\n    } else {\n      if (\n        (e.target instanceof HTMLTextAreaElement &&\n          e.target.type === 'textarea') ||\n        (e.target instanceof HTMLInputElement && e.target.type === 'text')\n      ) {\n        return\n      }\n\n      // Litegraph default paste\n      canvas.pasteFromClipboard()\n    }\n  })\n}\n","import { computed, onUnmounted, watch } from 'vue'\n\nimport { api } from '@/scripts/api'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\n\nexport function useWorkflowAutoSave() {\n  const workflowStore = useWorkflowStore()\n  const settingStore = useSettingStore()\n  const workflowService = useWorkflowService()\n\n  // Use computed refs to cache autosave settings\n  const autoSaveSetting = computed(() =>\n    settingStore.get('Comfy.Workflow.AutoSave')\n  )\n  const autoSaveDelay = computed(() =>\n    settingStore.get('Comfy.Workflow.AutoSaveDelay')\n  )\n\n  let autoSaveTimeout: NodeJS.Timeout | null = null\n  let isSaving = false\n  let needsAutoSave = false\n\n  const scheduleAutoSave = () => {\n    // Clear any existing timeout\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout)\n      autoSaveTimeout = null\n    }\n\n    // If autosave is enabled\n    if (autoSaveSetting.value === 'after delay') {\n      // If a save is in progress, mark that we need an autosave after saving\n      if (isSaving) {\n        needsAutoSave = true\n        return\n      }\n      const delay = autoSaveDelay.value\n      autoSaveTimeout = setTimeout(async () => {\n        const activeWorkflow = workflowStore.activeWorkflow\n        if (activeWorkflow?.isModified && activeWorkflow.isPersisted) {\n          try {\n            isSaving = true\n            await workflowService.saveWorkflow(activeWorkflow)\n          } catch (err) {\n            console.error('Auto save failed:', err)\n          } finally {\n            isSaving = false\n            if (needsAutoSave) {\n              needsAutoSave = false\n              scheduleAutoSave()\n            }\n          }\n        }\n      }, delay)\n    }\n  }\n\n  // Watch for autosave setting changes\n  watch(\n    autoSaveSetting,\n    (newSetting) => {\n      // Clear any existing timeout when settings change\n      if (autoSaveTimeout) {\n        clearTimeout(autoSaveTimeout)\n        autoSaveTimeout = null\n      }\n\n      // If there's an active modified workflow and autosave is enabled, schedule a save\n      if (\n        newSetting === 'after delay' &&\n        workflowStore.activeWorkflow?.isModified\n      ) {\n        scheduleAutoSave()\n      }\n    },\n    { immediate: true }\n  )\n\n  // Listen for graph changes and schedule autosave when they occur\n  const onGraphChanged = () => {\n    scheduleAutoSave()\n  }\n\n  api.addEventListener('graphChanged', onGraphChanged)\n\n  onUnmounted(() => {\n    if (autoSaveTimeout) {\n      clearTimeout(autoSaveTimeout)\n      autoSaveTimeout = null\n    }\n    api.removeEventListener('graphChanged', onGraphChanged)\n  })\n}\n","import { computed, watch } from 'vue'\n\nimport { api } from '@/scripts/api'\nimport { app as comfyApp } from '@/scripts/app'\nimport { getStorageValue, setStorageValue } from '@/scripts/utils'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\n\nexport function useWorkflowPersistence() {\n  const workflowStore = useWorkflowStore()\n  const settingStore = useSettingStore()\n\n  const workflowPersistenceEnabled = computed(() =>\n    settingStore.get('Comfy.Workflow.Persist')\n  )\n\n  const persistCurrentWorkflow = () => {\n    if (!workflowPersistenceEnabled.value) return\n    const workflow = JSON.stringify(comfyApp.graph.serialize())\n    localStorage.setItem('workflow', workflow)\n    if (api.clientId) {\n      sessionStorage.setItem(`workflow:${api.clientId}`, workflow)\n    }\n  }\n\n  const loadWorkflowFromStorage = async (\n    json: string | null,\n    workflowName: string | null\n  ) => {\n    if (!json) return false\n    const workflow = JSON.parse(json)\n    await comfyApp.loadGraphData(workflow, true, true, workflowName)\n    return true\n  }\n\n  const loadPreviousWorkflowFromStorage = async () => {\n    const workflowName = getStorageValue('Comfy.PreviousWorkflow')\n    const clientId = api.initialClientId ?? api.clientId\n\n    // Try loading from session storage first\n    if (clientId) {\n      const sessionWorkflow = sessionStorage.getItem(`workflow:${clientId}`)\n      if (await loadWorkflowFromStorage(sessionWorkflow, workflowName)) {\n        return true\n      }\n    }\n\n    // Fall back to local storage\n    const localWorkflow = localStorage.getItem('workflow')\n    return await loadWorkflowFromStorage(localWorkflow, workflowName)\n  }\n\n  const loadDefaultWorkflow = async () => {\n    if (!settingStore.get('Comfy.TutorialCompleted')) {\n      await settingStore.set('Comfy.TutorialCompleted', true)\n      await useWorkflowService().loadBlankWorkflow()\n      await useCommandStore().execute('Comfy.BrowseTemplates')\n    } else {\n      await comfyApp.loadGraphData()\n    }\n  }\n\n  const restorePreviousWorkflow = async () => {\n    if (!workflowPersistenceEnabled.value) return\n    try {\n      const restored = await loadPreviousWorkflowFromStorage()\n      if (!restored) {\n        await loadDefaultWorkflow()\n      }\n    } catch (err) {\n      console.error('Error loading previous workflow', err)\n      await loadDefaultWorkflow()\n    }\n  }\n\n  // Setup watchers\n  watch(\n    () => workflowStore.activeWorkflow?.key,\n    (activeWorkflowKey) => {\n      if (!activeWorkflowKey) return\n      setStorageValue('Comfy.PreviousWorkflow', activeWorkflowKey)\n      // When the activeWorkflow changes, the graph has already been loaded.\n      // Saving the current state of the graph to the localStorage.\n      persistCurrentWorkflow()\n    }\n  )\n  api.addEventListener('graphChanged', persistCurrentWorkflow)\n\n  // Restore workflow tabs states\n  const openWorkflows = computed(() => workflowStore.openWorkflows)\n  const activeWorkflow = computed(() => workflowStore.activeWorkflow)\n  const restoreState = computed<{ paths: string[]; activeIndex: number }>(\n    () => {\n      if (!openWorkflows.value || !activeWorkflow.value) {\n        return { paths: [], activeIndex: -1 }\n      }\n\n      const paths = openWorkflows.value\n        .filter((workflow) => workflow?.isPersisted && !workflow.isModified)\n        .map((workflow) => workflow.path)\n      const activeIndex = openWorkflows.value.findIndex(\n        (workflow) => workflow.path === activeWorkflow.value?.path\n      )\n\n      return { paths, activeIndex }\n    }\n  )\n\n  // Get storage values before setting watchers\n  const storedWorkflows = JSON.parse(\n    getStorageValue('Comfy.OpenWorkflowsPaths') || '[]'\n  )\n  const storedActiveIndex = JSON.parse(\n    getStorageValue('Comfy.ActiveWorkflowIndex') || '-1'\n  )\n\n  watch(restoreState, ({ paths, activeIndex }) => {\n    if (workflowPersistenceEnabled.value) {\n      setStorageValue('Comfy.OpenWorkflowsPaths', JSON.stringify(paths))\n      setStorageValue('Comfy.ActiveWorkflowIndex', JSON.stringify(activeIndex))\n    }\n  })\n\n  const restoreWorkflowTabsState = () => {\n    if (!workflowPersistenceEnabled.value) return\n    const isRestorable = storedWorkflows?.length > 0 && storedActiveIndex >= 0\n    if (isRestorable) {\n      workflowStore.openWorkflowsInBackground({\n        left: storedWorkflows.slice(0, storedActiveIndex),\n        right: storedWorkflows.slice(storedActiveIndex)\n      })\n    }\n  }\n\n  return {\n    restorePreviousWorkflow,\n    restoreWorkflowTabsState\n  }\n}\n","import { LinkMarkerShape, LiteGraph } from '@/lib/litegraph/src/litegraph'\nimport type { ColorPalettes } from '@/schemas/colorPaletteSchema'\nimport type { Keybinding } from '@/schemas/keyBindingSchema'\nimport { NodeBadgeMode } from '@/types/nodeSource'\nimport { LinkReleaseTriggerAction } from '@/types/searchBoxTypes'\nimport type { SettingParams } from '@/types/settingTypes'\n\n/**\n * Core settings are essential configuration parameters required for ComfyUI's basic functionality.\n * These settings must be present in the settings store and cannot be omitted.\n *\n * IMPORTANT: To prevent ID conflicts, settings should be marked as deprecated rather than removed\n * when they are no longer needed.\n */\nexport const CORE_SETTINGS: SettingParams[] = [\n  {\n    id: 'Comfy.Validation.Workflows',\n    name: 'Validate workflows',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.NodeSearchBoxImpl',\n    category: ['Comfy', 'Node Search Box', 'Implementation'],\n    experimental: true,\n    name: 'Node search box implementation',\n    type: 'combo',\n    options: ['default', 'litegraph (legacy)'],\n    defaultValue: 'default'\n  },\n  {\n    id: 'Comfy.LinkRelease.Action',\n    category: ['LiteGraph', 'LinkRelease', 'Action'],\n    name: 'Action on link release (No modifier)',\n    type: 'combo',\n    options: Object.values(LinkReleaseTriggerAction),\n    defaultValue: LinkReleaseTriggerAction.CONTEXT_MENU,\n    defaultsByInstallVersion: {\n      '1.24.1': LinkReleaseTriggerAction.SEARCH_BOX\n    }\n  },\n  {\n    id: 'Comfy.LinkRelease.ActionShift',\n    category: ['LiteGraph', 'LinkRelease', 'ActionShift'],\n    name: 'Action on link release (Shift)',\n    type: 'combo',\n    options: Object.values(LinkReleaseTriggerAction),\n    defaultValue: LinkReleaseTriggerAction.SEARCH_BOX,\n    defaultsByInstallVersion: {\n      '1.24.1': LinkReleaseTriggerAction.CONTEXT_MENU\n    }\n  },\n  {\n    id: 'Comfy.NodeSearchBoxImpl.NodePreview',\n    category: ['Comfy', 'Node Search Box', 'NodePreview'],\n    name: 'Node preview',\n    tooltip: 'Only applies to the default implementation',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.NodeSearchBoxImpl.ShowCategory',\n    category: ['Comfy', 'Node Search Box', 'ShowCategory'],\n    name: 'Show node category in search results',\n    tooltip: 'Only applies to the default implementation',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.NodeSearchBoxImpl.ShowIdName',\n    category: ['Comfy', 'Node Search Box', 'ShowIdName'],\n    name: 'Show node id name in search results',\n    tooltip: 'Only applies to the default implementation',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.NodeSearchBoxImpl.ShowNodeFrequency',\n    category: ['Comfy', 'Node Search Box', 'ShowNodeFrequency'],\n    name: 'Show node frequency in search results',\n    tooltip: 'Only applies to the default implementation',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.Sidebar.Location',\n    category: ['Appearance', 'Sidebar', 'Location'],\n    name: 'Sidebar location',\n    type: 'combo',\n    options: ['left', 'right'],\n    defaultValue: 'left'\n  },\n  {\n    id: 'Comfy.Sidebar.Size',\n    category: ['Appearance', 'Sidebar', 'Size'],\n    name: 'Sidebar size',\n    type: 'combo',\n    options: ['normal', 'small'],\n    // Default to small if the window is less than 1536px(2xl) wide.\n    defaultValue: () => (window.innerWidth < 1536 ? 'small' : 'normal')\n  },\n  {\n    id: 'Comfy.Sidebar.UnifiedWidth',\n    category: ['Appearance', 'Sidebar', 'UnifiedWidth'],\n    name: 'Unified sidebar width',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.18.1'\n  },\n  {\n    id: 'Comfy.TextareaWidget.FontSize',\n    category: ['Appearance', 'Node Widget', 'TextareaWidget', 'FontSize'],\n    name: 'Textarea widget font size',\n    type: 'slider',\n    defaultValue: 10,\n    attrs: {\n      min: 8,\n      max: 24\n    }\n  },\n  {\n    id: 'Comfy.TextareaWidget.Spellcheck',\n    category: ['Comfy', 'Node Widget', 'TextareaWidget', 'Spellcheck'],\n    name: 'Textarea widget spellcheck',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.Workflow.SortNodeIdOnSave',\n    name: 'Sort node IDs when saving workflow',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.Graph.CanvasInfo',\n    category: ['LiteGraph', 'Canvas', 'CanvasInfo'],\n    name: 'Show canvas info on bottom left corner (fps, etc.)',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Node.ShowDeprecated',\n    name: 'Show deprecated nodes in search',\n    tooltip:\n      'Deprecated nodes are hidden by default in the UI, but remain functional in existing workflows that use them.',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.Node.ShowExperimental',\n    name: 'Show experimental nodes in search',\n    tooltip:\n      'Experimental nodes are marked as such in the UI and may be subject to significant changes or removal in future versions. Use with caution in production workflows',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Node.Opacity',\n    category: ['Appearance', 'Node', 'Opacity'],\n    name: 'Node opacity',\n    type: 'slider',\n    defaultValue: 1,\n    attrs: {\n      min: 0.01,\n      max: 1,\n      step: 0.01\n    }\n  },\n  {\n    id: 'Comfy.Workflow.ShowMissingNodesWarning',\n    name: 'Show missing nodes warning',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Workflow.ShowMissingModelsWarning',\n    name: 'Show missing models warning',\n    type: 'boolean',\n    defaultValue: true,\n    experimental: true\n  },\n  {\n    id: 'Comfy.Graph.ZoomSpeed',\n    category: ['LiteGraph', 'Canvas', 'ZoomSpeed'],\n    name: 'Canvas zoom speed',\n    type: 'slider',\n    defaultValue: 1.1,\n    attrs: {\n      min: 1.01,\n      max: 2.5,\n      step: 0.01\n    }\n  },\n  // Bookmarks are stored in the settings store.\n  // Bookmarks are in format of category/display_name. e.g. \"conditioning/CLIPTextEncode\"\n  {\n    id: 'Comfy.NodeLibrary.Bookmarks',\n    name: 'Node library bookmarks with display name (deprecated)',\n    type: 'hidden',\n    defaultValue: [],\n    deprecated: true\n  },\n  {\n    id: 'Comfy.NodeLibrary.Bookmarks.V2',\n    name: 'Node library bookmarks v2 with unique name',\n    type: 'hidden',\n    defaultValue: []\n  },\n  // Stores mapping from bookmark folder name to its customization.\n  {\n    id: 'Comfy.NodeLibrary.BookmarksCustomization',\n    name: 'Node library bookmarks customization',\n    type: 'hidden',\n    defaultValue: {}\n  },\n  // Hidden setting used by the queue for how to fit images\n  {\n    id: 'Comfy.Queue.ImageFit',\n    name: 'Queue image fit',\n    type: 'hidden',\n    defaultValue: 'cover'\n  },\n  {\n    id: 'Comfy.GroupSelectedNodes.Padding',\n    category: ['LiteGraph', 'Group', 'Padding'],\n    name: 'Group selected nodes padding',\n    type: 'slider',\n    defaultValue: 10,\n    attrs: {\n      min: 0,\n      max: 100\n    }\n  },\n  {\n    id: 'Comfy.Node.DoubleClickTitleToEdit',\n    category: ['LiteGraph', 'Node', 'DoubleClickTitleToEdit'],\n    name: 'Double click node title to edit',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Node.AllowImageSizeDraw',\n    category: ['LiteGraph', 'Node Widget', 'AllowImageSizeDraw'],\n    name: 'Show width  height below the image preview',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Group.DoubleClickTitleToEdit',\n    category: ['LiteGraph', 'Group', 'DoubleClickTitleToEdit'],\n    name: 'Double click group title to edit',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Window.UnloadConfirmation',\n    name: 'Show confirmation when closing window',\n    type: 'boolean',\n    defaultValue: true,\n    versionModified: '1.7.12'\n  },\n  {\n    id: 'Comfy.TreeExplorer.ItemPadding',\n    category: ['Appearance', 'Tree Explorer', 'ItemPadding'],\n    name: 'Tree explorer item padding',\n    type: 'slider',\n    defaultValue: 2,\n    attrs: {\n      min: 0,\n      max: 8,\n      step: 1\n    }\n  },\n  {\n    id: 'Comfy.ModelLibrary.AutoLoadAll',\n    name: 'Automatically load all model folders',\n    tooltip:\n      'If true, all folders will load as soon as you open the model library (this may cause delays while it loads). If false, root level model folders will only load once you click on them.',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.ModelLibrary.NameFormat',\n    name: 'What name to display in the model library tree view',\n    tooltip:\n      'Select \"filename\" to render a simplified view of the raw filename (without directory or \".safetensors\" extension) in the model list. Select \"title\" to display the configurable model metadata title.',\n    type: 'combo',\n    options: ['filename', 'title'],\n    defaultValue: 'title'\n  },\n  {\n    id: 'Comfy.Locale',\n    name: 'Language',\n    type: 'combo',\n    options: [\n      { value: 'en', text: 'English' },\n      { value: 'zh', text: '' },\n      { value: 'zh-TW', text: '' },\n      { value: 'ru', text: '' },\n      { value: 'ja', text: '' },\n      { value: 'ko', text: '' },\n      { value: 'fr', text: 'Franais' },\n      { value: 'es', text: 'Espaol' },\n      { value: 'ar', text: '' }\n    ],\n    defaultValue: () => navigator.language.split('-')[0] || 'en'\n  },\n  {\n    id: 'Comfy.NodeBadge.NodeSourceBadgeMode',\n    category: ['LiteGraph', 'Node', 'NodeSourceBadgeMode'],\n    name: 'Node source badge mode',\n    type: 'combo',\n    options: Object.values(NodeBadgeMode),\n    defaultValue: NodeBadgeMode.HideBuiltIn\n  },\n  {\n    id: 'Comfy.NodeBadge.NodeIdBadgeMode',\n    category: ['LiteGraph', 'Node', 'NodeIdBadgeMode'],\n    name: 'Node ID badge mode',\n    type: 'combo',\n    options: [NodeBadgeMode.None, NodeBadgeMode.ShowAll],\n    defaultValue: NodeBadgeMode.None\n  },\n  {\n    id: 'Comfy.NodeBadge.NodeLifeCycleBadgeMode',\n    category: ['LiteGraph', 'Node', 'NodeLifeCycleBadgeMode'],\n    name: 'Node life cycle badge mode',\n    type: 'combo',\n    options: [NodeBadgeMode.None, NodeBadgeMode.ShowAll],\n    defaultValue: NodeBadgeMode.ShowAll\n  },\n  {\n    id: 'Comfy.NodeBadge.ShowApiPricing',\n    category: ['Comfy', 'API Nodes'],\n    name: 'Show API node pricing badge',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.20.3'\n  },\n  {\n    id: 'Comfy.Notification.ShowVersionUpdates',\n    category: ['Comfy', 'Notification Preferences'],\n    name: 'Show version updates',\n    tooltip: 'Show updates for new models, and major new features.',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.ConfirmClear',\n    category: ['Comfy', 'Workflow', 'ConfirmClear'],\n    name: 'Require confirmation when clearing workflow',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.PromptFilename',\n    category: ['Comfy', 'Workflow', 'PromptFilename'],\n    name: 'Prompt for filename when saving workflow',\n    type: 'boolean',\n    defaultValue: true\n  },\n  /**\n   * file format for preview\n   *\n   * format;quality\n   *\n   * ex)\n   * webp;50 -> webp, quality 50\n   * jpeg;80 -> rgb, jpeg, quality 80\n   *\n   * @type {string}\n   */\n  {\n    id: 'Comfy.PreviewFormat',\n    category: ['LiteGraph', 'Node Widget', 'PreviewFormat'],\n    name: 'Preview image format',\n    tooltip:\n      'When displaying a preview in the image widget, convert it to a lightweight image, e.g. webp, jpeg, webp;50, etc.',\n    type: 'text',\n    defaultValue: ''\n  },\n  {\n    id: 'Comfy.DisableSliders',\n    category: ['LiteGraph', 'Node Widget', 'DisableSliders'],\n    name: 'Disable node widget sliders',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.DisableFloatRounding',\n    category: ['LiteGraph', 'Node Widget', 'DisableFloatRounding'],\n    name: 'Disable default float widget rounding.',\n    tooltip:\n      '(requires page reload) Cannot disable round when round is set by the node in the backend.',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'Comfy.FloatRoundingPrecision',\n    category: ['LiteGraph', 'Node Widget', 'FloatRoundingPrecision'],\n    name: 'Float widget rounding decimal places [0 = auto].',\n    tooltip: '(requires page reload)',\n    type: 'slider',\n    attrs: {\n      min: 0,\n      max: 6,\n      step: 1\n    },\n    defaultValue: 0\n  },\n  {\n    id: 'LiteGraph.Node.TooltipDelay',\n    name: 'Tooltip Delay',\n    type: 'number',\n    attrs: {\n      min: 100,\n      max: 3000,\n      step: 50\n    },\n    defaultValue: 500,\n    versionAdded: '1.9.0'\n  },\n  {\n    id: 'Comfy.EnableTooltips',\n    category: ['LiteGraph', 'Node', 'EnableTooltips'],\n    name: 'Enable Tooltips',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.DevMode',\n    name: 'Enable dev mode options (API save, etc.)',\n    type: 'boolean',\n    defaultValue: false,\n    onChange: (value) => {\n      const element = document.getElementById('comfy-dev-save-api-button')\n      if (element) {\n        element.style.display = value ? 'flex' : 'none'\n      }\n    }\n  },\n  {\n    id: 'Comfy.UseNewMenu',\n    category: ['Comfy', 'Menu', 'UseNewMenu'],\n    defaultValue: 'Top',\n    name: 'Use new menu',\n    type: 'combo',\n    options: ['Disabled', 'Top', 'Bottom'],\n    tooltip:\n      'Menu bar position. On mobile devices, the menu is always shown at the top.',\n    migrateDeprecatedValue: (value: string) => {\n      // Floating is now supported by dragging the docked actionbar off.\n      if (value === 'Floating') {\n        return 'Top'\n      }\n      return value\n    }\n  },\n  {\n    id: 'Comfy.Workflow.WorkflowTabsPosition',\n    name: 'Opened workflows position',\n    type: 'combo',\n    options: ['Sidebar', 'Topbar', 'Topbar (2nd-row)'],\n    // Default to topbar (2nd-row) if the window is less than 1536px(2xl) wide.\n    defaultValue: () =>\n      window.innerWidth < 1536 ? 'Topbar (2nd-row)' : 'Topbar'\n  },\n  {\n    id: 'Comfy.Graph.CanvasMenu',\n    category: ['LiteGraph', 'Canvas', 'CanvasMenu'],\n    name: 'Show graph canvas menu',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.QueueButton.BatchCountLimit',\n    name: 'Batch count limit',\n    tooltip:\n      'The maximum number of tasks added to the queue at one button click',\n    type: 'number',\n    defaultValue: 100,\n    versionAdded: '1.3.5'\n  },\n  {\n    id: 'Comfy.Keybinding.UnsetBindings',\n    name: 'Keybindings unset by the user',\n    type: 'hidden',\n    defaultValue: [] as Keybinding[],\n    versionAdded: '1.3.7',\n    versionModified: '1.7.3',\n    migrateDeprecatedValue: (value: any[]) => {\n      return value.map((keybinding) => {\n        if (keybinding['targetSelector'] === '#graph-canvas') {\n          keybinding['targetElementId'] = 'graph-canvas'\n        }\n        return keybinding\n      })\n    }\n  },\n  {\n    id: 'Comfy.Keybinding.NewBindings',\n    name: 'Keybindings set by the user',\n    type: 'hidden',\n    defaultValue: [] as Keybinding[],\n    versionAdded: '1.3.7'\n  },\n  {\n    id: 'Comfy.Extension.Disabled',\n    name: 'Disabled extension names',\n    type: 'hidden',\n    defaultValue: [] as string[],\n    versionAdded: '1.3.11'\n  },\n  {\n    id: 'Comfy.LinkRenderMode',\n    category: ['LiteGraph', 'Graph', 'LinkRenderMode'],\n    name: 'Link Render Mode',\n    defaultValue: 2,\n    type: 'combo',\n    options: [\n      { value: LiteGraph.STRAIGHT_LINK, text: 'Straight' },\n      { value: LiteGraph.LINEAR_LINK, text: 'Linear' },\n      { value: LiteGraph.SPLINE_LINK, text: 'Spline' },\n      { value: LiteGraph.HIDDEN_LINK, text: 'Hidden' }\n    ]\n  },\n  {\n    id: 'Comfy.Node.AutoSnapLinkToSlot',\n    category: ['LiteGraph', 'Node', 'AutoSnapLinkToSlot'],\n    name: 'Auto snap link to node slot',\n    tooltip:\n      'When dragging a link over a node, the link automatically snap to a viable input slot on the node',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.3.29'\n  },\n  {\n    id: 'Comfy.Node.SnapHighlightsNode',\n    category: ['LiteGraph', 'Node', 'SnapHighlightsNode'],\n    name: 'Snap highlights node',\n    tooltip:\n      'When dragging a link over a node with viable input slot, highlight the node',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.3.29'\n  },\n  {\n    id: 'Comfy.Node.BypassAllLinksOnDelete',\n    category: ['LiteGraph', 'Node', 'BypassAllLinksOnDelete'],\n    name: 'Keep all links when deleting nodes',\n    tooltip:\n      'When deleting a node, attempt to reconnect all of its input and output links (bypassing the deleted node)',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.3.40'\n  },\n  {\n    id: 'Comfy.Node.MiddleClickRerouteNode',\n    category: ['LiteGraph', 'Node', 'MiddleClickRerouteNode'],\n    name: 'Middle-click creates a new Reroute node',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.3.42'\n  },\n  {\n    id: 'Comfy.Graph.LinkMarkers',\n    category: ['LiteGraph', 'Link', 'LinkMarkers'],\n    name: 'Link midpoint markers',\n    defaultValue: LinkMarkerShape.Circle,\n    type: 'combo',\n    options: [\n      { value: LinkMarkerShape.None, text: 'None' },\n      { value: LinkMarkerShape.Circle, text: 'Circle' },\n      { value: LinkMarkerShape.Arrow, text: 'Arrow' }\n    ],\n    versionAdded: '1.3.42'\n  },\n  {\n    id: 'Comfy.DOMClippingEnabled',\n    category: ['LiteGraph', 'Node', 'DOMClippingEnabled'],\n    name: 'Enable DOM element clipping (enabling may reduce performance)',\n    type: 'boolean',\n    defaultValue: true\n  },\n  {\n    id: 'Comfy.Graph.CtrlShiftZoom',\n    category: ['LiteGraph', 'Canvas', 'CtrlShiftZoom'],\n    name: 'Enable fast-zoom shortcut (Ctrl + Shift + Drag)',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.4.0'\n  },\n  {\n    id: 'Comfy.Pointer.ClickDrift',\n    category: ['LiteGraph', 'Pointer', 'ClickDrift'],\n    name: 'Pointer click drift (maximum distance)',\n    tooltip:\n      'If the pointer moves more than this distance while holding a button down, it is considered dragging (rather than clicking).\\n\\nHelps prevent objects from being unintentionally nudged if the pointer is moved whilst clicking.',\n    experimental: true,\n    type: 'slider',\n    attrs: {\n      min: 0,\n      max: 20,\n      step: 1\n    },\n    defaultValue: 6,\n    versionAdded: '1.4.3'\n  },\n  {\n    id: 'Comfy.Pointer.ClickBufferTime',\n    category: ['LiteGraph', 'Pointer', 'ClickBufferTime'],\n    name: 'Pointer click drift delay',\n    tooltip:\n      'After pressing a pointer button down, this is the maximum time (in milliseconds) that pointer movement can be ignored for.\\n\\nHelps prevent objects from being unintentionally nudged if the pointer is moved whilst clicking.',\n    experimental: true,\n    type: 'slider',\n    attrs: {\n      min: 0,\n      max: 1000,\n      step: 25\n    },\n    defaultValue: 150,\n    versionAdded: '1.4.3'\n  },\n  {\n    id: 'Comfy.Pointer.DoubleClickTime',\n    category: ['LiteGraph', 'Pointer', 'DoubleClickTime'],\n    name: 'Double click interval (maximum)',\n    tooltip:\n      'The maximum time in milliseconds between the two clicks of a double-click.  Increasing this value may assist if double-clicks are sometimes not registered.',\n    type: 'slider',\n    attrs: {\n      min: 100,\n      max: 1000,\n      step: 50\n    },\n    defaultValue: 300,\n    versionAdded: '1.4.3'\n  },\n  {\n    id: 'Comfy.SnapToGrid.GridSize',\n    category: ['LiteGraph', 'Canvas', 'GridSize'],\n    name: 'Snap to grid size',\n    type: 'slider',\n    attrs: {\n      min: 1,\n      max: 500\n    },\n    tooltip:\n      'When dragging and resizing nodes while holding shift they will be aligned to the grid, this controls the size of that grid.',\n    defaultValue: LiteGraph.CANVAS_GRID_SIZE\n  },\n  // Keep the 'pysssss.SnapToGrid' setting id so we don't need to migrate setting values.\n  // Using a new setting id can cause existing users to lose their existing settings.\n  {\n    id: 'pysssss.SnapToGrid',\n    category: ['LiteGraph', 'Canvas', 'AlwaysSnapToGrid'],\n    name: 'Always snap to grid',\n    type: 'boolean',\n    defaultValue: false,\n    versionAdded: '1.3.13'\n  },\n  {\n    id: 'Comfy.Server.ServerConfigValues',\n    name: 'Server config values for frontend display',\n    tooltip: 'Server config values used for frontend display only',\n    type: 'hidden',\n    // Mapping from server config id to value.\n    defaultValue: {} as Record<string, any>,\n    versionAdded: '1.4.8'\n  },\n  {\n    id: 'Comfy.Server.LaunchArgs',\n    name: 'Server launch arguments',\n    tooltip:\n      'These are the actual arguments that are passed to the server when it is launched.',\n    type: 'hidden',\n    defaultValue: {} as Record<string, string>,\n    versionAdded: '1.4.8'\n  },\n  {\n    id: 'Comfy.Queue.MaxHistoryItems',\n    name: 'Queue history size',\n    tooltip: 'The maximum number of tasks that show in the queue history.',\n    type: 'slider',\n    attrs: {\n      min: 2,\n      max: 256,\n      step: 2\n    },\n    defaultValue: 64,\n    versionAdded: '1.4.12'\n  },\n  {\n    id: 'LiteGraph.Canvas.MaximumFps',\n    name: 'Maximum FPS',\n    tooltip:\n      'The maximum frames per second that the canvas is allowed to render. Caps GPU usage at the cost of smoothness. If 0, the screen refresh rate is used. Default: 0',\n    type: 'slider',\n    attrs: {\n      min: 0,\n      max: 120\n    },\n    defaultValue: 0,\n    versionAdded: '1.5.1'\n  },\n  {\n    id: 'Comfy.EnableWorkflowViewRestore',\n    category: ['Comfy', 'Workflow', 'EnableWorkflowViewRestore'],\n    name: 'Save and restore canvas position and zoom level in workflows',\n    type: 'boolean',\n    defaultValue: true,\n    versionModified: '1.5.4'\n  },\n  {\n    id: 'Comfy.Workflow.ConfirmDelete',\n    name: 'Show confirmation when deleting workflows',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.5.6'\n  },\n  {\n    id: 'Comfy.ColorPalette',\n    name: 'The active color palette id',\n    type: 'hidden',\n    defaultValue: 'dark',\n    versionModified: '1.6.7',\n    migrateDeprecatedValue(value: string) {\n      // Legacy custom palettes were prefixed with 'custom_'\n      return value.startsWith('custom_') ? value.replace('custom_', '') : value\n    }\n  },\n  {\n    id: 'Comfy.CustomColorPalettes',\n    name: 'Custom color palettes',\n    type: 'hidden',\n    defaultValue: {} as ColorPalettes,\n    versionModified: '1.6.7'\n  },\n  {\n    id: 'Comfy.WidgetControlMode',\n    category: ['Comfy', 'Node Widget', 'WidgetControlMode'],\n    name: 'Widget control mode',\n    tooltip:\n      'Controls when widget values are updated (randomize/increment/decrement), either before the prompt is queued or after.',\n    type: 'combo',\n    defaultValue: 'after',\n    options: ['before', 'after'],\n    versionModified: '1.6.10'\n  },\n  {\n    id: 'Comfy.TutorialCompleted',\n    name: 'Tutorial completed',\n    type: 'hidden',\n    defaultValue: false,\n    versionAdded: '1.8.7'\n  },\n  {\n    id: 'Comfy.InstalledVersion',\n    name: 'The frontend version that was running when the user first installed ComfyUI',\n    type: 'hidden',\n    defaultValue: null,\n    versionAdded: '1.24.0'\n  },\n  {\n    id: 'LiteGraph.ContextMenu.Scaling',\n    name: 'Scale node combo widget menus (lists) when zoomed in',\n    defaultValue: false,\n    type: 'boolean',\n    versionAdded: '1.8.8'\n  },\n  {\n    id: 'LiteGraph.Canvas.LowQualityRenderingZoomThreshold',\n    name: 'Low quality rendering zoom threshold',\n    tooltip: 'Render low quality shapes when zoomed out',\n    type: 'slider',\n    attrs: {\n      min: 0.1,\n      max: 1,\n      step: 0.01\n    },\n    defaultValue: 0.6,\n    versionAdded: '1.9.1'\n  },\n  {\n    id: 'Comfy.Canvas.NavigationMode',\n    category: ['LiteGraph', 'Canvas', 'CanvasNavigationMode'],\n    name: 'Canvas Navigation Mode',\n    defaultValue: 'legacy',\n    type: 'combo',\n    options: [\n      { value: 'standard', text: 'Standard (New)' },\n      { value: 'legacy', text: 'Left-Click Pan (Legacy)' }\n    ],\n    versionAdded: '1.25.0',\n    defaultsByInstallVersion: {\n      '1.25.0': 'standard'\n    }\n  },\n  {\n    id: 'Comfy.Canvas.SelectionToolbox',\n    category: ['LiteGraph', 'Canvas', 'SelectionToolbox'],\n    name: 'Show selection toolbox',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.10.5'\n  },\n  {\n    id: 'LiteGraph.Reroute.SplineOffset',\n    name: 'Reroute spline offset',\n    tooltip: 'The bezier control point offset from the reroute centre point',\n    type: 'slider',\n    defaultValue: 20,\n    attrs: {\n      min: 0,\n      max: 400\n    },\n    versionAdded: '1.15.7'\n  },\n  {\n    id: 'Comfy.Toast.DisableReconnectingToast',\n    name: 'Disable toasts when reconnecting or reconnected',\n    type: 'hidden',\n    defaultValue: false,\n    versionAdded: '1.15.12'\n  },\n  {\n    id: 'Comfy.Minimap.Visible',\n    name: 'Display minimap on canvas',\n    type: 'hidden',\n    defaultValue: true,\n    versionAdded: '1.25.0'\n  },\n  {\n    id: 'Comfy.Minimap.NodeColors',\n    name: 'Display node with its original color on minimap',\n    type: 'hidden',\n    defaultValue: false,\n    versionAdded: '1.26.0'\n  },\n  {\n    id: 'Comfy.Minimap.ShowLinks',\n    name: 'Display links on minimap',\n    type: 'hidden',\n    defaultValue: true,\n    versionAdded: '1.26.0'\n  },\n  {\n    id: 'Comfy.Minimap.ShowGroups',\n    name: 'Display node groups on minimap',\n    type: 'hidden',\n    defaultValue: true,\n    versionAdded: '1.26.0'\n  },\n  {\n    id: 'Comfy.Minimap.RenderBypassState',\n    name: 'Render bypass state on minimap',\n    type: 'hidden',\n    defaultValue: true,\n    versionAdded: '1.26.0'\n  },\n  {\n    id: 'Comfy.Minimap.RenderErrorState',\n    name: 'Render error state on minimap',\n    type: 'hidden',\n    defaultValue: true,\n    versionAdded: '1.26.0'\n  },\n  {\n    id: 'Comfy.Workflow.AutoSaveDelay',\n    name: 'Auto Save Delay (ms)',\n    defaultValue: 1000,\n    type: 'number',\n    tooltip: 'Only applies if Auto Save is set to \"after delay\".',\n    versionAdded: '1.16.0'\n  },\n  {\n    id: 'Comfy.Workflow.AutoSave',\n    name: 'Auto Save',\n    type: 'combo',\n    options: ['off', 'after delay'], // Room for other options like on focus change, tab change, window change\n    defaultValue: 'off', // Popular requst by users (https://github.com/Comfy-Org/ComfyUI_frontend/issues/1584#issuecomment-2536610154)\n    versionAdded: '1.16.0'\n  },\n  {\n    id: 'Comfy.Workflow.Persist',\n    name: 'Persist workflow state and restore on page (re)load',\n    type: 'boolean',\n    defaultValue: true,\n    versionAdded: '1.16.1'\n  },\n  {\n    id: 'LiteGraph.Node.DefaultPadding',\n    name: 'Always shrink new nodes',\n    tooltip:\n      'Resize nodes to the smallest possible size when created. When disabled, a newly added node will be widened slightly to show widget values.',\n    type: 'boolean',\n    defaultValue: false,\n    versionAdded: '1.18.0'\n  },\n  {\n    id: 'Comfy.Canvas.BackgroundImage',\n    category: ['Appearance', 'Canvas', 'Background'],\n    name: 'Canvas background image',\n    type: 'backgroundImage',\n    tooltip:\n      'Image URL for the canvas background. You can right-click an image in the outputs panel and select \"Set as Background\" to use it, or upload your own image using the upload button.',\n    defaultValue: '',\n    versionAdded: '1.20.4',\n    versionModified: '1.20.5'\n  },\n  // Release data stored in settings\n  {\n    id: 'Comfy.Release.Version',\n    name: 'Last seen release version',\n    type: 'hidden',\n    defaultValue: ''\n  },\n  {\n    id: 'Comfy.Release.Status',\n    name: 'Release status',\n    type: 'hidden',\n    defaultValue: 'skipped'\n  },\n  {\n    id: 'Comfy.Release.Timestamp',\n    name: 'Release seen timestamp',\n    type: 'hidden',\n    defaultValue: 0\n  }\n]\n","import type { useSettingStore } from '@/stores/settingStore'\n\nlet pendingCallbacks: Array<() => Promise<void>> = []\nlet isNewUserDetermined = false\nlet isNewUserCached: boolean | null = null\n\nexport const newUserService = () => {\n  function checkIsNewUser(\n    settingStore: ReturnType<typeof useSettingStore>\n  ): boolean {\n    const isNewUserSettings =\n      Object.keys(settingStore.settingValues).length === 0 ||\n      !settingStore.get('Comfy.TutorialCompleted')\n    const hasNoWorkflow = !localStorage.getItem('workflow')\n    const hasNoPreviousWorkflow = !localStorage.getItem(\n      'Comfy.PreviousWorkflow'\n    )\n\n    return isNewUserSettings && hasNoWorkflow && hasNoPreviousWorkflow\n  }\n\n  async function registerInitCallback(callback: () => Promise<void>) {\n    if (isNewUserDetermined) {\n      if (isNewUserCached) {\n        try {\n          await callback()\n        } catch (error) {\n          console.error('New user initialization callback failed:', error)\n        }\n      }\n    } else {\n      pendingCallbacks.push(callback)\n    }\n  }\n\n  async function initializeIfNewUser(\n    settingStore: ReturnType<typeof useSettingStore>\n  ) {\n    if (isNewUserDetermined) return\n\n    isNewUserCached = checkIsNewUser(settingStore)\n    isNewUserDetermined = true\n\n    if (!isNewUserCached) {\n      pendingCallbacks = []\n      return\n    }\n\n    await settingStore.set(\n      'Comfy.InstalledVersion',\n      __COMFYUI_FRONTEND_VERSION__\n    )\n\n    for (const callback of pendingCallbacks) {\n      try {\n        await callback()\n      } catch (error) {\n        console.error('New user initialization callback failed:', error)\n      }\n    }\n\n    pendingCallbacks = []\n  }\n\n  function isNewUser(): boolean | null {\n    return isNewUserDetermined ? isNewUserCached : null\n  }\n\n  return {\n    registerInitCallback,\n    initializeIfNewUser,\n    isNewUser\n  }\n}\n","<template>\n  <!-- Load splitter overlay only after comfyApp is ready. -->\n  <!-- If load immediately, the top-level splitter stateKey won't be correctly\n  synced with the stateStorage (localStorage). -->\n  <LiteGraphCanvasSplitterOverlay\n    v-if=\"comfyAppReady && betaMenuEnabled && !workspaceStore.focusMode\"\n  >\n    <template #side-bar-panel>\n      <SideToolbar />\n    </template>\n    <template #bottom-panel>\n      <BottomPanel />\n    </template>\n    <template #graph-canvas-panel>\n      <div class=\"absolute top-0 left-0 w-auto max-w-full pointer-events-auto\">\n        <SecondRowWorkflowTabs\n          v-if=\"workflowTabsPosition === 'Topbar (2nd-row)'\"\n        />\n      </div>\n      <GraphCanvasMenu v-if=\"canvasMenuEnabled\" class=\"pointer-events-auto\" />\n\n      <MiniMap\n        v-if=\"comfyAppReady && minimapEnabled\"\n        ref=\"minimapRef\"\n        class=\"pointer-events-auto\"\n      />\n    </template>\n  </LiteGraphCanvasSplitterOverlay>\n  <GraphCanvasMenu v-if=\"!betaMenuEnabled && canvasMenuEnabled\" />\n  <canvas\n    id=\"graph-canvas\"\n    ref=\"canvasRef\"\n    tabindex=\"1\"\n    class=\"w-full h-full touch-none\"\n  />\n\n  <NodeTooltip v-if=\"tooltipEnabled\" />\n  <NodeSearchboxPopover />\n\n  <!-- Initialize components after comfyApp is ready. useAbsolutePosition requires\n  canvasStore.canvas to be initialized. -->\n  <template v-if=\"comfyAppReady\">\n    <TitleEditor />\n    <SelectionOverlay v-if=\"selectionToolboxEnabled\">\n      <SelectionToolbox />\n    </SelectionOverlay>\n    <DomWidgets />\n  </template>\n</template>\n\n<script setup lang=\"ts\">\nimport { useEventListener, whenever } from '@vueuse/core'\nimport { computed, onMounted, ref, watch, watchEffect } from 'vue'\n\nimport LiteGraphCanvasSplitterOverlay from '@/components/LiteGraphCanvasSplitterOverlay.vue'\nimport BottomPanel from '@/components/bottomPanel/BottomPanel.vue'\nimport DomWidgets from '@/components/graph/DomWidgets.vue'\nimport GraphCanvasMenu from '@/components/graph/GraphCanvasMenu.vue'\nimport MiniMap from '@/components/graph/MiniMap.vue'\nimport NodeTooltip from '@/components/graph/NodeTooltip.vue'\nimport SelectionOverlay from '@/components/graph/SelectionOverlay.vue'\nimport SelectionToolbox from '@/components/graph/SelectionToolbox.vue'\nimport TitleEditor from '@/components/graph/TitleEditor.vue'\nimport NodeSearchboxPopover from '@/components/searchbox/NodeSearchBoxPopover.vue'\nimport SideToolbar from '@/components/sidebar/SideToolbar.vue'\nimport SecondRowWorkflowTabs from '@/components/topbar/SecondRowWorkflowTabs.vue'\nimport { useChainCallback } from '@/composables/functional/useChainCallback'\nimport { useNodeBadge } from '@/composables/node/useNodeBadge'\nimport { useCanvasDrop } from '@/composables/useCanvasDrop'\nimport { useContextMenuTranslation } from '@/composables/useContextMenuTranslation'\nimport { useCopy } from '@/composables/useCopy'\nimport { useGlobalLitegraph } from '@/composables/useGlobalLitegraph'\nimport { useLitegraphSettings } from '@/composables/useLitegraphSettings'\nimport { useMinimap } from '@/composables/useMinimap'\nimport { usePaste } from '@/composables/usePaste'\nimport { useWorkflowAutoSave } from '@/composables/useWorkflowAutoSave'\nimport { useWorkflowPersistence } from '@/composables/useWorkflowPersistence'\nimport { CORE_SETTINGS } from '@/constants/coreSettings'\nimport { i18n, t } from '@/i18n'\nimport type { LGraphNode } from '@/lib/litegraph/src/litegraph'\nimport { UnauthorizedError, api } from '@/scripts/api'\nimport { app as comfyApp } from '@/scripts/app'\nimport { ChangeTracker } from '@/scripts/changeTracker'\nimport { IS_CONTROL_WIDGET, updateControlWidgetLabel } from '@/scripts/widgets'\nimport { useColorPaletteService } from '@/services/colorPaletteService'\nimport { newUserService } from '@/services/newUserService'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useExecutionStore } from '@/stores/executionStore'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useNodeDefStore } from '@/stores/nodeDefStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useToastStore } from '@/stores/toastStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { useColorPaletteStore } from '@/stores/workspace/colorPaletteStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\n\nconst emit = defineEmits<{\n  ready: []\n}>()\nconst canvasRef = ref<HTMLCanvasElement | null>(null)\nconst settingStore = useSettingStore()\nconst nodeDefStore = useNodeDefStore()\nconst workspaceStore = useWorkspaceStore()\nconst canvasStore = useCanvasStore()\nconst executionStore = useExecutionStore()\nconst toastStore = useToastStore()\nconst betaMenuEnabled = computed(\n  () => settingStore.get('Comfy.UseNewMenu') !== 'Disabled'\n)\nconst workflowTabsPosition = computed(() =>\n  settingStore.get('Comfy.Workflow.WorkflowTabsPosition')\n)\nconst canvasMenuEnabled = computed(() =>\n  settingStore.get('Comfy.Graph.CanvasMenu')\n)\nconst tooltipEnabled = computed(() => settingStore.get('Comfy.EnableTooltips'))\nconst selectionToolboxEnabled = computed(() =>\n  settingStore.get('Comfy.Canvas.SelectionToolbox')\n)\n\nconst minimapRef = ref<InstanceType<typeof MiniMap>>()\nconst minimapEnabled = computed(() => settingStore.get('Comfy.Minimap.Visible'))\nconst minimap = useMinimap()\n\nwatchEffect(() => {\n  nodeDefStore.showDeprecated = settingStore.get('Comfy.Node.ShowDeprecated')\n})\n\nwatchEffect(() => {\n  nodeDefStore.showExperimental = settingStore.get(\n    'Comfy.Node.ShowExperimental'\n  )\n})\n\nwatchEffect(() => {\n  const spellcheckEnabled = settingStore.get('Comfy.TextareaWidget.Spellcheck')\n  const textareas = document.querySelectorAll<HTMLTextAreaElement>(\n    'textarea.comfy-multiline-input'\n  )\n\n  textareas.forEach((textarea: HTMLTextAreaElement) => {\n    textarea.spellcheck = spellcheckEnabled\n    // Force recheck to ensure visual update\n    textarea.focus()\n    textarea.blur()\n  })\n})\n\nwatch(\n  () => settingStore.get('Comfy.WidgetControlMode'),\n  () => {\n    if (!canvasStore.canvas) return\n\n    for (const n of comfyApp.graph.nodes) {\n      if (!n.widgets) continue\n      for (const w of n.widgets) {\n        // @ts-expect-error fixme ts strict error\n        if (w[IS_CONTROL_WIDGET]) {\n          updateControlWidgetLabel(w)\n          if (w.linkedWidgets) {\n            for (const l of w.linkedWidgets) {\n              updateControlWidgetLabel(l)\n            }\n          }\n        }\n      }\n    }\n    comfyApp.graph.setDirtyCanvas(true)\n  }\n)\n\nconst colorPaletteService = useColorPaletteService()\nconst colorPaletteStore = useColorPaletteStore()\nwatch(\n  [() => canvasStore.canvas, () => settingStore.get('Comfy.ColorPalette')],\n  async ([canvas, currentPaletteId]) => {\n    if (!canvas) return\n\n    await colorPaletteService.loadColorPalette(currentPaletteId)\n  }\n)\n\nwatch(\n  () => settingStore.get('Comfy.Canvas.BackgroundImage'),\n  async () => {\n    if (!canvasStore.canvas) return\n    const currentPaletteId = colorPaletteStore.activePaletteId\n    if (!currentPaletteId) return\n\n    // Reload color palette to apply background image\n    await colorPaletteService.loadColorPalette(currentPaletteId)\n    // Mark background canvas as dirty\n    canvasStore.canvas.setDirty(false, true)\n  }\n)\nwatch(\n  () => colorPaletteStore.activePaletteId,\n  async (newValue) => {\n    await settingStore.set('Comfy.ColorPalette', newValue)\n  }\n)\n\n// Update the progress of executing nodes\nwatch(\n  () =>\n    [executionStore.nodeLocationProgressStates, canvasStore.canvas] as const,\n  ([nodeLocationProgressStates, canvas]) => {\n    if (!canvas?.graph) return\n    for (const node of canvas.graph.nodes) {\n      const nodeLocatorId = useWorkflowStore().nodeIdToNodeLocatorId(node.id)\n      const progressState = nodeLocationProgressStates[nodeLocatorId]\n      if (progressState && progressState.state === 'running') {\n        node.progress = progressState.value / progressState.max\n      } else {\n        node.progress = undefined\n      }\n    }\n\n    // Force canvas redraw to ensure progress updates are visible\n    canvas.graph.setDirtyCanvas(true, false)\n  },\n  { deep: true }\n)\n\n// Update node slot errors\nwatch(\n  () => executionStore.lastNodeErrors,\n  (lastNodeErrors) => {\n    const removeSlotError = (node: LGraphNode) => {\n      for (const slot of node.inputs) {\n        delete slot.hasErrors\n      }\n      for (const slot of node.outputs) {\n        delete slot.hasErrors\n      }\n    }\n\n    for (const node of comfyApp.graph.nodes) {\n      removeSlotError(node)\n      const nodeErrors = lastNodeErrors?.[node.id]\n      if (!nodeErrors) continue\n      for (const error of nodeErrors.errors) {\n        if (error.extra_info && error.extra_info.input_name) {\n          const inputIndex = node.findInputSlot(error.extra_info.input_name)\n          if (inputIndex !== -1) {\n            node.inputs[inputIndex].hasErrors = true\n          }\n        }\n      }\n    }\n\n    comfyApp.canvas.draw(true, true)\n  }\n)\n\nuseEventListener(\n  canvasRef,\n  'litegraph:no-items-selected',\n  () => {\n    toastStore.add({\n      severity: 'warn',\n      summary: t('toastMessages.nothingSelected'),\n      life: 2000\n    })\n  },\n  { passive: true }\n)\n\nconst loadCustomNodesI18n = async () => {\n  try {\n    const i18nData = await api.getCustomNodesI18n()\n    Object.entries(i18nData).forEach(([locale, message]) => {\n      i18n.global.mergeLocaleMessage(locale, message)\n    })\n  } catch (error) {\n    console.error('Failed to load custom nodes i18n', error)\n  }\n}\n\nconst comfyAppReady = ref(false)\nconst workflowPersistence = useWorkflowPersistence()\n// @ts-expect-error fixme ts strict error\nuseCanvasDrop(canvasRef)\nuseLitegraphSettings()\nuseNodeBadge()\n\nonMounted(async () => {\n  useGlobalLitegraph()\n  useContextMenuTranslation()\n  useCopy()\n  usePaste()\n  useWorkflowAutoSave()\n\n  comfyApp.vueAppReady = true\n\n  workspaceStore.spinner = true\n  // ChangeTracker needs to be initialized before setup, as it will overwrite\n  // some listeners of litegraph canvas.\n  ChangeTracker.init()\n  await loadCustomNodesI18n()\n  try {\n    await settingStore.loadSettingValues()\n  } catch (error) {\n    if (error instanceof UnauthorizedError) {\n      console.log(\n        'Failed loading user settings, user unauthorized, cleaning local Comfy.userId'\n      )\n      localStorage.removeItem('Comfy.userId')\n      localStorage.removeItem('Comfy.userName')\n      window.location.reload()\n    } else {\n      throw error\n    }\n  }\n  CORE_SETTINGS.forEach((setting) => {\n    settingStore.addSetting(setting)\n  })\n\n  await newUserService().initializeIfNewUser(settingStore)\n\n  // @ts-expect-error fixme ts strict error\n  await comfyApp.setup(canvasRef.value)\n  canvasStore.canvas = comfyApp.canvas\n  canvasStore.canvas.render_canvas_border = false\n  workspaceStore.spinner = false\n\n  window.app = comfyApp\n  window.graph = comfyApp.graph\n\n  comfyAppReady.value = true\n\n  comfyApp.canvas.onSelectionChange = useChainCallback(\n    comfyApp.canvas.onSelectionChange,\n    () => canvasStore.updateSelectedItems()\n  )\n\n  // Load color palette\n  colorPaletteStore.customPalettes = settingStore.get(\n    'Comfy.CustomColorPalettes'\n  )\n\n  // Restore workflow and workflow tabs state from storage\n  await workflowPersistence.restorePreviousWorkflow()\n  workflowPersistence.restoreWorkflowTabsState()\n\n  // Initialize release store to fetch releases from comfy-api (fire-and-forget)\n  const { useReleaseStore } = await import('@/stores/releaseStore')\n  const releaseStore = useReleaseStore()\n  void releaseStore.initialize()\n\n  // Start watching for locale change after the initial value is loaded.\n  watch(\n    () => settingStore.get('Comfy.Locale'),\n    async () => {\n      await useCommandStore().execute('Comfy.RefreshNodeDefinitions')\n      await useWorkflowService().reloadCurrentWorkflow()\n    }\n  )\n\n  whenever(\n    () => minimapRef.value,\n    (ref) => {\n      minimap.setMinimapRef(ref)\n    }\n  )\n\n  whenever(\n    () => useCanvasStore().canvas,\n    (canvas) => {\n      useEventListener(canvas.canvas, 'litegraph:set-graph', () => {\n        useWorkflowStore().updateActiveGraph()\n      })\n    },\n    { immediate: true }\n  )\n\n  emit('ready')\n})\n</script>\n","<template>\n  <Toast />\n</template>\n\n<script setup lang=\"ts\">\nimport Toast from 'primevue/toast'\nimport { useToast } from 'primevue/usetoast'\nimport { nextTick, watch } from 'vue'\n\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useToastStore } from '@/stores/toastStore'\n\nconst toast = useToast()\nconst toastStore = useToastStore()\nconst settingStore = useSettingStore()\n\nwatch(\n  () => toastStore.messagesToAdd,\n  (newMessages) => {\n    if (newMessages.length === 0) {\n      return\n    }\n\n    newMessages.forEach((message) => {\n      toast.add(message)\n    })\n    toastStore.messagesToAdd = []\n  },\n  { deep: true }\n)\n\nwatch(\n  () => toastStore.messagesToRemove,\n  (messagesToRemove) => {\n    if (messagesToRemove.length === 0) {\n      return\n    }\n\n    messagesToRemove.forEach((message) => {\n      toast.remove(message)\n    })\n    toastStore.messagesToRemove = []\n  },\n  { deep: true }\n)\n\nwatch(\n  () => toastStore.removeAllRequested,\n  (requested) => {\n    if (requested) {\n      toast.removeAllGroups()\n      toastStore.removeAllRequested = false\n    }\n  }\n)\n\nfunction updateToastPosition() {\n  const styleElement =\n    document.getElementById('dynamic-toast-style') || createStyleElement()\n  const rect = document\n    .querySelector('.graph-canvas-container')\n    ?.getBoundingClientRect()\n  if (!rect) return\n\n  styleElement.textContent = `\n    .p-toast.p-component.p-toast-top-right {\n      top: ${rect.top + 20}px !important;\n      right: ${window.innerWidth - (rect.left + rect.width) + 20}px !important;\n    }\n  `\n}\n\nfunction createStyleElement() {\n  const style = document.createElement('style')\n  style.id = 'dynamic-toast-style'\n  document.head.appendChild(style)\n  return style\n}\n\nwatch(\n  () => settingStore.get('Comfy.UseNewMenu'),\n  () => nextTick(updateToastPosition),\n  { immediate: true }\n)\nwatch(\n  () => settingStore.get('Comfy.Sidebar.Location'),\n  () => nextTick(updateToastPosition),\n  { immediate: true }\n)\n</script>\n","<template>\n  <Toast group=\"reroute-migration\">\n    <template #message>\n      <div class=\"flex flex-col items-start flex-auto\">\n        <div class=\"font-medium text-lg my-4\">\n          {{ t('toastMessages.migrateToLitegraphReroute') }}\n        </div>\n        <Button\n          class=\"self-end\"\n          size=\"small\"\n          :label=\"t('g.migrate')\"\n          severity=\"warn\"\n          @click=\"migrateToLitegraphReroute\"\n        />\n      </div>\n    </template>\n  </Toast>\n</template>\n\n<script setup lang=\"ts\">\nimport { useToast } from 'primevue'\nimport Button from 'primevue/button'\nimport Toast from 'primevue/toast'\nimport { useI18n } from 'vue-i18n'\n\nimport type { WorkflowJSON04 } from '@/schemas/comfyWorkflowSchema'\nimport { app } from '@/scripts/app'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { migrateLegacyRerouteNodes } from '@/utils/migration/migrateReroute'\n\nconst { t } = useI18n()\nconst toast = useToast()\n\nconst workflowStore = useWorkflowStore()\nconst migrateToLitegraphReroute = async () => {\n  const workflowJSON = app.graph.serialize() as unknown as WorkflowJSON04\n  const migratedWorkflowJSON = migrateLegacyRerouteNodes(workflowJSON)\n  await app.loadGraphData(\n    migratedWorkflowJSON,\n    false,\n    false,\n    workflowStore.activeWorkflow\n  )\n  toast.removeGroup('reroute-migration')\n}\n</script>\n","<template>\n  <div\n    v-tooltip.bottom=\"{\n      value: $t('menu.batchCount'),\n      showDelay: 600\n    }\"\n    class=\"batch-count\"\n    :aria-label=\"$t('menu.batchCount')\"\n  >\n    <InputNumber\n      v-model=\"batchCount\"\n      class=\"w-14\"\n      :min=\"minQueueCount\"\n      :max=\"maxQueueCount\"\n      fluid\n      show-buttons\n      :pt=\"{\n        incrementButton: {\n          class: 'w-6',\n          onmousedown: () => {\n            handleClick(true)\n          }\n        },\n        decrementButton: {\n          class: 'w-6',\n          onmousedown: () => {\n            handleClick(false)\n          }\n        }\n      }\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { storeToRefs } from 'pinia'\nimport InputNumber from 'primevue/inputnumber'\nimport { computed } from 'vue'\n\nimport { useQueueSettingsStore } from '@/stores/queueStore'\nimport { useSettingStore } from '@/stores/settingStore'\n\nconst queueSettingsStore = useQueueSettingsStore()\nconst { batchCount } = storeToRefs(queueSettingsStore)\nconst minQueueCount = 1\n\nconst settingStore = useSettingStore()\nconst maxQueueCount = computed(() =>\n  settingStore.get('Comfy.QueueButton.BatchCountLimit')\n)\n\nconst handleClick = (increment: boolean) => {\n  let newCount: number\n  if (increment) {\n    const originalCount = batchCount.value - 1\n    newCount = Math.min(originalCount * 2, maxQueueCount.value)\n  } else {\n    const originalCount = batchCount.value + 1\n    newCount = Math.floor(originalCount / 2)\n  }\n\n  batchCount.value = newCount\n}\n</script>\n\n<style scoped>\n:deep(.p-inputtext) {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n</style>\n","<template>\n  <div class=\"queue-button-group flex\">\n    <SplitButton\n      v-tooltip.bottom=\"{\n        value: workspaceStore.shiftDown\n          ? $t('menu.runWorkflowFront')\n          : $t('menu.runWorkflow'),\n        showDelay: 600\n      }\"\n      class=\"comfyui-queue-button\"\n      :label=\"activeQueueModeMenuItem.label\"\n      severity=\"primary\"\n      size=\"small\"\n      :model=\"queueModeMenuItems\"\n      data-testid=\"queue-button\"\n      @click=\"queuePrompt\"\n    >\n      <template #icon>\n        <i-lucide:list-start v-if=\"workspaceStore.shiftDown\" />\n        <i-lucide:play v-else-if=\"queueMode === 'disabled'\" />\n        <i-lucide:fast-forward v-else-if=\"queueMode === 'instant'\" />\n        <i-lucide:step-forward v-else-if=\"queueMode === 'change'\" />\n      </template>\n      <template #item=\"{ item }\">\n        <Button\n          v-tooltip=\"{\n            value: item.tooltip,\n            showDelay: 600\n          }\"\n          :label=\"String(item.label)\"\n          :icon=\"item.icon\"\n          :severity=\"item.key === queueMode ? 'primary' : 'secondary'\"\n          size=\"small\"\n          text\n        />\n      </template>\n    </SplitButton>\n    <BatchCountEdit />\n    <ButtonGroup class=\"execution-actions flex flex-nowrap\">\n      <Button\n        v-tooltip.bottom=\"{\n          value: $t('menu.interrupt'),\n          showDelay: 600\n        }\"\n        icon=\"pi pi-times\"\n        :severity=\"executingPrompt ? 'danger' : 'secondary'\"\n        :disabled=\"!executingPrompt\"\n        text\n        :aria-label=\"$t('menu.interrupt')\"\n        @click=\"() => commandStore.execute('Comfy.Interrupt')\"\n      />\n      <Button\n        v-tooltip.bottom=\"{\n          value: $t('sideToolbar.queueTab.clearPendingTasks'),\n          showDelay: 600\n        }\"\n        icon=\"pi pi-stop\"\n        :severity=\"hasPendingTasks ? 'danger' : 'secondary'\"\n        :disabled=\"!hasPendingTasks\"\n        text\n        :aria-label=\"$t('sideToolbar.queueTab.clearPendingTasks')\"\n        @click=\"\n          () => {\n            if (queueCountStore.count.value > 1) {\n              commandStore.execute('Comfy.ClearPendingTasks')\n            }\n            queueMode = 'disabled'\n          }\n        \"\n      />\n    </ButtonGroup>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport Button from 'primevue/button'\nimport ButtonGroup from 'primevue/buttongroup'\nimport SplitButton from 'primevue/splitbutton'\nimport { computed } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useCommandStore } from '@/stores/commandStore'\nimport {\n  useQueuePendingTaskCountStore,\n  useQueueSettingsStore\n} from '@/stores/queueStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\n\nimport BatchCountEdit from './BatchCountEdit.vue'\n\nconst workspaceStore = useWorkspaceStore()\nconst queueCountStore = storeToRefs(useQueuePendingTaskCountStore())\nconst { mode: queueMode } = storeToRefs(useQueueSettingsStore())\n\nconst { t } = useI18n()\nconst queueModeMenuItemLookup = computed(() => ({\n  disabled: {\n    key: 'disabled',\n    label: t('menu.run'),\n    tooltip: t('menu.disabledTooltip'),\n    command: () => {\n      queueMode.value = 'disabled'\n    }\n  },\n  instant: {\n    key: 'instant',\n    label: `${t('menu.run')} (${t('menu.instant')})`,\n    tooltip: t('menu.instantTooltip'),\n    command: () => {\n      queueMode.value = 'instant'\n    }\n  },\n  change: {\n    key: 'change',\n    label: `${t('menu.run')} (${t('menu.onChange')})`,\n    tooltip: t('menu.onChangeTooltip'),\n    command: () => {\n      queueMode.value = 'change'\n    }\n  }\n}))\n\nconst activeQueueModeMenuItem = computed(\n  () => queueModeMenuItemLookup.value[queueMode.value]\n)\nconst queueModeMenuItems = computed(() =>\n  Object.values(queueModeMenuItemLookup.value)\n)\n\nconst executingPrompt = computed(() => !!queueCountStore.count.value)\nconst hasPendingTasks = computed(\n  () => queueCountStore.count.value > 1 || queueMode.value !== 'disabled'\n)\n\nconst commandStore = useCommandStore()\nconst queuePrompt = async (e: Event) => {\n  const commandId =\n    'shiftKey' in e && e.shiftKey\n      ? 'Comfy.QueuePromptFront'\n      : 'Comfy.QueuePrompt'\n  await commandStore.execute(commandId)\n}\n</script>\n\n<style scoped>\n.comfyui-queue-button :deep(.p-splitbutton-dropdown) {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n</style>\n","<template>\n  <Panel\n    class=\"actionbar w-fit\"\n    :style=\"style\"\n    :class=\"{ 'is-dragging': isDragging, 'is-docked': isDocked }\"\n  >\n    <div ref=\"panelRef\" class=\"actionbar-content flex items-center select-none\">\n      <span ref=\"dragHandleRef\" class=\"drag-handle cursor-move mr-2 p-0!\" />\n      <ComfyQueueButton />\n    </div>\n  </Panel>\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  useDraggable,\n  useElementBounding,\n  useEventBus,\n  useEventListener,\n  useLocalStorage,\n  watchDebounced\n} from '@vueuse/core'\nimport { clamp } from 'lodash'\nimport Panel from 'primevue/panel'\nimport { Ref, computed, inject, nextTick, onMounted, ref, watch } from 'vue'\n\nimport { useSettingStore } from '@/stores/settingStore'\n\nimport ComfyQueueButton from './ComfyQueueButton.vue'\n\nconst settingsStore = useSettingStore()\n\nconst position = computed(() => settingsStore.get('Comfy.UseNewMenu'))\n\nconst visible = computed(() => position.value !== 'Disabled')\n\nconst topMenuRef = inject<Ref<HTMLDivElement | null>>('topMenuRef')\nconst panelRef = ref<HTMLElement | null>(null)\nconst dragHandleRef = ref<HTMLElement | null>(null)\nconst isDocked = useLocalStorage('Comfy.MenuPosition.Docked', false)\nconst storedPosition = useLocalStorage('Comfy.MenuPosition.Floating', {\n  x: 0,\n  y: 0\n})\nconst {\n  x,\n  y,\n  style: style,\n  isDragging\n} = useDraggable(panelRef, {\n  initialValue: { x: 0, y: 0 },\n  handle: dragHandleRef,\n  containerElement: document.body,\n  onMove: (event) => {\n    // Prevent dragging the menu over the top of the tabs\n    if (position.value === 'Top') {\n      const minY = topMenuRef?.value?.getBoundingClientRect().top ?? 40\n      if (event.y < minY) {\n        event.y = minY\n      }\n    }\n  }\n})\n\n// Update storedPosition when x or y changes\nwatchDebounced(\n  [x, y],\n  ([newX, newY]) => {\n    storedPosition.value = { x: newX, y: newY }\n  },\n  { debounce: 300 }\n)\n\n// Set initial position to bottom center\nconst setInitialPosition = () => {\n  if (panelRef.value) {\n    const screenWidth = window.innerWidth\n    const screenHeight = window.innerHeight\n    const menuWidth = panelRef.value.offsetWidth\n    const menuHeight = panelRef.value.offsetHeight\n\n    if (menuWidth === 0 || menuHeight === 0) {\n      return\n    }\n\n    // Check if stored position exists and is within bounds\n    if (storedPosition.value.x !== 0 || storedPosition.value.y !== 0) {\n      // Ensure stored position is within screen bounds\n      x.value = clamp(storedPosition.value.x, 0, screenWidth - menuWidth)\n      y.value = clamp(storedPosition.value.y, 0, screenHeight - menuHeight)\n      captureLastDragState()\n      return\n    }\n\n    // If no stored position or current position, set to bottom center\n    if (x.value === 0 && y.value === 0) {\n      x.value = clamp((screenWidth - menuWidth) / 2, 0, screenWidth - menuWidth)\n      y.value = clamp(\n        screenHeight - menuHeight - 10,\n        0,\n        screenHeight - menuHeight\n      )\n      captureLastDragState()\n    }\n  }\n}\nonMounted(setInitialPosition)\nwatch(visible, async (newVisible) => {\n  if (newVisible) {\n    await nextTick(setInitialPosition)\n  }\n})\n\nconst lastDragState = ref({\n  x: x.value,\n  y: y.value,\n  windowWidth: window.innerWidth,\n  windowHeight: window.innerHeight\n})\nconst captureLastDragState = () => {\n  lastDragState.value = {\n    x: x.value,\n    y: y.value,\n    windowWidth: window.innerWidth,\n    windowHeight: window.innerHeight\n  }\n}\nwatch(\n  isDragging,\n  (newIsDragging) => {\n    if (!newIsDragging) {\n      // Stop dragging\n      captureLastDragState()\n    }\n  },\n  { immediate: true }\n)\n\nconst adjustMenuPosition = () => {\n  if (panelRef.value) {\n    const screenWidth = window.innerWidth\n    const screenHeight = window.innerHeight\n    const menuWidth = panelRef.value.offsetWidth\n    const menuHeight = panelRef.value.offsetHeight\n\n    // Calculate distances to all edges\n    const distanceLeft = lastDragState.value.x\n    const distanceRight =\n      lastDragState.value.windowWidth - (lastDragState.value.x + menuWidth)\n    const distanceTop = lastDragState.value.y\n    const distanceBottom =\n      lastDragState.value.windowHeight - (lastDragState.value.y + menuHeight)\n\n    // Find the smallest distance to determine which edge to anchor to\n    const distances = [\n      { edge: 'left', distance: distanceLeft },\n      { edge: 'right', distance: distanceRight },\n      { edge: 'top', distance: distanceTop },\n      { edge: 'bottom', distance: distanceBottom }\n    ]\n    const closestEdge = distances.reduce((min, curr) =>\n      curr.distance < min.distance ? curr : min\n    )\n\n    // Calculate vertical position as a percentage of screen height\n    const verticalRatio =\n      lastDragState.value.y / lastDragState.value.windowHeight\n    const horizontalRatio =\n      lastDragState.value.x / lastDragState.value.windowWidth\n\n    // Apply positioning based on closest edge\n    if (closestEdge.edge === 'left') {\n      x.value = closestEdge.distance // Maintain exact distance from left\n      y.value = verticalRatio * screenHeight\n    } else if (closestEdge.edge === 'right') {\n      x.value = screenWidth - menuWidth - closestEdge.distance // Maintain exact distance from right\n      y.value = verticalRatio * screenHeight\n    } else if (closestEdge.edge === 'top') {\n      x.value = horizontalRatio * screenWidth\n      y.value = closestEdge.distance // Maintain exact distance from top\n    } else {\n      // bottom\n      x.value = horizontalRatio * screenWidth\n      y.value = screenHeight - menuHeight - closestEdge.distance // Maintain exact distance from bottom\n    }\n\n    // Ensure the menu stays within the screen bounds\n    x.value = clamp(x.value, 0, screenWidth - menuWidth)\n    y.value = clamp(y.value, 0, screenHeight - menuHeight)\n  }\n}\n\nuseEventListener(window, 'resize', adjustMenuPosition)\n\nconst topMenuBounds = useElementBounding(topMenuRef)\nconst overlapThreshold = 20 // pixels\nconst isOverlappingWithTopMenu = computed(() => {\n  if (!panelRef.value) {\n    return false\n  }\n  const { height } = panelRef.value.getBoundingClientRect()\n  const actionbarBottom = y.value + height\n  const topMenuBottom = topMenuBounds.bottom.value\n\n  const overlapPixels =\n    Math.min(actionbarBottom, topMenuBottom) -\n    Math.max(y.value, topMenuBounds.top.value)\n  return overlapPixels > overlapThreshold\n})\n\nwatch(isDragging, (newIsDragging) => {\n  if (!newIsDragging) {\n    // Stop dragging\n    isDocked.value = isOverlappingWithTopMenu.value\n  } else {\n    // Start dragging\n    isDocked.value = false\n  }\n})\n\nconst eventBus = useEventBus<string>('topMenu')\nwatch([isDragging, isOverlappingWithTopMenu], ([dragging, overlapping]) => {\n  eventBus.emit('updateHighlight', {\n    isDragging: dragging,\n    isOverlapping: overlapping\n  })\n})\n</script>\n\n<style scoped>\n.actionbar {\n  pointer-events: all;\n  position: fixed;\n  z-index: 1000;\n}\n\n.actionbar.is-docked {\n  position: static;\n  @apply bg-transparent border-none p-0;\n}\n\n.actionbar.is-dragging {\n  user-select: none;\n}\n\n:deep(.p-panel-content) {\n  @apply p-1;\n}\n\n.is-docked :deep(.p-panel-content) {\n  @apply p-0;\n}\n\n:deep(.p-panel-header) {\n  display: none;\n}\n\n.drag-handle {\n  @apply w-3 h-max;\n}\n</style>\n","<template>\n  <a\n    ref=\"wrapperRef\"\n    v-tooltip.bottom=\"{\n      value: item.label,\n      showDelay: 512\n    }\"\n    href=\"#\"\n    class=\"cursor-pointer p-breadcrumb-item-link\"\n    :class=\"{\n      'flex items-center gap-1': isActive,\n      'p-breadcrumb-item-link-menu-visible': menu?.overlayVisible,\n      'p-breadcrumb-item-link-icon-visible': isActive\n    }\"\n    @click=\"handleClick\"\n  >\n    <span class=\"p-breadcrumb-item-label\">{{ item.label }}</span>\n    <i v-if=\"isActive\" class=\"pi pi-angle-down text-[10px]\"></i>\n  </a>\n  <Menu\n    v-if=\"isActive\"\n    ref=\"menu\"\n    :model=\"menuItems\"\n    :popup=\"true\"\n    :pt=\"{\n      root: {\n        style: 'background-color: var(--comfy-menu-secondary-bg)'\n      },\n      itemLink: {\n        class: 'py-2'\n      }\n    }\"\n  />\n  <InputText\n    v-if=\"isEditing\"\n    ref=\"itemInputRef\"\n    v-model=\"itemLabel\"\n    class=\"fixed z-[10000] text-[.8rem] px-2 py-2\"\n    @blur=\"inputBlur(true)\"\n    @click.stop\n    @keydown.enter=\"inputBlur(true)\"\n    @keydown.esc=\"inputBlur(false)\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport InputText from 'primevue/inputtext'\nimport Menu, { MenuState } from 'primevue/menu'\nimport type { MenuItem } from 'primevue/menuitem'\nimport { computed, nextTick, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useDialogService } from '@/services/dialogService'\nimport { useWorkflowService } from '@/services/workflowService'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useSubgraphNavigationStore } from '@/stores/subgraphNavigationStore'\nimport { ComfyWorkflow, useWorkflowStore } from '@/stores/workflowStore'\nimport { appendJsonExt } from '@/utils/formatUtil'\n\ninterface Props {\n  item: MenuItem\n  isActive?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  isActive: false\n})\n\nconst { t } = useI18n()\nconst menu = ref<InstanceType<typeof Menu> & MenuState>()\nconst dialogService = useDialogService()\nconst workflowStore = useWorkflowStore()\nconst workflowService = useWorkflowService()\nconst isEditing = ref(false)\nconst itemLabel = ref<string>()\nconst itemInputRef = ref<{ $el?: HTMLInputElement }>()\nconst wrapperRef = ref<HTMLAnchorElement>()\n\nconst rename = async (\n  newName: string | null | undefined,\n  initialName: string\n) => {\n  if (newName && newName !== initialName) {\n    // Synchronize the node titles with the new name\n    props.item.updateTitle?.(newName)\n\n    if (workflowStore.activeSubgraph) {\n      workflowStore.activeSubgraph.name = newName\n    } else if (workflowStore.activeWorkflow) {\n      try {\n        await workflowService.renameWorkflow(\n          workflowStore.activeWorkflow,\n          ComfyWorkflow.basePath + appendJsonExt(newName)\n        )\n      } catch (error) {\n        console.error(error)\n        dialogService.showErrorDialog(error)\n        return\n      }\n    }\n\n    // Force the navigation stack to recompute the labels\n    // TODO: investigate if there is a better way to do this\n    const navigationStore = useSubgraphNavigationStore()\n    navigationStore.restoreState(navigationStore.exportState())\n  }\n}\n\nconst menuItems = computed<MenuItem[]>(() => {\n  return [\n    {\n      label: t('g.rename'),\n      icon: 'pi pi-pencil',\n      command: async () => {\n        let initialName =\n          workflowStore.activeSubgraph?.name ??\n          workflowStore.activeWorkflow?.filename\n\n        if (!initialName) return\n\n        const newName = await dialogService.prompt({\n          title: t('g.rename'),\n          message: t('breadcrumbsMenu.enterNewName'),\n          defaultValue: initialName\n        })\n\n        await rename(newName, initialName)\n      }\n    },\n    {\n      label: t('breadcrumbsMenu.duplicate'),\n      icon: 'pi pi-copy',\n      command: async () => {\n        await workflowService.duplicateWorkflow(workflowStore.activeWorkflow!)\n      },\n      visible: props.item.key === 'root'\n    },\n    {\n      separator: true\n    },\n    {\n      label: t('breadcrumbsMenu.clearWorkflow'),\n      icon: 'pi pi-trash',\n      command: async () => {\n        await useCommandStore().execute('Comfy.ClearWorkflow')\n      }\n    },\n    {\n      separator: true,\n      visible: props.item.key === 'root'\n    },\n    {\n      label: t('breadcrumbsMenu.deleteWorkflow'),\n      icon: 'pi pi-times',\n      command: async () => {\n        await workflowService.deleteWorkflow(workflowStore.activeWorkflow!)\n      },\n      visible: props.item.key === 'root'\n    }\n  ]\n})\n\nconst handleClick = (event: MouseEvent) => {\n  if (isEditing.value) {\n    return\n  }\n\n  if (event.detail === 1) {\n    if (props.isActive) {\n      menu.value?.toggle(event)\n    } else {\n      props.item.command?.({ item: props.item, originalEvent: event })\n    }\n  } else if (props.isActive && event.detail === 2) {\n    menu.value?.hide()\n    event.stopPropagation()\n    event.preventDefault()\n    isEditing.value = true\n    itemLabel.value = props.item.label as string\n    void nextTick(() => {\n      if (itemInputRef.value?.$el) {\n        itemInputRef.value.$el.focus()\n        itemInputRef.value.$el.select()\n        if (wrapperRef.value) {\n          itemInputRef.value.$el.style.width = `${Math.max(200, wrapperRef.value.offsetWidth)}px`\n        }\n      }\n    })\n  }\n}\n\nconst inputBlur = async (doRename: boolean) => {\n  if (doRename) {\n    await rename(itemLabel.value, props.item.label as string)\n  }\n\n  isEditing.value = false\n}\n</script>\n\n<style scoped>\n.p-breadcrumb-item-link,\n.p-breadcrumb-item-icon {\n  @apply select-none;\n}\n\n.p-breadcrumb-item-link {\n  @apply overflow-hidden;\n  padding: var(--p-breadcrumb-item-padding);\n}\n\n.p-breadcrumb-item-label {\n  @apply whitespace-nowrap text-ellipsis overflow-hidden;\n}\n</style>\n","<template>\n  <div\n    class=\"subgraph-breadcrumb w-auto\"\n    :class=\"{\n      'subgraph-breadcrumb-collapse': collapseTabs,\n      'subgraph-breadcrumb-overflow': overflowingTabs\n    }\"\n    :style=\"{\n      '--p-breadcrumb-gap': `${ITEM_GAP}px`,\n      '--p-breadcrumb-item-min-width': `${MIN_WIDTH}px`,\n      '--p-breadcrumb-item-padding': `${ITEM_PADDING}px`,\n      '--p-breadcrumb-icon-width': `${ICON_WIDTH}px`\n    }\"\n  >\n    <Breadcrumb\n      ref=\"breadcrumbRef\"\n      class=\"bg-transparent p-0\"\n      :model=\"items\"\n      aria-label=\"Graph navigation\"\n    >\n      <template #item=\"{ item }\">\n        <SubgraphBreadcrumbItem\n          :item=\"item\"\n          :is-active=\"item === items.at(-1)\"\n        />\n      </template>\n      <template #separator\n        ><span style=\"transform: scale(1.5)\"> / </span></template\n      >\n    </Breadcrumb>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Breadcrumb from 'primevue/breadcrumb'\nimport type { MenuItem } from 'primevue/menuitem'\nimport { computed, onUpdated, ref, watch } from 'vue'\n\nimport SubgraphBreadcrumbItem from '@/components/breadcrumb/SubgraphBreadcrumbItem.vue'\nimport { useOverflowObserver } from '@/composables/element/useOverflowObserver'\nimport { useCanvasStore } from '@/stores/graphStore'\nimport { useSubgraphNavigationStore } from '@/stores/subgraphNavigationStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\nimport { forEachSubgraphNode } from '@/utils/graphTraversalUtil'\n\nconst MIN_WIDTH = 28\nconst ITEM_GAP = 8\nconst ITEM_PADDING = 8\nconst ICON_WIDTH = 20\n\nconst workflowStore = useWorkflowStore()\nconst navigationStore = useSubgraphNavigationStore()\nconst breadcrumbRef = ref<InstanceType<typeof Breadcrumb>>()\nconst workflowName = computed(() => workflowStore.activeWorkflow?.filename)\nconst collapseTabs = ref(false)\nconst overflowingTabs = ref(false)\n\nconst breadcrumbElement = computed(() => {\n  if (!breadcrumbRef.value) return null\n\n  const el = (breadcrumbRef.value as unknown as { $el: HTMLElement }).$el\n  const list = el?.querySelector('.p-breadcrumb-list') as HTMLElement\n  return list\n})\n\nconst items = computed(() => {\n  const items = navigationStore.navigationStack.map<MenuItem>((subgraph) => ({\n    label: subgraph.name,\n    command: () => {\n      const canvas = useCanvasStore().getCanvas()\n      if (!canvas.graph) throw new TypeError('Canvas has no graph')\n\n      canvas.setGraph(subgraph)\n    },\n    updateTitle: (title: string) => {\n      const rootGraph = useCanvasStore().getCanvas().graph?.rootGraph\n      if (!rootGraph) return\n\n      forEachSubgraphNode(rootGraph, subgraph.id, (node) => {\n        node.title = title\n      })\n    }\n  }))\n\n  return [home.value, ...items]\n})\n\nconst home = computed(() => ({\n  label: workflowName.value,\n  icon: 'pi pi-home',\n  key: 'root',\n  command: () => {\n    const canvas = useCanvasStore().getCanvas()\n    if (!canvas.graph) throw new TypeError('Canvas has no graph')\n\n    canvas.setGraph(canvas.graph.rootGraph)\n  }\n}))\n\n// Check for overflow on breadcrumb items and collapse/expand the breadcrumb to fit\nlet overflowObserver: ReturnType<typeof useOverflowObserver> | undefined\nwatch(breadcrumbElement, (el) => {\n  overflowObserver?.dispose()\n  overflowObserver = undefined\n\n  if (!el) return\n\n  overflowObserver = useOverflowObserver(el, {\n    onCheck: (isOverflowing) => {\n      overflowingTabs.value = isOverflowing\n\n      if (collapseTabs.value) {\n        // Items are currently hidden, check if we can show them\n        if (!isOverflowing) {\n          const items = [\n            ...el.querySelectorAll('.p-breadcrumb-item')\n          ] as HTMLElement[]\n\n          if (items.length < 3) return\n\n          const itemsWithIcon = items.filter((item) =>\n            item.querySelector('.p-breadcrumb-item-link-icon-visible')\n          ).length\n          const separators = el.querySelectorAll(\n            '.p-breadcrumb-separator'\n          ) as NodeListOf<HTMLElement>\n          const separator = separators[separators.length - 1] as HTMLElement\n          const separatorWidth = separator.offsetWidth\n\n          // items + separators + gaps + icons\n          const itemsWidth =\n            (MIN_WIDTH + ITEM_PADDING + ITEM_PADDING) * items.length +\n            itemsWithIcon * ICON_WIDTH\n          const separatorsWidth = (items.length - 1) * separatorWidth\n          const gapsWidth = (items.length - 1) * (ITEM_GAP * 2)\n          const totalWidth = itemsWidth + separatorsWidth + gapsWidth\n          const containerWidth = el.clientWidth\n\n          if (totalWidth <= containerWidth) {\n            collapseTabs.value = false\n          }\n        }\n      } else if (isOverflowing) {\n        collapseTabs.value = true\n      }\n    }\n  })\n})\n\n// If e.g. the workflow name changes, we need to check the overflow again\nonUpdated(() => {\n  if (!overflowObserver?.disposed.value) {\n    overflowObserver?.checkOverflow()\n  }\n})\n</script>\n\n<style scoped>\n.subgraph-breadcrumb:not(:empty) {\n  flex: auto;\n  flex-shrink: 10000;\n  min-width: 120px;\n}\n\n.subgraph-breadcrumb,\n:deep(.p-breadcrumb) {\n  @apply overflow-hidden;\n}\n\n:deep(.p-breadcrumb-item) {\n  @apply flex items-center rounded-lg overflow-hidden;\n  min-width: calc(var(--p-breadcrumb-item-min-width) + 1rem);\n  /* Collapse middle items first */\n  flex-shrink: 10000;\n}\n\n:deep(.p-breadcrumb-item:has(.p-breadcrumb-item-link-icon-visible)) {\n  min-width: calc(var(--p-breadcrumb-item-min-width) + 1rem + 20px);\n}\n\n:deep(.p-breadcrumb-item:first-child) {\n  /* Then collapse the root workflow */\n  flex-shrink: 5000;\n}\n\n:deep(.p-breadcrumb-item:last-child) {\n  /* Then collapse the active item */\n  flex-shrink: 1;\n}\n\n:deep(.p-breadcrumb-item:hover),\n:deep(.p-breadcrumb-item:has(.p-breadcrumb-item-link-menu-visible)) {\n  background-color: color-mix(in srgb, var(--fg-color) 10%, transparent);\n  color: var(--fg-color);\n}\n</style>\n\n<style>\n.subgraph-breadcrumb-collapse .p-breadcrumb-list {\n  .p-breadcrumb-item,\n  .p-breadcrumb-separator {\n    @apply hidden;\n  }\n\n  .p-breadcrumb-item:nth-last-child(3),\n  .p-breadcrumb-separator:nth-last-child(2),\n  .p-breadcrumb-item:nth-last-child(1) {\n    @apply block;\n  }\n}\n</style>\n","<template>\n  <div\n    class=\"comfyui-logo-wrapper p-1 flex justify-center items-center cursor-pointer rounded-md mr-2\"\n    :class=\"{\n      'comfyui-logo-menu-visible': menuRef?.visible\n    }\"\n    :style=\"{\n      minWidth: isLargeSidebar ? '4rem' : 'auto'\n    }\"\n    @click=\"menuRef?.toggle($event)\"\n  >\n    <img\n      src=\"/assets/images/comfy-logo-mono.svg\"\n      alt=\"ComfyUI Logo\"\n      class=\"comfyui-logo h-7\"\n      @contextmenu=\"showNativeSystemMenu\"\n    />\n    <i class=\"pi pi-angle-down ml-1 text-[10px]\" />\n  </div>\n  <TieredMenu\n    ref=\"menuRef\"\n    :model=\"translatedItems\"\n    :popup=\"true\"\n    class=\"comfy-command-menu\"\n    :class=\"{\n      'comfy-command-menu-top': isTopMenu\n    }\"\n    @show=\"onMenuShow\"\n  >\n    <template #item=\"{ item, props }\">\n      <div\n        v-if=\"item.key === 'theme'\"\n        class=\"flex items-center gap-4 px-4 py-5\"\n        @click.stop.prevent\n      >\n        {{ item.label }}\n        <SelectButton\n          :options=\"[darkLabel, lightLabel]\"\n          :model-value=\"activeTheme\"\n          @click.stop.prevent\n          @update:model-value=\"onThemeChange\"\n        >\n          <template #option=\"{ option }\">\n            <div class=\"flex items-center gap-2\">\n              <i v-if=\"option === lightLabel\" class=\"pi pi-sun\" />\n              <i v-if=\"option === darkLabel\" class=\"pi pi-moon\" />\n              <span>{{ option }}</span>\n            </div>\n          </template>\n        </SelectButton>\n      </div>\n      <a\n        v-else\n        class=\"p-menubar-item-link px-4 py-2\"\n        v-bind=\"props.action\"\n        :href=\"item.url\"\n        target=\"_blank\"\n      >\n        <span v-if=\"item.icon\" class=\"p-menubar-item-icon\" :class=\"item.icon\" />\n        <span class=\"p-menubar-item-label text-nowrap\">{{ item.label }}</span>\n        <span\n          v-if=\"item?.comfyCommand?.keybinding\"\n          class=\"ml-auto border border-surface rounded text-muted text-xs text-nowrap p-1 keybinding-tag\"\n        >\n          {{ item.comfyCommand.keybinding.combo.toString() }}\n        </span>\n        <i v-if=\"item.items\" class=\"ml-auto pi pi-angle-right\" />\n      </a>\n    </template>\n  </TieredMenu>\n\n  <SubgraphBreadcrumb />\n</template>\n\n<script setup lang=\"ts\">\nimport type { MenuItem } from 'primevue/menuitem'\nimport SelectButton from 'primevue/selectbutton'\nimport TieredMenu, {\n  type TieredMenuMethods,\n  type TieredMenuState\n} from 'primevue/tieredmenu'\nimport { computed, nextTick, ref } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport SubgraphBreadcrumb from '@/components/breadcrumb/SubgraphBreadcrumb.vue'\nimport SettingDialogContent from '@/components/dialog/content/SettingDialogContent.vue'\nimport SettingDialogHeader from '@/components/dialog/header/SettingDialogHeader.vue'\nimport { useDialogService } from '@/services/dialogService'\nimport { useAboutPanelStore } from '@/stores/aboutPanelStore'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useDialogStore } from '@/stores/dialogStore'\nimport { useMenuItemStore } from '@/stores/menuItemStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useColorPaletteStore } from '@/stores/workspace/colorPaletteStore'\nimport { showNativeSystemMenu } from '@/utils/envUtil'\nimport { normalizeI18nKey } from '@/utils/formatUtil'\n\nconst colorPaletteStore = useColorPaletteStore()\nconst menuItemsStore = useMenuItemStore()\nconst commandStore = useCommandStore()\nconst dialogStore = useDialogStore()\nconst aboutPanelStore = useAboutPanelStore()\nconst settingStore = useSettingStore()\nconst { t } = useI18n()\n\nconst menuRef = ref<\n  ({ dirty: boolean } & TieredMenuMethods & TieredMenuState) | null\n>(null)\nconst isLargeSidebar = computed(\n  () => settingStore.get('Comfy.Sidebar.Size') !== 'small'\n)\nconst isTopMenu = computed(() => settingStore.get('Comfy.UseNewMenu') === 'Top')\n\nconst translateMenuItem = (item: MenuItem): MenuItem => {\n  const label = typeof item.label === 'function' ? item.label() : item.label\n  const translatedLabel = label\n    ? t(`menuLabels.${normalizeI18nKey(label)}`, label)\n    : undefined\n\n  return {\n    ...item,\n    label: translatedLabel,\n    items: item.items?.map(translateMenuItem)\n  }\n}\n\nconst showSettings = (defaultPanel?: string) => {\n  dialogStore.showDialog({\n    key: 'global-settings',\n    headerComponent: SettingDialogHeader,\n    component: SettingDialogContent,\n    props: {\n      defaultPanel\n    }\n  })\n}\n\n// Temporary duplicated from LoadWorkflowWarning.vue\n// Determines if ComfyUI-Manager is installed by checking for its badge in the about panel\n// This allows us to conditionally show the Manager button only when the extension is available\n// TODO: Remove this check when Manager functionality is fully migrated into core\nconst isManagerInstalled = computed(() => {\n  return aboutPanelStore.badges.some(\n    (badge) =>\n      badge.label.includes('ComfyUI-Manager') ||\n      badge.url.includes('ComfyUI-Manager')\n  )\n})\n\nconst showManageExtensions = () => {\n  if (isManagerInstalled.value) {\n    useDialogService().showManagerDialog()\n  } else {\n    showSettings('extension')\n  }\n}\n\nconst extraMenuItems: MenuItem[] = [\n  { separator: true },\n  {\n    key: 'theme',\n    label: t('menu.theme')\n  },\n  { separator: true },\n  {\n    key: 'manage-extensions',\n    label: t('menu.manageExtensions'),\n    icon: 'mdi mdi-puzzle-outline',\n    command: showManageExtensions\n  },\n  {\n    key: 'settings',\n    label: t('g.settings'),\n    icon: 'mdi mdi-cog-outline',\n    command: () => showSettings()\n  }\n]\n\nconst lightLabel = t('menu.light')\nconst darkLabel = t('menu.dark')\n\nconst activeTheme = computed(() => {\n  return colorPaletteStore.completedActivePalette.light_theme\n    ? lightLabel\n    : darkLabel\n})\n\nconst onThemeChange = async () => {\n  await commandStore.execute('Comfy.ToggleTheme')\n}\n\nconst translatedItems = computed(() => {\n  const items = menuItemsStore.menuItems.map(translateMenuItem)\n  let helpIndex = items.findIndex((item) => item.key === 'Help')\n  let helpItem: MenuItem | undefined\n\n  if (helpIndex !== -1) {\n    items[helpIndex].icon = 'mdi mdi-help-circle-outline'\n    // If help is not the last item (i.e. we have extension commands), separate them\n    const isLastItem = helpIndex !== items.length - 1\n    helpItem = items.splice(\n      helpIndex,\n      1,\n      ...(isLastItem\n        ? [\n            {\n              separator: true\n            }\n          ]\n        : [])\n    )[0]\n  }\n  helpIndex = items.length\n\n  items.splice(\n    helpIndex,\n    0,\n    ...extraMenuItems,\n    ...(helpItem\n      ? [\n          {\n            separator: true\n          },\n          helpItem\n        ]\n      : [])\n  )\n\n  return items\n})\n\nconst onMenuShow = () => {\n  void nextTick(() => {\n    // Force the menu to show submenus on hover\n    if (menuRef.value) {\n      menuRef.value.dirty = true\n    }\n  })\n}\n</script>\n\n<style scoped>\n:deep(.p-menubar-submenu.dropdown-direction-up) {\n  @apply top-auto bottom-full flex-col-reverse;\n}\n\n.keybinding-tag {\n  background: var(--p-content-hover-background);\n  border-color: var(--p-content-border-color);\n  border-style: solid;\n}\n\n.comfyui-logo-menu-visible,\n.comfyui-logo-wrapper:hover {\n  background-color: color-mix(in srgb, var(--fg-color) 10%, transparent);\n}\n</style>\n\n<style>\n.comfy-command-menu ul {\n  background-color: var(--comfy-menu-secondary-bg) !important;\n}\n\n.comfy-command-menu-top .p-tieredmenu-submenu {\n  left: calc(100% + 15px) !important;\n  top: -4px !important;\n}\n</style>\n","<!-- A popover that shows current user information and actions -->\n<template>\n  <div class=\"current-user-popover w-72\">\n    <!-- User Info Section -->\n    <div class=\"p-3\">\n      <div class=\"flex flex-col items-center\">\n        <UserAvatar\n          class=\"mb-3\"\n          :photo-url=\"userPhotoUrl\"\n          :pt:icon:class=\"{\n            '!text-2xl': !userPhotoUrl\n          }\"\n          size=\"large\"\n        />\n\n        <!-- User Details -->\n        <h3 class=\"text-lg font-semibold truncate my-0 mb-1\">\n          {{ userDisplayName || $t('g.user') }}\n        </h3>\n        <p v-if=\"userEmail\" class=\"text-sm text-muted truncate my-0\">\n          {{ userEmail }}\n        </p>\n      </div>\n    </div>\n\n    <Divider class=\"my-2\" />\n\n    <Button\n      class=\"justify-start\"\n      :label=\"$t('userSettings.title')\"\n      icon=\"pi pi-cog\"\n      text\n      fluid\n      severity=\"secondary\"\n      @click=\"handleOpenUserSettings\"\n    />\n\n    <Divider class=\"my-2\" />\n\n    <Button\n      class=\"justify-start\"\n      :label=\"$t('auth.signOut.signOut')\"\n      icon=\"pi pi-sign-out\"\n      text\n      fluid\n      severity=\"secondary\"\n      @click=\"handleLogout\"\n    />\n\n    <Divider class=\"my-2\" />\n\n    <Button\n      class=\"justify-start\"\n      :label=\"$t('credits.apiPricing')\"\n      icon=\"pi pi-external-link\"\n      text\n      fluid\n      severity=\"secondary\"\n      @click=\"handleOpenApiPricing\"\n    />\n\n    <Divider class=\"my-2\" />\n\n    <div class=\"w-full flex flex-col gap-2 p-2\">\n      <div class=\"text-muted text-sm\">\n        {{ $t('credits.yourCreditBalance') }}\n      </div>\n      <div class=\"flex justify-between items-center\">\n        <UserCredit text-class=\"text-2xl\" />\n        <Button :label=\"$t('credits.topUp.topUp')\" @click=\"handleTopUp\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Divider from 'primevue/divider'\nimport { onMounted } from 'vue'\n\nimport UserAvatar from '@/components/common/UserAvatar.vue'\nimport UserCredit from '@/components/common/UserCredit.vue'\nimport { useCurrentUser } from '@/composables/auth/useCurrentUser'\nimport { useFirebaseAuthActions } from '@/composables/auth/useFirebaseAuthActions'\nimport { useDialogService } from '@/services/dialogService'\n\nconst emit = defineEmits<{\n  close: []\n}>()\n\nconst { userDisplayName, userEmail, userPhotoUrl } = useCurrentUser()\nconst authActions = useFirebaseAuthActions()\nconst dialogService = useDialogService()\n\nconst handleOpenUserSettings = () => {\n  dialogService.showSettingsDialog('user')\n  emit('close')\n}\n\nconst handleTopUp = () => {\n  dialogService.showTopUpCreditsDialog()\n  emit('close')\n}\n\nconst handleLogout = async () => {\n  await authActions.logout()\n  emit('close')\n}\n\nconst handleOpenApiPricing = () => {\n  window.open('https://docs.comfy.org/tutorials/api-nodes/pricing', '_blank')\n  emit('close')\n}\n\nonMounted(() => {\n  void authActions.fetchBalance()\n})\n</script>\n","<!-- A button that shows current authenticated user's avatar -->\n<template>\n  <div>\n    <Button\n      v-if=\"isLoggedIn\"\n      class=\"user-profile-button p-1\"\n      severity=\"secondary\"\n      text\n      aria-label=\"user profile\"\n      @click=\"popover?.toggle($event)\"\n    >\n      <div\n        class=\"flex items-center rounded-full bg-[var(--p-content-background)]\"\n      >\n        <UserAvatar :photo-url=\"photoURL\" />\n\n        <i class=\"pi pi-chevron-down px-1\" :style=\"{ fontSize: '0.5rem' }\" />\n      </div>\n    </Button>\n\n    <Popover ref=\"popover\" :show-arrow=\"false\">\n      <CurrentUserPopover @close=\"closePopover\" />\n    </Popover>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Button from 'primevue/button'\nimport Popover from 'primevue/popover'\nimport { computed, ref } from 'vue'\n\nimport UserAvatar from '@/components/common/UserAvatar.vue'\nimport { useCurrentUser } from '@/composables/auth/useCurrentUser'\n\nimport CurrentUserPopover from './CurrentUserPopover.vue'\n\nconst { isLoggedIn, userPhotoUrl } = useCurrentUser()\n\nconst popover = ref<InstanceType<typeof Popover> | null>(null)\nconst photoURL = computed<string | undefined>(\n  () => userPhotoUrl.value ?? undefined\n)\n\nconst closePopover = () => {\n  popover.value?.hide()\n}\n</script>\n","<template>\n  <div>\n    <div\n      v-show=\"showTopMenu && workflowTabsPosition === 'Topbar'\"\n      class=\"w-full flex content-end z-[1001] h-[38px]\"\n      style=\"background: var(--border-color)\"\n    >\n      <WorkflowTabs />\n    </div>\n    <div\n      v-show=\"showTopMenu\"\n      ref=\"topMenuRef\"\n      class=\"comfyui-menu flex items-center\"\n      :class=\"{ dropzone: isDropZone, 'dropzone-active': isDroppable }\"\n    >\n      <CommandMenubar />\n      <div class=\"flex-grow min-w-0 app-drag h-full\"></div>\n      <div\n        ref=\"menuRight\"\n        class=\"comfyui-menu-right flex-shrink-1 overflow-auto\"\n      />\n      <Actionbar />\n      <CurrentUserButton class=\"flex-shrink-0\" />\n    </div>\n\n    <!-- Virtual top menu for native window (drag handle) -->\n    <div\n      v-show=\"isNativeWindow() && !showTopMenu\"\n      class=\"fixed top-0 left-0 app-drag w-full h-[var(--comfy-topbar-height)]\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useEventBus } from '@vueuse/core'\nimport { computed, onMounted, provide, ref } from 'vue'\n\nimport Actionbar from '@/components/actionbar/ComfyActionbar.vue'\nimport CommandMenubar from '@/components/topbar/CommandMenubar.vue'\nimport CurrentUserButton from '@/components/topbar/CurrentUserButton.vue'\nimport WorkflowTabs from '@/components/topbar/WorkflowTabs.vue'\nimport { app } from '@/scripts/app'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport { electronAPI, isElectron, isNativeWindow } from '@/utils/envUtil'\n\nconst workspaceState = useWorkspaceStore()\nconst settingStore = useSettingStore()\n\nconst menuSetting = computed(() => settingStore.get('Comfy.UseNewMenu'))\nconst betaMenuEnabled = computed(() => menuSetting.value !== 'Disabled')\nconst showTopMenu = computed(\n  () => betaMenuEnabled.value && !workspaceState.focusMode\n)\nconst workflowTabsPosition = computed(() =>\n  settingStore.get('Comfy.Workflow.WorkflowTabsPosition')\n)\n\nconst menuRight = ref<HTMLDivElement | null>(null)\n// Menu-right holds legacy topbar elements attached by custom scripts\nonMounted(() => {\n  if (menuRight.value) {\n    app.menu.element.style.width = 'fit-content'\n    menuRight.value.appendChild(app.menu.element)\n  }\n})\n\nconst topMenuRef = ref<HTMLDivElement | null>(null)\nprovide('topMenuRef', topMenuRef)\nconst eventBus = useEventBus<string>('topMenu')\nconst isDropZone = ref(false)\nconst isDroppable = ref(false)\neventBus.on((event: string, payload: any) => {\n  if (event === 'updateHighlight') {\n    isDropZone.value = payload.isDragging\n    isDroppable.value = payload.isOverlapping && payload.isDragging\n  }\n})\n\nonMounted(() => {\n  if (isElectron()) {\n    electronAPI().changeTheme({\n      height: topMenuRef.value?.getBoundingClientRect().height ?? 0\n    })\n  }\n})\n</script>\n\n<style scoped>\n.comfyui-menu {\n  width: 100vw;\n  height: var(--comfy-topbar-height);\n  background: var(--comfy-menu-bg);\n  color: var(--fg-color);\n  box-shadow: var(--bar-shadow);\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 0.8em;\n  box-sizing: border-box;\n  z-index: 1000;\n  order: 0;\n  grid-column: 1/-1;\n}\n\n.comfyui-menu.dropzone {\n  background: var(--p-highlight-background);\n}\n\n.comfyui-menu.dropzone-active {\n  background: var(--p-highlight-background-focus);\n}\n\n:deep(.p-menubar-item-label) {\n  line-height: revert;\n}\n\n.comfyui-logo {\n  user-select: none;\n  cursor: default;\n  filter: invert(0);\n}\n\n.dark-theme .comfyui-logo {\n  filter: invert(1);\n}\n\n.comfyui-menu-button-hide {\n  background-color: var(--comfy-menu-secondary-bg);\n  border-left: 1px solid var(--border-color);\n}\n</style>\n\n<style>\n.comfyui-menu-right::-webkit-scrollbar {\n  max-height: 5px;\n}\n\n.comfyui-menu-right:hover::-webkit-scrollbar {\n  cursor: grab;\n}\n\n.comfyui-menu-right::-webkit-scrollbar-track {\n  background: color-mix(in srgb, var(--border-color) 60%, transparent);\n}\n\n.comfyui-menu-right:hover::-webkit-scrollbar-track {\n  background: color-mix(in srgb, var(--border-color) 80%, transparent);\n}\n\n.comfyui-menu-right::-webkit-scrollbar-thumb {\n  background: color-mix(in srgb, var(--fg-color) 30%, transparent);\n}\n\n.comfyui-menu-right::-webkit-scrollbar-thumb:hover {\n  background: color-mix(in srgb, var(--fg-color) 80%, transparent);\n}\n</style>\n","import { useTitle } from '@vueuse/core'\nimport { computed } from 'vue'\n\nimport { t } from '@/i18n'\nimport { useExecutionStore } from '@/stores/executionStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useWorkflowStore } from '@/stores/workflowStore'\n\nconst DEFAULT_TITLE = 'ComfyUI'\nconst TITLE_SUFFIX = ' - ComfyUI'\n\nexport const useBrowserTabTitle = () => {\n  const executionStore = useExecutionStore()\n  const settingStore = useSettingStore()\n  const workflowStore = useWorkflowStore()\n\n  const executionText = computed(() =>\n    executionStore.isIdle\n      ? ''\n      : `[${Math.round(executionStore.executionProgress * 100)}%]`\n  )\n\n  const newMenuEnabled = computed(\n    () => settingStore.get('Comfy.UseNewMenu') !== 'Disabled'\n  )\n\n  const isUnsavedText = computed(() =>\n    workflowStore.activeWorkflow?.isModified ||\n    !workflowStore.activeWorkflow?.isPersisted\n      ? ' *'\n      : ''\n  )\n  const workflowNameText = computed(() => {\n    const workflowName = workflowStore.activeWorkflow?.filename\n    return workflowName\n      ? isUnsavedText.value + workflowName + TITLE_SUFFIX\n      : DEFAULT_TITLE\n  })\n\n  const nodeExecutionTitle = computed(() => {\n    // Check if any nodes are in progress\n    const nodeProgressEntries = Object.entries(\n      executionStore.nodeProgressStates\n    )\n    const runningNodes = nodeProgressEntries.filter(\n      ([_, state]) => state.state === 'running'\n    )\n\n    if (runningNodes.length === 0) {\n      return ''\n    }\n\n    // If multiple nodes are running\n    if (runningNodes.length > 1) {\n      return `${executionText.value}[${runningNodes.length} ${t('g.nodesRunning', 'nodes running')}]`\n    }\n\n    // If only one node is running\n    const [nodeId, state] = runningNodes[0]\n    const progress = Math.round((state.value / state.max) * 100)\n    const nodeType =\n      executionStore.activePrompt?.workflow?.changeTracker?.activeState.nodes.find(\n        (n) => String(n.id) === nodeId\n      )?.type || 'Node'\n\n    return `${executionText.value}[${progress}%] ${nodeType}`\n  })\n\n  const workflowTitle = computed(\n    () =>\n      executionText.value +\n      (newMenuEnabled.value ? workflowNameText.value : DEFAULT_TITLE)\n  )\n\n  const title = computed(() => nodeExecutionTitle.value || workflowTitle.value)\n  useTitle(title)\n}\n","import _ from 'lodash'\n\nimport {\n  type INodeOutputSlot,\n  type LGraph,\n  type LGraphNode,\n  LLink,\n  LiteGraph,\n  type Point\n} from '@/lib/litegraph/src/litegraph'\nimport type { IBaseWidget } from '@/lib/litegraph/src/types/widgets'\nimport { parseFilePath } from '@/utils/formatUtil'\n\nimport { app } from './app'\n\nconst fluxKontextGroupNode = {\n  nodes: [\n    {\n      id: -1,\n      type: 'Reroute',\n      pos: [2354.87890625, -127.23468780517578],\n      size: [75, 26],\n      flags: {},\n      order: 20,\n      mode: 0,\n      inputs: [{ name: '', type: '*', link: null }],\n      outputs: [{ name: '', type: '*', links: null }],\n      properties: { showOutputText: false, horizontal: false },\n      index: 0\n    },\n    {\n      id: -1,\n      type: 'ReferenceLatent',\n      pos: [2730, -220],\n      size: [197.712890625, 46],\n      flags: {},\n      order: 22,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'conditioning',\n          name: 'conditioning',\n          type: 'CONDITIONING',\n          link: null\n        },\n        {\n          localized_name: 'latent',\n          name: 'latent',\n          shape: 7,\n          type: 'LATENT',\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'CONDITIONING',\n          name: 'CONDITIONING',\n          type: 'CONDITIONING',\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'ReferenceLatent',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      index: 1\n    },\n    {\n      id: -1,\n      type: 'VAEDecode',\n      pos: [3270, -110],\n      size: [210, 46],\n      flags: {},\n      order: 25,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'samples',\n          name: 'samples',\n          type: 'LATENT',\n          link: null\n        },\n        {\n          localized_name: 'vae',\n          name: 'vae',\n          type: 'VAE',\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'IMAGE',\n          name: 'IMAGE',\n          type: 'IMAGE',\n          slot_index: 0,\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'VAEDecode',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      index: 2\n    },\n    {\n      id: -1,\n      type: 'KSampler',\n      pos: [2930, -110],\n      size: [315, 262],\n      flags: {},\n      order: 24,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'model',\n          name: 'model',\n          type: 'MODEL',\n          link: null\n        },\n        {\n          localized_name: 'positive',\n          name: 'positive',\n          type: 'CONDITIONING',\n          link: null\n        },\n        {\n          localized_name: 'negative',\n          name: 'negative',\n          type: 'CONDITIONING',\n          link: null\n        },\n        {\n          localized_name: 'latent_image',\n          name: 'latent_image',\n          type: 'LATENT',\n          link: null\n        },\n        {\n          localized_name: 'seed',\n          name: 'seed',\n          type: 'INT',\n          widget: { name: 'seed' },\n          link: null\n        },\n        {\n          localized_name: 'steps',\n          name: 'steps',\n          type: 'INT',\n          widget: { name: 'steps' },\n          link: null\n        },\n        {\n          localized_name: 'cfg',\n          name: 'cfg',\n          type: 'FLOAT',\n          widget: { name: 'cfg' },\n          link: null\n        },\n        {\n          localized_name: 'sampler_name',\n          name: 'sampler_name',\n          type: 'COMBO',\n          widget: { name: 'sampler_name' },\n          link: null\n        },\n        {\n          localized_name: 'scheduler',\n          name: 'scheduler',\n          type: 'COMBO',\n          widget: { name: 'scheduler' },\n          link: null\n        },\n        {\n          localized_name: 'denoise',\n          name: 'denoise',\n          type: 'FLOAT',\n          widget: { name: 'denoise' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'LATENT',\n          name: 'LATENT',\n          type: 'LATENT',\n          slot_index: 0,\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'KSampler',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: [972054013131369, 'fixed', 20, 1, 'euler', 'simple', 1],\n      index: 3\n    },\n    {\n      id: -1,\n      type: 'FluxGuidance',\n      pos: [2940, -220],\n      size: [211.60000610351562, 58],\n      flags: {},\n      order: 23,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'conditioning',\n          name: 'conditioning',\n          type: 'CONDITIONING',\n          link: null\n        },\n        {\n          localized_name: 'guidance',\n          name: 'guidance',\n          type: 'FLOAT',\n          widget: { name: 'guidance' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'CONDITIONING',\n          name: 'CONDITIONING',\n          type: 'CONDITIONING',\n          slot_index: 0,\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'FluxGuidance',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: [2.5],\n      index: 4\n    },\n    {\n      id: -1,\n      type: 'SaveImage',\n      pos: [3490, -110],\n      size: [985.3012084960938, 1060.3828125],\n      flags: {},\n      order: 26,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'images',\n          name: 'images',\n          type: 'IMAGE',\n          link: null\n        },\n        {\n          localized_name: 'filename_prefix',\n          name: 'filename_prefix',\n          type: 'STRING',\n          widget: { name: 'filename_prefix' },\n          link: null\n        }\n      ],\n      outputs: [],\n      properties: { cnr_id: 'comfy-core', ver: '0.3.38' },\n      widgets_values: ['ComfyUI'],\n      index: 5\n    },\n    {\n      id: -1,\n      type: 'CLIPTextEncode',\n      pos: [2500, -110],\n      size: [422.84503173828125, 164.31304931640625],\n      flags: {},\n      order: 12,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'clip',\n          name: 'clip',\n          type: 'CLIP',\n          link: null\n        },\n        {\n          localized_name: 'text',\n          name: 'text',\n          type: 'STRING',\n          widget: { name: 'text' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'CONDITIONING',\n          name: 'CONDITIONING',\n          type: 'CONDITIONING',\n          slot_index: 0,\n          links: []\n        }\n      ],\n      title: 'CLIP Text Encode (Positive Prompt)',\n      properties: {\n        'Node name for S&R': 'CLIPTextEncode',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: ['there is a bright light'],\n      color: '#232',\n      bgcolor: '#353',\n      index: 6\n    },\n    {\n      id: -1,\n      type: 'CLIPTextEncode',\n      pos: [2504.1435546875, 97.9598617553711],\n      size: [422.84503173828125, 164.31304931640625],\n      flags: { collapsed: true },\n      order: 13,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'clip',\n          name: 'clip',\n          type: 'CLIP',\n          link: null\n        },\n        {\n          localized_name: 'text',\n          name: 'text',\n          type: 'STRING',\n          widget: { name: 'text' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'CONDITIONING',\n          name: 'CONDITIONING',\n          type: 'CONDITIONING',\n          slot_index: 0,\n          links: []\n        }\n      ],\n      title: 'CLIP Text Encode (Negative Prompt)',\n      properties: {\n        'Node name for S&R': 'CLIPTextEncode',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: [''],\n      color: '#322',\n      bgcolor: '#533',\n      index: 7\n    },\n    {\n      id: -1,\n      type: 'UNETLoader',\n      pos: [2630, -370],\n      size: [270, 82],\n      flags: {},\n      order: 6,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'unet_name',\n          name: 'unet_name',\n          type: 'COMBO',\n          widget: { name: 'unet_name' },\n          link: null\n        },\n        {\n          localized_name: 'weight_dtype',\n          name: 'weight_dtype',\n          type: 'COMBO',\n          widget: { name: 'weight_dtype' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'MODEL',\n          name: 'MODEL',\n          type: 'MODEL',\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'UNETLoader',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: ['flux1-kontext-dev.safetensors', 'default'],\n      color: '#223',\n      bgcolor: '#335',\n      index: 8\n    },\n    {\n      id: -1,\n      type: 'DualCLIPLoader',\n      pos: [2100, -290],\n      size: [337.76861572265625, 130],\n      flags: {},\n      order: 8,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'clip_name1',\n          name: 'clip_name1',\n          type: 'COMBO',\n          widget: { name: 'clip_name1' },\n          link: null\n        },\n        {\n          localized_name: 'clip_name2',\n          name: 'clip_name2',\n          type: 'COMBO',\n          widget: { name: 'clip_name2' },\n          link: null\n        },\n        {\n          localized_name: 'type',\n          name: 'type',\n          type: 'COMBO',\n          widget: { name: 'type' },\n          link: null\n        },\n        {\n          localized_name: 'device',\n          name: 'device',\n          shape: 7,\n          type: 'COMBO',\n          widget: { name: 'device' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'CLIP',\n          name: 'CLIP',\n          type: 'CLIP',\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'DualCLIPLoader',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: [\n        'clip_l.safetensors',\n        't5xxl_fp8_e4m3fn_scaled.safetensors',\n        'flux',\n        'default'\n      ],\n      color: '#223',\n      bgcolor: '#335',\n      index: 9\n    },\n    {\n      id: -1,\n      type: 'VAELoader',\n      pos: [2960, -370],\n      size: [270, 58],\n      flags: {},\n      order: 7,\n      mode: 0,\n      inputs: [\n        {\n          localized_name: 'vae_name',\n          name: 'vae_name',\n          type: 'COMBO',\n          widget: { name: 'vae_name' },\n          link: null\n        }\n      ],\n      outputs: [\n        {\n          localized_name: 'VAE',\n          name: 'VAE',\n          type: 'VAE',\n          links: []\n        }\n      ],\n      properties: {\n        'Node name for S&R': 'VAELoader',\n        cnr_id: 'comfy-core',\n        ver: '0.3.38'\n      },\n      widgets_values: ['ae.safetensors'],\n      color: '#223',\n      bgcolor: '#335',\n      index: 10\n    }\n  ],\n  links: [\n    [6, 0, 1, 0, 72, 'CONDITIONING'],\n    [0, 0, 1, 1, 66, '*'],\n    [3, 0, 2, 0, 69, 'LATENT'],\n    [10, 0, 2, 1, 76, 'VAE'],\n    [8, 0, 3, 0, 74, 'MODEL'],\n    [4, 0, 3, 1, 70, 'CONDITIONING'],\n    [7, 0, 3, 2, 73, 'CONDITIONING'],\n    [0, 0, 3, 3, 66, '*'],\n    [1, 0, 4, 0, 67, 'CONDITIONING'],\n    [2, 0, 5, 0, 68, 'IMAGE'],\n    [9, 0, 6, 0, 75, 'CLIP'],\n    [9, 0, 7, 0, 75, 'CLIP']\n  ],\n  external: [],\n  config: {\n    '0': {},\n    '1': {},\n    '2': { output: { '0': { visible: true } } },\n    '3': {\n      output: { '0': { visible: true } },\n      input: {\n        denoise: { visible: false },\n        cfg: { visible: false }\n      }\n    },\n    '4': {},\n    '5': {},\n    '6': {},\n    '7': { input: { text: { visible: false } } },\n    '8': { input: { weight_dtype: { visible: false } } },\n    '9': { input: { type: { visible: false }, device: { visible: false } } },\n    '10': {}\n  }\n}\n\nexport async function ensureGraphHasFluxKontextGroupNode(\n  graph: LGraph & { extra: { groupNodes?: Record<string, any> } }\n) {\n  graph.extra ??= {}\n  graph.extra.groupNodes ??= {}\n  if (graph.extra.groupNodes['FLUX.1 Kontext Image Edit']) return\n\n  graph.extra.groupNodes['FLUX.1 Kontext Image Edit'] =\n    structuredClone(fluxKontextGroupNode)\n\n  // Lazy import to avoid circular dependency issues\n  const { GroupNodeConfig } = await import('@/extensions/core/groupNode')\n  await GroupNodeConfig.registerFromWorkflow(\n    {\n      'FLUX.1 Kontext Image Edit':\n        graph.extra.groupNodes['FLUX.1 Kontext Image Edit']\n    },\n    []\n  )\n}\n\nexport async function addFluxKontextGroupNode(fromNode: LGraphNode) {\n  const { canvas } = app\n  const { graph } = canvas\n  if (!graph) throw new TypeError('Graph is not initialized')\n  await ensureGraphHasFluxKontextGroupNode(graph)\n\n  const node = LiteGraph.createNode('workflow>FLUX.1 Kontext Image Edit')\n  if (!node) throw new TypeError('Failed to create node')\n\n  const pos = getPosToRightOfNode(fromNode)\n\n  graph.add(node)\n  node.pos = pos\n  app.canvas.processSelect(node, undefined)\n\n  connectPreviousLatent(fromNode, node)\n\n  const symb = Object.getOwnPropertySymbols(node)[0]\n  // @ts-expect-error It's there -- promise.\n  node[symb].populateWidgets()\n\n  setWidgetValues(node)\n}\n\nfunction setWidgetValues(node: LGraphNode) {\n  const seedInput = node.widgets?.find((x) => x.name === 'seed')\n  if (!seedInput) throw new TypeError('Seed input not found')\n  seedInput.value = Math.floor(Math.random() * 1_125_899_906_842_624)\n\n  const firstClip = node.widgets?.find((x) => x.name === 'clip_name1')\n  setPreferredValue('t5xxl_fp8_e4m3fn_scaled.safetensors', 't5xxl', firstClip)\n\n  const secondClip = node.widgets?.find((x) => x.name === 'clip_name2')\n  setPreferredValue('clip_l.safetensors', 'clip_l', secondClip)\n\n  const unet = node.widgets?.find((x) => x.name === 'unet_name')\n  setPreferredValue('flux1-dev-kontext_fp8_scaled.safetensors', 'kontext', unet)\n\n  const vae = node.widgets?.find((x) => x.name === 'vae_name')\n  setPreferredValue('ae.safetensors', 'ae.s', vae)\n}\n\nfunction setPreferredValue(\n  preferred: string,\n  match: string,\n  widget: IBaseWidget | undefined\n): void {\n  if (!widget) throw new TypeError('Widget not found')\n\n  const { values } = widget.options\n  if (!Array.isArray(values)) return\n\n  // Match against filename portion only\n  const mapped = values.map((x) => parseFilePath(x).filename)\n  const value =\n    mapped.find((x) => x === preferred) ??\n    mapped.find((x) => x.includes?.(match))\n  widget.value = value ?? preferred\n}\n\nfunction getPosToRightOfNode(fromNode: LGraphNode) {\n  const nodes = app.canvas.graph?.nodes\n  if (!nodes) throw new TypeError('Could not get graph nodes')\n\n  const pos = [\n    fromNode.pos[0] + fromNode.size[0] + 100,\n    fromNode.pos[1]\n  ] satisfies Point\n\n  while (nodes.find((x) => isPointTooClose(x.pos, pos))) {\n    pos[0] += 20\n    pos[1] += 20\n  }\n\n  return pos\n}\n\nfunction connectPreviousLatent(fromNode: LGraphNode, toEditNode: LGraphNode) {\n  const { canvas } = app\n  const { graph } = canvas\n  if (!graph) throw new TypeError('Graph is not initialized')\n\n  const l = findNearestOutputOfType([fromNode], 'LATENT')\n  if (!l) {\n    const imageOutput = findNearestOutputOfType([fromNode], 'IMAGE')\n    if (!imageOutput) throw new TypeError('No image output found')\n\n    const vaeEncode = LiteGraph.createNode('VAEEncode')\n    if (!vaeEncode) throw new TypeError('Failed to create node')\n\n    const { node: imageNode, index: imageIndex } = imageOutput\n    graph.add(vaeEncode)\n    vaeEncode.pos = getPosToRightOfNode(fromNode)\n    vaeEncode.pos[1] -= 200\n\n    vaeEncode.connect(0, toEditNode, 0)\n    imageNode.connect(imageIndex, vaeEncode, 0)\n    return\n  }\n\n  const { node, index } = l\n\n  node.connect(index, toEditNode, 0)\n}\n\nfunction getInputNodes(node: LGraphNode): LGraphNode[] {\n  return node.inputs\n    .map((x) => LLink.resolve(x.link, app.graph)?.outputNode)\n    .filter((x) => !!x)\n}\n\nfunction getOutputOfType(\n  node: LGraphNode,\n  type: string\n): {\n  output: INodeOutputSlot\n  index: number\n} {\n  const index = node.outputs.findIndex((x) => x.type === type)\n  const output = node.outputs[index]\n  return { output, index }\n}\n\nfunction findNearestOutputOfType(\n  nodes: Iterable<LGraphNode>,\n  type: string = 'LATENT',\n  depth: number = 0\n): { node: LGraphNode; index: number } | undefined {\n  for (const node of nodes) {\n    const { output, index } = getOutputOfType(node, type)\n    if (output) return { node, index }\n  }\n\n  if (depth < 3) {\n    const closestNodes = new Set([...nodes].flatMap((x) => getInputNodes(x)))\n    const res = findNearestOutputOfType(closestNodes, type, depth + 1)\n    if (res) return res\n  }\n}\n\nfunction isPointTooClose(a: Point, b: Point, precision: number = 5) {\n  return Math.abs(a[0] - b[0]) < precision && Math.abs(a[1] - b[1]) < precision\n}\n","import type { LGraphNode } from '@/lib/litegraph/src/litegraph'\n\n/**\n * Checks if a node is an output node.\n * Output nodes are nodes that have the output_node flag set in their nodeData.\n *\n * @param node - The node to check\n * @returns True if the node is an output node, false otherwise\n */\nexport const isOutputNode = (node: LGraphNode) =>\n  node.constructor.nodeData?.output_node\n\n/**\n * Filters nodes to find only output nodes.\n * Output nodes are nodes that have the output_node flag set in their nodeData.\n *\n * @param nodes - Array of nodes to filter\n * @returns Array of output nodes only\n */\nexport const filterOutputNodes = (nodes: LGraphNode[]): LGraphNode[] =>\n  nodes.filter(isOutputNode)\n","import { useFirebaseAuthActions } from '@/composables/auth/useFirebaseAuthActions'\nimport { useSelectedLiteGraphItems } from '@/composables/canvas/useSelectedLiteGraphItems'\nimport {\n  DEFAULT_DARK_COLOR_PALETTE,\n  DEFAULT_LIGHT_COLOR_PALETTE\n} from '@/constants/coreColorPalettes'\nimport { t } from '@/i18n'\nimport {\n  LGraphEventMode,\n  LGraphGroup,\n  LGraphNode,\n  LiteGraph\n} from '@/lib/litegraph/src/litegraph'\nimport { Point } from '@/lib/litegraph/src/litegraph'\nimport { api } from '@/scripts/api'\nimport { app } from '@/scripts/app'\nimport { addFluxKontextGroupNode } from '@/scripts/fluxKontextEditNode'\nimport { useDialogService } from '@/services/dialogService'\nimport { useLitegraphService } from '@/services/litegraphService'\nimport { useWorkflowService } from '@/services/workflowService'\nimport type { ComfyCommand } from '@/stores/commandStore'\nimport { useExecutionStore } from '@/stores/executionStore'\nimport { useCanvasStore, useTitleEditorStore } from '@/stores/graphStore'\nimport { useQueueSettingsStore, useQueueStore } from '@/stores/queueStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useSubgraphNavigationStore } from '@/stores/subgraphNavigationStore'\nimport { useToastStore } from '@/stores/toastStore'\nimport { type ComfyWorkflow, useWorkflowStore } from '@/stores/workflowStore'\nimport { useBottomPanelStore } from '@/stores/workspace/bottomPanelStore'\nimport { useColorPaletteStore } from '@/stores/workspace/colorPaletteStore'\nimport { useSearchBoxStore } from '@/stores/workspace/searchBoxStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport {\n  getAllNonIoNodesInSubgraph,\n  getExecutionIdsForSelectedNodes\n} from '@/utils/graphTraversalUtil'\nimport { filterOutputNodes } from '@/utils/nodeFilterUtil'\n\nconst moveSelectedNodesVersionAdded = '1.22.2'\n\nexport function useCoreCommands(): ComfyCommand[] {\n  const workflowService = useWorkflowService()\n  const workflowStore = useWorkflowStore()\n  const dialogService = useDialogService()\n  const colorPaletteStore = useColorPaletteStore()\n  const firebaseAuthActions = useFirebaseAuthActions()\n  const toastStore = useToastStore()\n  const canvasStore = useCanvasStore()\n  const executionStore = useExecutionStore()\n\n  const bottomPanelStore = useBottomPanelStore()\n\n  const { getSelectedNodes, toggleSelectedNodesMode } =\n    useSelectedLiteGraphItems()\n  const getTracker = () => workflowStore.activeWorkflow?.changeTracker\n\n  const moveSelectedNodes = (\n    positionUpdater: (pos: Point, gridSize: number) => Point\n  ) => {\n    const selectedNodes = getSelectedNodes()\n    if (selectedNodes.length === 0) return\n\n    const gridSize = useSettingStore().get('Comfy.SnapToGrid.GridSize')\n    selectedNodes.forEach((node) => {\n      node.pos = positionUpdater(node.pos, gridSize)\n    })\n    app.canvas.state.selectionChanged = true\n    app.canvas.setDirty(true, true)\n  }\n\n  const commands = [\n    {\n      id: 'Comfy.NewBlankWorkflow',\n      icon: 'pi pi-plus',\n      label: 'New Blank Workflow',\n      menubarLabel: 'New',\n      category: 'essentials' as const,\n      function: () => workflowService.loadBlankWorkflow()\n    },\n    {\n      id: 'Comfy.OpenWorkflow',\n      icon: 'pi pi-folder-open',\n      label: 'Open Workflow',\n      menubarLabel: 'Open',\n      category: 'essentials' as const,\n      function: () => {\n        app.ui.loadFile()\n      }\n    },\n    {\n      id: 'Comfy.LoadDefaultWorkflow',\n      icon: 'pi pi-code',\n      label: 'Load Default Workflow',\n      function: () => workflowService.loadDefaultWorkflow()\n    },\n    {\n      id: 'Comfy.SaveWorkflow',\n      icon: 'pi pi-save',\n      label: 'Save Workflow',\n      menubarLabel: 'Save',\n      category: 'essentials' as const,\n      function: async () => {\n        const workflow = useWorkflowStore().activeWorkflow as ComfyWorkflow\n        if (!workflow) return\n\n        await workflowService.saveWorkflow(workflow)\n      }\n    },\n    {\n      id: 'Comfy.SaveWorkflowAs',\n      icon: 'pi pi-save',\n      label: 'Save Workflow As',\n      menubarLabel: 'Save As',\n      category: 'essentials' as const,\n      function: async () => {\n        const workflow = useWorkflowStore().activeWorkflow as ComfyWorkflow\n        if (!workflow) return\n\n        await workflowService.saveWorkflowAs(workflow)\n      }\n    },\n    {\n      id: 'Comfy.ExportWorkflow',\n      icon: 'pi pi-download',\n      label: 'Export Workflow',\n      menubarLabel: 'Export',\n      category: 'essentials' as const,\n      function: async () => {\n        await workflowService.exportWorkflow('workflow', 'workflow')\n      }\n    },\n    {\n      id: 'Comfy.ExportWorkflowAPI',\n      icon: 'pi pi-download',\n      label: 'Export Workflow (API Format)',\n      menubarLabel: 'Export (API)',\n      function: async () => {\n        await workflowService.exportWorkflow('workflow_api', 'output')\n      }\n    },\n    {\n      id: 'Comfy.Undo',\n      icon: 'pi pi-undo',\n      label: 'Undo',\n      category: 'essentials' as const,\n      function: async () => {\n        await getTracker()?.undo?.()\n      }\n    },\n    {\n      id: 'Comfy.Redo',\n      icon: 'pi pi-refresh',\n      label: 'Redo',\n      category: 'essentials' as const,\n      function: async () => {\n        await getTracker()?.redo?.()\n      }\n    },\n    {\n      id: 'Comfy.ClearWorkflow',\n      icon: 'pi pi-trash',\n      label: 'Clear Workflow',\n      category: 'essentials' as const,\n      function: () => {\n        const settingStore = useSettingStore()\n        if (\n          !settingStore.get('Comfy.ConfirmClear') ||\n          confirm('Clear workflow?')\n        ) {\n          app.clean()\n          if (app.canvas.subgraph) {\n            // `clear` is not implemented on subgraphs and the parent class's\n            // (`LGraph`) `clear` breaks the subgraph structure. For subgraphs,\n            // just clear the nodes but preserve input/output nodes and structure\n            const subgraph = app.canvas.subgraph\n            const nonIoNodes = getAllNonIoNodesInSubgraph(subgraph)\n            nonIoNodes.forEach((node) => subgraph.remove(node))\n          } else {\n            app.graph.clear()\n          }\n          api.dispatchCustomEvent('graphCleared')\n        }\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ResetView',\n      icon: 'pi pi-expand',\n      label: 'Reset View',\n      function: () => {\n        useLitegraphService().resetView()\n      }\n    },\n    {\n      id: 'Comfy.OpenClipspace',\n      icon: 'pi pi-clipboard',\n      label: 'Clipspace',\n      function: () => {\n        app.openClipspace()\n      }\n    },\n    {\n      id: 'Comfy.RefreshNodeDefinitions',\n      icon: 'pi pi-refresh',\n      label: 'Refresh Node Definitions',\n      category: 'essentials' as const,\n      function: async () => {\n        await app.refreshComboInNodes()\n      }\n    },\n    {\n      id: 'Comfy.Interrupt',\n      icon: 'pi pi-stop',\n      label: 'Interrupt',\n      category: 'essentials' as const,\n      function: async () => {\n        await api.interrupt(executionStore.activePromptId)\n        toastStore.add({\n          severity: 'info',\n          summary: t('g.interrupted'),\n          detail: t('toastMessages.interrupted'),\n          life: 1000\n        })\n      }\n    },\n    {\n      id: 'Comfy.ClearPendingTasks',\n      icon: 'pi pi-stop',\n      label: 'Clear Pending Tasks',\n      category: 'essentials' as const,\n      function: async () => {\n        await useQueueStore().clear(['queue'])\n        toastStore.add({\n          severity: 'info',\n          summary: t('g.confirmed'),\n          detail: t('toastMessages.pendingTasksDeleted'),\n          life: 3000\n        })\n      }\n    },\n    {\n      id: 'Comfy.BrowseTemplates',\n      icon: 'pi pi-folder-open',\n      label: 'Browse Templates',\n      function: () => {\n        dialogService.showTemplateWorkflowsDialog()\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ZoomIn',\n      icon: 'pi pi-plus',\n      label: 'Zoom In',\n      category: 'view-controls' as const,\n      function: () => {\n        const ds = app.canvas.ds\n        ds.changeScale(\n          ds.scale * 1.1,\n          ds.element ? [ds.element.width / 2, ds.element.height / 2] : undefined\n        )\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ZoomOut',\n      icon: 'pi pi-minus',\n      label: 'Zoom Out',\n      category: 'view-controls' as const,\n      function: () => {\n        const ds = app.canvas.ds\n        ds.changeScale(\n          ds.scale / 1.1,\n          ds.element ? [ds.element.width / 2, ds.element.height / 2] : undefined\n        )\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.FitView',\n      icon: 'pi pi-expand',\n      label: 'Fit view to selected nodes',\n      category: 'view-controls' as const,\n      function: () => {\n        if (app.canvas.empty) {\n          toastStore.add({\n            severity: 'error',\n            summary: t('toastMessages.emptyCanvas'),\n            life: 3000\n          })\n          return\n        }\n        app.canvas.fitViewToSelectionAnimated()\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleLock',\n      icon: 'pi pi-lock',\n      label: 'Canvas Toggle Lock',\n      function: () => {\n        app.canvas['read_only'] = !app.canvas['read_only']\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleLinkVisibility',\n      icon: 'pi pi-eye',\n      label: 'Canvas Toggle Link Visibility',\n      versionAdded: '1.3.6',\n\n      function: (() => {\n        const settingStore = useSettingStore()\n        let lastLinksRenderMode = LiteGraph.SPLINE_LINK\n\n        return async () => {\n          const currentMode = settingStore.get('Comfy.LinkRenderMode')\n\n          if (currentMode === LiteGraph.HIDDEN_LINK) {\n            // If links are hidden, restore the last positive value or default to spline mode\n            await settingStore.set('Comfy.LinkRenderMode', lastLinksRenderMode)\n          } else {\n            // If links are visible, store the current mode and hide links\n            lastLinksRenderMode = currentMode\n            await settingStore.set(\n              'Comfy.LinkRenderMode',\n              LiteGraph.HIDDEN_LINK\n            )\n          }\n        }\n      })()\n    },\n    {\n      id: 'Comfy.Canvas.ToggleMinimap',\n      icon: 'pi pi-map',\n      label: 'Canvas Toggle Minimap',\n      versionAdded: '1.24.1',\n      function: async () => {\n        const settingStore = useSettingStore()\n        await settingStore.set(\n          'Comfy.Minimap.Visible',\n          !settingStore.get('Comfy.Minimap.Visible')\n        )\n      }\n    },\n    {\n      id: 'Comfy.QueuePrompt',\n      icon: 'pi pi-play',\n      label: 'Queue Prompt',\n      versionAdded: '1.3.7',\n      category: 'essentials' as const,\n      function: async () => {\n        const batchCount = useQueueSettingsStore().batchCount\n        await app.queuePrompt(0, batchCount)\n      }\n    },\n    {\n      id: 'Comfy.QueuePromptFront',\n      icon: 'pi pi-play',\n      label: 'Queue Prompt (Front)',\n      versionAdded: '1.3.7',\n      category: 'essentials' as const,\n      function: async () => {\n        const batchCount = useQueueSettingsStore().batchCount\n        await app.queuePrompt(-1, batchCount)\n      }\n    },\n    {\n      id: 'Comfy.QueueSelectedOutputNodes',\n      icon: 'pi pi-play',\n      label: 'Queue Selected Output Nodes',\n      versionAdded: '1.19.6',\n      function: async () => {\n        const batchCount = useQueueSettingsStore().batchCount\n        const selectedNodes = getSelectedNodes()\n        const selectedOutputNodes = filterOutputNodes(selectedNodes)\n\n        if (selectedOutputNodes.length === 0) {\n          toastStore.add({\n            severity: 'error',\n            summary: t('toastMessages.nothingToQueue'),\n            detail: t('toastMessages.pleaseSelectOutputNodes'),\n            life: 3000\n          })\n          return\n        }\n\n        // Get execution IDs for all selected output nodes and their descendants\n        const executionIds =\n          getExecutionIdsForSelectedNodes(selectedOutputNodes)\n        await app.queuePrompt(0, batchCount, executionIds)\n      }\n    },\n    {\n      id: 'Comfy.ShowSettingsDialog',\n      icon: 'pi pi-cog',\n      label: 'Show Settings Dialog',\n      versionAdded: '1.3.7',\n      category: 'view-controls' as const,\n      function: () => {\n        dialogService.showSettingsDialog()\n      }\n    },\n    {\n      id: 'Comfy.Graph.GroupSelectedNodes',\n      icon: 'pi pi-sitemap',\n      label: 'Group Selected Nodes',\n      versionAdded: '1.3.7',\n      category: 'essentials' as const,\n      function: () => {\n        const { canvas } = app\n        if (!canvas.selectedItems?.size) {\n          toastStore.add({\n            severity: 'error',\n            summary: t('toastMessages.nothingToGroup'),\n            detail: t('toastMessages.pleaseSelectNodesToGroup'),\n            life: 3000\n          })\n          return\n        }\n        const group = new LGraphGroup()\n        const padding = useSettingStore().get(\n          'Comfy.GroupSelectedNodes.Padding'\n        )\n        group.resizeTo(canvas.selectedItems, padding)\n        canvas.graph?.add(group)\n        useTitleEditorStore().titleEditorTarget = group\n      }\n    },\n    {\n      id: 'Workspace.NextOpenedWorkflow',\n      icon: 'pi pi-step-forward',\n      label: 'Next Opened Workflow',\n      versionAdded: '1.3.9',\n      function: async () => {\n        await workflowService.loadNextOpenedWorkflow()\n      }\n    },\n    {\n      id: 'Workspace.PreviousOpenedWorkflow',\n      icon: 'pi pi-step-backward',\n      label: 'Previous Opened Workflow',\n      versionAdded: '1.3.9',\n      function: async () => {\n        await workflowService.loadPreviousOpenedWorkflow()\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleSelectedNodes.Mute',\n      icon: 'pi pi-volume-off',\n      label: 'Mute/Unmute Selected Nodes',\n      versionAdded: '1.3.11',\n      category: 'essentials' as const,\n      function: () => {\n        toggleSelectedNodesMode(LGraphEventMode.NEVER)\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleSelectedNodes.Bypass',\n      icon: 'pi pi-shield',\n      label: 'Bypass/Unbypass Selected Nodes',\n      versionAdded: '1.3.11',\n      category: 'essentials' as const,\n      function: () => {\n        toggleSelectedNodesMode(LGraphEventMode.BYPASS)\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleSelectedNodes.Pin',\n      icon: 'pi pi-pin',\n      label: 'Pin/Unpin Selected Nodes',\n      versionAdded: '1.3.11',\n      category: 'essentials' as const,\n      function: () => {\n        getSelectedNodes().forEach((node) => {\n          node.pin(!node.pinned)\n        })\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleSelected.Pin',\n      icon: 'pi pi-pin',\n      label: 'Pin/Unpin Selected Items',\n      versionAdded: '1.3.33',\n      function: () => {\n        for (const item of app.canvas.selectedItems) {\n          if (item instanceof LGraphNode || item instanceof LGraphGroup) {\n            item.pin(!item.pinned)\n          }\n        }\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.Resize',\n      icon: 'pi pi-minus',\n      label: 'Resize Selected Nodes',\n      versionAdded: '',\n      function: () => {\n        getSelectedNodes().forEach((node) => {\n          const optimalSize = node.computeSize()\n          node.setSize([optimalSize[0], optimalSize[1]])\n        })\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Canvas.ToggleSelectedNodes.Collapse',\n      icon: 'pi pi-minus',\n      label: 'Collapse/Expand Selected Nodes',\n      versionAdded: '1.3.11',\n      function: () => {\n        getSelectedNodes().forEach((node) => {\n          node.collapse()\n        })\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.ToggleTheme',\n      icon: 'pi pi-moon',\n      label: 'Toggle Theme (Dark/Light)',\n      versionAdded: '1.3.12',\n      function: (() => {\n        let previousDarkTheme: string = DEFAULT_DARK_COLOR_PALETTE.id\n        let previousLightTheme: string = DEFAULT_LIGHT_COLOR_PALETTE.id\n\n        return async () => {\n          const settingStore = useSettingStore()\n          const theme = colorPaletteStore.completedActivePalette\n          if (theme.light_theme) {\n            previousLightTheme = theme.id\n            await settingStore.set('Comfy.ColorPalette', previousDarkTheme)\n          } else {\n            previousDarkTheme = theme.id\n            await settingStore.set('Comfy.ColorPalette', previousLightTheme)\n          }\n        }\n      })()\n    },\n    {\n      id: 'Workspace.ToggleBottomPanel',\n      icon: 'pi pi-list',\n      label: 'Toggle Bottom Panel',\n      versionAdded: '1.3.22',\n      category: 'view-controls' as const,\n      function: () => {\n        bottomPanelStore.toggleBottomPanel()\n      }\n    },\n    {\n      id: 'Workspace.ToggleFocusMode',\n      icon: 'pi pi-eye',\n      label: 'Toggle Focus Mode',\n      versionAdded: '1.3.27',\n      category: 'view-controls' as const,\n      function: () => {\n        useWorkspaceStore().toggleFocusMode()\n      }\n    },\n    {\n      id: 'Comfy.Graph.FitGroupToContents',\n      icon: 'pi pi-expand',\n      label: 'Fit Group To Contents',\n      versionAdded: '1.4.9',\n      function: () => {\n        for (const group of app.canvas.selectedItems) {\n          if (group instanceof LGraphGroup) {\n            group.recomputeInsideNodes()\n            const padding = useSettingStore().get(\n              'Comfy.GroupSelectedNodes.Padding'\n            )\n            group.resizeTo(group.children, padding)\n            app.graph.change()\n          }\n        }\n      }\n    },\n    {\n      id: 'Comfy.Help.OpenComfyUIIssues',\n      icon: 'pi pi-github',\n      label: 'Open ComfyUI Issues',\n      menubarLabel: 'ComfyUI Issues',\n      versionAdded: '1.5.5',\n      function: () => {\n        window.open(\n          'https://github.com/comfyanonymous/ComfyUI/issues',\n          '_blank'\n        )\n      }\n    },\n    {\n      id: 'Comfy.Help.OpenComfyUIDocs',\n      icon: 'pi pi-info-circle',\n      label: 'Open ComfyUI Docs',\n      menubarLabel: 'ComfyUI Docs',\n      versionAdded: '1.5.5',\n      function: () => {\n        window.open('https://docs.comfy.org/', '_blank')\n      }\n    },\n    {\n      id: 'Comfy.Help.OpenComfyOrgDiscord',\n      icon: 'pi pi-discord',\n      label: 'Open Comfy-Org Discord',\n      menubarLabel: 'Comfy-Org Discord',\n      versionAdded: '1.5.5',\n      function: () => {\n        window.open('https://www.comfy.org/discord', '_blank')\n      }\n    },\n    {\n      id: 'Workspace.SearchBox.Toggle',\n      icon: 'pi pi-search',\n      label: 'Toggle Search Box',\n      versionAdded: '1.5.7',\n      function: () => {\n        useSearchBoxStore().toggleVisible()\n      }\n    },\n    {\n      id: 'Comfy.Help.AboutComfyUI',\n      icon: 'pi pi-info-circle',\n      label: 'Open About ComfyUI',\n      menubarLabel: 'About ComfyUI',\n      versionAdded: '1.6.4',\n      function: () => {\n        dialogService.showSettingsDialog('about')\n      }\n    },\n    {\n      id: 'Comfy.DuplicateWorkflow',\n      icon: 'pi pi-clone',\n      label: 'Duplicate Current Workflow',\n      versionAdded: '1.6.15',\n      function: async () => {\n        await workflowService.duplicateWorkflow(workflowStore.activeWorkflow!)\n      }\n    },\n    {\n      id: 'Workspace.CloseWorkflow',\n      icon: 'pi pi-times',\n      label: 'Close Current Workflow',\n      versionAdded: '1.7.3',\n      function: async () => {\n        if (workflowStore.activeWorkflow)\n          await workflowService.closeWorkflow(workflowStore.activeWorkflow)\n      }\n    },\n    {\n      id: 'Comfy.Feedback',\n      icon: 'pi pi-megaphone',\n      label: 'Give Feedback',\n      versionAdded: '1.8.2',\n      function: () => {\n        dialogService.showIssueReportDialog({\n          title: t('g.feedback'),\n          subtitle: t('issueReport.feedbackTitle'),\n          panelProps: {\n            errorType: 'Feedback',\n            defaultFields: ['SystemStats', 'Settings']\n          }\n        })\n      }\n    },\n    {\n      id: 'Comfy.ContactSupport',\n      icon: 'pi pi-question',\n      label: 'Contact Support',\n      versionAdded: '1.17.8',\n      function: () => {\n        dialogService.showIssueReportDialog({\n          title: t('issueReport.contactSupportTitle'),\n          subtitle: t('issueReport.contactSupportDescription'),\n          panelProps: {\n            errorType: 'ContactSupport',\n            defaultFields: ['Workflow', 'Logs', 'SystemStats', 'Settings']\n          }\n        })\n      }\n    },\n    {\n      id: 'Comfy.Help.OpenComfyUIForum',\n      icon: 'pi pi-comments',\n      label: 'Open ComfyUI Forum',\n      menubarLabel: 'ComfyUI Forum',\n      versionAdded: '1.8.2',\n      function: () => {\n        window.open('https://forum.comfy.org/', '_blank')\n      }\n    },\n    {\n      id: 'Comfy.Canvas.DeleteSelectedItems',\n      icon: 'pi pi-trash',\n      label: 'Delete Selected Items',\n      versionAdded: '1.10.5',\n      function: () => {\n        app.canvas.deleteSelected()\n        app.canvas.setDirty(true, true)\n      }\n    },\n    {\n      id: 'Comfy.Manager.CustomNodesManager',\n      icon: 'pi pi-puzzle',\n      label: 'Toggle the Custom Nodes Manager',\n      versionAdded: '1.12.10',\n      function: () => {\n        dialogService.toggleManagerDialog()\n      }\n    },\n    {\n      id: 'Comfy.Manager.ToggleManagerProgressDialog',\n      icon: 'pi pi-spinner',\n      label: 'Toggle the Custom Nodes Manager Progress Bar',\n      versionAdded: '1.13.9',\n      function: () => {\n        dialogService.toggleManagerProgressDialog()\n      }\n    },\n    {\n      id: 'Comfy.User.OpenSignInDialog',\n      icon: 'pi pi-user',\n      label: 'Open Sign In Dialog',\n      versionAdded: '1.17.6',\n      function: async () => {\n        await dialogService.showSignInDialog()\n      }\n    },\n    {\n      id: 'Comfy.User.SignOut',\n      icon: 'pi pi-sign-out',\n      label: 'Sign Out',\n      versionAdded: '1.18.1',\n      function: async () => {\n        await firebaseAuthActions.logout()\n      }\n    },\n    {\n      id: 'Comfy.Canvas.MoveSelectedNodes.Up',\n      icon: 'pi pi-arrow-up',\n      label: 'Move Selected Nodes Up',\n      versionAdded: moveSelectedNodesVersionAdded,\n      function: () => moveSelectedNodes(([x, y], gridSize) => [x, y - gridSize])\n    },\n    {\n      id: 'Comfy.Canvas.MoveSelectedNodes.Down',\n      icon: 'pi pi-arrow-down',\n      label: 'Move Selected Nodes Down',\n      versionAdded: moveSelectedNodesVersionAdded,\n      function: () => moveSelectedNodes(([x, y], gridSize) => [x, y + gridSize])\n    },\n    {\n      id: 'Comfy.Canvas.MoveSelectedNodes.Left',\n      icon: 'pi pi-arrow-left',\n      label: 'Move Selected Nodes Left',\n      versionAdded: moveSelectedNodesVersionAdded,\n      function: () => moveSelectedNodes(([x, y], gridSize) => [x - gridSize, y])\n    },\n    {\n      id: 'Comfy.Canvas.MoveSelectedNodes.Right',\n      icon: 'pi pi-arrow-right',\n      label: 'Move Selected Nodes Right',\n      versionAdded: moveSelectedNodesVersionAdded,\n      function: () => moveSelectedNodes(([x, y], gridSize) => [x + gridSize, y])\n    },\n    {\n      id: 'Comfy.Canvas.AddEditModelStep',\n      icon: 'pi pi-pen-to-square',\n      label: 'Add Edit Model Step',\n      versionAdded: '1.23.3',\n      function: async () => {\n        const node = app.canvas.selectedItems.values().next().value\n        if (!(node instanceof LGraphNode)) return\n        await addFluxKontextGroupNode(node)\n      }\n    },\n    {\n      id: 'Comfy.Graph.ConvertToSubgraph',\n      icon: 'pi pi-sitemap',\n      label: 'Convert Selection to Subgraph',\n      versionAdded: '1.20.1',\n      category: 'essentials' as const,\n      function: () => {\n        const canvas = canvasStore.getCanvas()\n        const graph = canvas.subgraph ?? canvas.graph\n        if (!graph) throw new TypeError('Canvas has no graph or subgraph set.')\n\n        const res = graph.convertToSubgraph(canvas.selectedItems)\n        if (!res) {\n          toastStore.add({\n            severity: 'error',\n            summary: t('toastMessages.cannotCreateSubgraph'),\n            detail: t('toastMessages.failedToConvertToSubgraph'),\n            life: 3000\n          })\n          return\n        }\n        const { node } = res\n        canvas.select(node)\n      }\n    },\n    {\n      id: 'Workspace.ToggleBottomPanel.Shortcuts',\n      icon: 'pi pi-key',\n      label: 'Show Keybindings Dialog',\n      versionAdded: '1.24.1',\n      category: 'view-controls' as const,\n      function: () => {\n        bottomPanelStore.togglePanel('shortcuts')\n      }\n    },\n    {\n      id: 'Comfy.Graph.ExitSubgraph',\n      icon: 'pi pi-arrow-up',\n      label: 'Exit Subgraph',\n      versionAdded: '1.20.1',\n      function: () => {\n        const canvas = useCanvasStore().getCanvas()\n        const navigationStore = useSubgraphNavigationStore()\n        if (!canvas.graph) return\n\n        canvas.setGraph(\n          navigationStore.navigationStack.at(-2) ?? canvas.graph.rootGraph\n        )\n      }\n    }\n  ]\n\n  return commands.map((command) => ({ ...command, source: 'System' }))\n}\n","'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    return (\n      compareIdentifiers(this.major, other.major) ||\n      compareIdentifiers(this.minor, other.minor) ||\n      compareIdentifiers(this.patch, other.patch)\n    )\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","import { useStorage } from '@vueuse/core'\nimport { defineStore } from 'pinia'\nimport * as semver from 'semver'\nimport { computed } from 'vue'\n\nimport config from '@/config'\nimport { useSystemStatsStore } from '@/stores/systemStatsStore'\n\nconst DISMISSAL_DURATION_MS = 7 * 24 * 60 * 60 * 1000 // 7 days\n\nexport const useVersionCompatibilityStore = defineStore(\n  'versionCompatibility',\n  () => {\n    const systemStatsStore = useSystemStatsStore()\n\n    const frontendVersion = computed(() => config.app_version)\n    const backendVersion = computed(\n      () => systemStatsStore.systemStats?.system?.comfyui_version ?? ''\n    )\n    const requiredFrontendVersion = computed(\n      () =>\n        systemStatsStore.systemStats?.system?.required_frontend_version ?? ''\n    )\n\n    const isFrontendOutdated = computed(() => {\n      if (\n        !frontendVersion.value ||\n        !requiredFrontendVersion.value ||\n        !semver.valid(frontendVersion.value) ||\n        !semver.valid(requiredFrontendVersion.value)\n      ) {\n        return false\n      }\n      // Returns true if required version is greater than frontend version\n      return semver.gt(requiredFrontendVersion.value, frontendVersion.value)\n    })\n\n    const isFrontendNewer = computed(() => {\n      // We don't warn about frontend being newer than backend\n      // Only warn when frontend is outdated (behind required version)\n      return false\n    })\n\n    const hasVersionMismatch = computed(() => {\n      return isFrontendOutdated.value\n    })\n\n    const versionKey = computed(() => {\n      if (\n        !frontendVersion.value ||\n        !backendVersion.value ||\n        !requiredFrontendVersion.value\n      ) {\n        return null\n      }\n      return `${frontendVersion.value}-${backendVersion.value}-${requiredFrontendVersion.value}`\n    })\n\n    // Use reactive storage for dismissals - creates a reactive ref that syncs with localStorage\n    // All version mismatch dismissals are stored in a single object for clean localStorage organization\n    const dismissalStorage = useStorage(\n      'comfy.versionMismatch.dismissals',\n      {} as Record<string, number>,\n      localStorage,\n      {\n        serializer: {\n          read: (value: string) => {\n            try {\n              return JSON.parse(value)\n            } catch {\n              return {}\n            }\n          },\n          write: (value: Record<string, number>) => JSON.stringify(value)\n        }\n      }\n    )\n\n    const isDismissed = computed(() => {\n      if (!versionKey.value) return false\n\n      const dismissedUntil = dismissalStorage.value[versionKey.value]\n      if (!dismissedUntil) return false\n\n      // Check if dismissal has expired\n      return Date.now() < dismissedUntil\n    })\n\n    const shouldShowWarning = computed(() => {\n      return hasVersionMismatch.value && !isDismissed.value\n    })\n\n    const warningMessage = computed(() => {\n      if (isFrontendOutdated.value) {\n        return {\n          type: 'outdated' as const,\n          frontendVersion: frontendVersion.value,\n          requiredVersion: requiredFrontendVersion.value\n        }\n      }\n      return null\n    })\n\n    async function checkVersionCompatibility() {\n      if (!systemStatsStore.systemStats) {\n        await systemStatsStore.fetchSystemStats()\n      }\n    }\n\n    function dismissWarning() {\n      if (!versionKey.value) return\n\n      const dismissUntil = Date.now() + DISMISSAL_DURATION_MS\n      dismissalStorage.value = {\n        ...dismissalStorage.value,\n        [versionKey.value]: dismissUntil\n      }\n    }\n\n    async function initialize() {\n      await checkVersionCompatibility()\n    }\n\n    return {\n      frontendVersion,\n      backendVersion,\n      requiredFrontendVersion,\n      hasVersionMismatch,\n      shouldShowWarning,\n      warningMessage,\n      isFrontendOutdated,\n      isFrontendNewer,\n      checkVersionCompatibility,\n      dismissWarning,\n      initialize\n    }\n  }\n)\n","import { whenever } from '@vueuse/core'\nimport { computed, onMounted } from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport { useToastStore } from '@/stores/toastStore'\nimport { useVersionCompatibilityStore } from '@/stores/versionCompatibilityStore'\n\nexport interface UseFrontendVersionMismatchWarningOptions {\n  immediate?: boolean\n}\n\n/**\n * Composable for handling frontend version mismatch warnings.\n *\n * Displays toast notifications when the frontend version is incompatible with the backend,\n * either because the frontend is outdated or newer than the backend expects.\n * Automatically dismisses warnings when shown and persists dismissal state for 7 days.\n *\n * @param options - Configuration options\n * @param options.immediate - If true, automatically shows warning when version mismatch is detected\n * @returns Object with methods and computed properties for managing version warnings\n *\n * @example\n * ```ts\n * // Show warning immediately when mismatch detected\n * const { showWarning, shouldShowWarning } = useFrontendVersionMismatchWarning({ immediate: true })\n *\n * // Manual control\n * const { showWarning } = useFrontendVersionMismatchWarning()\n * showWarning() // Call when needed\n * ```\n */\nexport function useFrontendVersionMismatchWarning(\n  options: UseFrontendVersionMismatchWarningOptions = {}\n) {\n  const { immediate = false } = options\n  const { t } = useI18n()\n  const toastStore = useToastStore()\n  const versionCompatibilityStore = useVersionCompatibilityStore()\n\n  // Track if we've already shown the warning\n  let hasShownWarning = false\n\n  const showWarning = () => {\n    // Prevent showing the warning multiple times\n    if (hasShownWarning) return\n\n    const message = versionCompatibilityStore.warningMessage\n    if (!message) return\n\n    const detailMessage = t('g.frontendOutdated', {\n      frontendVersion: message.frontendVersion,\n      requiredVersion: message.requiredVersion\n    })\n\n    const fullMessage = t('g.versionMismatchWarningMessage', {\n      warning: t('g.versionMismatchWarning'),\n      detail: detailMessage\n    })\n\n    toastStore.addAlert(fullMessage)\n    hasShownWarning = true\n\n    // Automatically dismiss the warning so it won't show again for 7 days\n    versionCompatibilityStore.dismissWarning()\n  }\n\n  onMounted(() => {\n    // Only set up the watcher if immediate is true\n    if (immediate) {\n      whenever(\n        () => versionCompatibilityStore.shouldShowWarning,\n        () => {\n          showWarning()\n        },\n        {\n          immediate: true,\n          once: true\n        }\n      )\n    }\n  })\n\n  return {\n    showWarning,\n    shouldShowWarning: computed(\n      () => versionCompatibilityStore.shouldShowWarning\n    ),\n    dismissWarning: versionCompatibilityStore.dismissWarning,\n    hasVersionMismatch: computed(\n      () => versionCompatibilityStore.hasVersionMismatch\n    )\n  }\n}\n","import { useFavicon } from '@vueuse/core'\nimport { watch } from 'vue'\n\nimport { useExecutionStore } from '@/stores/executionStore'\n\nexport const useProgressFavicon = () => {\n  const defaultFavicon = '/assets/images/favicon_progress_16x16/frame_9.png'\n  const favicon = useFavicon(defaultFavicon)\n  const executionStore = useExecutionStore()\n  const totalFrames = 10\n\n  watch(\n    [() => executionStore.executionProgress, () => executionStore.isIdle],\n    ([progress, isIdle]) => {\n      if (isIdle) {\n        favicon.value = defaultFavicon\n      } else {\n        const frame = Math.min(\n          Math.max(0, Math.floor(progress * totalFrames)),\n          totalFrames - 1\n        )\n        favicon.value = `/assets/images/favicon_progress_16x16/frame_${frame}.png`\n      }\n    }\n  )\n}\n","export enum LatentPreviewMethod {\n  NoPreviews = 'none',\n  Auto = 'auto',\n  Latent2RGB = 'latent2rgb',\n  TAESD = 'taesd'\n}\n\nexport enum LogLevel {\n  DEBUG = 'DEBUG',\n  INFO = 'INFO',\n  WARNING = 'WARNING',\n  ERROR = 'ERROR',\n  CRITICAL = 'CRITICAL'\n}\n\nexport enum HashFunction {\n  MD5 = 'md5',\n  SHA1 = 'sha1',\n  SHA256 = 'sha256',\n  SHA512 = 'sha512'\n}\n\nexport enum AutoLaunch {\n  // Let server decide whether to auto launch based on the current environment\n  Auto = 'auto',\n  // Disable auto launch\n  Disable = 'disable',\n  // Enable auto launch\n  Enable = 'enable'\n}\n\nexport enum CudaMalloc {\n  // Let server decide whether to use CUDA malloc based on the current environment\n  Auto = 'auto',\n  // Disable CUDA malloc\n  Disable = 'disable',\n  // Enable CUDA malloc\n  Enable = 'enable'\n}\n\nexport enum FloatingPointPrecision {\n  AUTO = 'auto',\n  FP64 = 'fp64',\n  FP32 = 'fp32',\n  FP16 = 'fp16',\n  BF16 = 'bf16',\n  FP8E4M3FN = 'fp8_e4m3fn',\n  FP8E5M2 = 'fp8_e5m2'\n}\n\nexport enum CrossAttentionMethod {\n  Auto = 'auto',\n  Split = 'split',\n  Quad = 'quad',\n  Pytorch = 'pytorch'\n}\n\nexport enum VramManagement {\n  Auto = 'auto',\n  GPUOnly = 'gpu-only',\n  HighVram = 'highvram',\n  NormalVram = 'normalvram',\n  LowVram = 'lowvram',\n  NoVram = 'novram',\n  CPU = 'cpu'\n}\n","import {\n  AutoLaunch,\n  CrossAttentionMethod,\n  CudaMalloc,\n  FloatingPointPrecision,\n  HashFunction,\n  LatentPreviewMethod,\n  LogLevel,\n  VramManagement\n} from '@/types/serverArgs'\nimport { FormItem } from '@/types/settingTypes'\n\nexport type ServerConfigValue = string | number | true | null | undefined\n\nexport interface ServerConfig<T> extends FormItem {\n  id: string\n  defaultValue: T\n  category?: string[]\n  // Override the default value getter with a custom function.\n  getValue?: (value: T) => Record<string, ServerConfigValue>\n}\n\nexport const WEB_ONLY_CONFIG_ITEMS: ServerConfig<any>[] = [\n  // Launch behavior\n  {\n    id: 'auto-launch',\n    name: 'Automatically opens in the browser on startup',\n    category: ['Launch'],\n    type: 'combo',\n    options: Object.values(AutoLaunch),\n    defaultValue: AutoLaunch.Auto,\n    getValue: (value: AutoLaunch) => {\n      switch (value) {\n        case AutoLaunch.Auto:\n          return {}\n        case AutoLaunch.Enable:\n          return {\n            ['auto-launch']: true\n          }\n        case AutoLaunch.Disable:\n          return {\n            ['disable-auto-launch']: true\n          }\n      }\n    }\n  }\n]\n\nexport const SERVER_CONFIG_ITEMS: ServerConfig<any>[] = [\n  // Network settings\n  {\n    id: 'listen',\n    name: 'Host: The IP address to listen on',\n    category: ['Network'],\n    type: 'text',\n    defaultValue: '127.0.0.1'\n  },\n  {\n    id: 'port',\n    name: 'Port: The port to listen on',\n    category: ['Network'],\n    type: 'number',\n    // The default launch port for desktop app is 8000 instead of 8188.\n    defaultValue: 8000\n  },\n  {\n    id: 'tls-keyfile',\n    name: 'TLS Key File: Path to TLS key file for HTTPS',\n    category: ['Network'],\n    type: 'text',\n    defaultValue: ''\n  },\n  {\n    id: 'tls-certfile',\n    name: 'TLS Certificate File: Path to TLS certificate file for HTTPS',\n    category: ['Network'],\n    type: 'text',\n    defaultValue: ''\n  },\n  {\n    id: 'enable-cors-header',\n    name: 'Enable CORS header: Use \"*\" for all origins or specify domain',\n    category: ['Network'],\n    type: 'text',\n    defaultValue: ''\n  },\n  {\n    id: 'max-upload-size',\n    name: 'Maximum upload size (MB)',\n    category: ['Network'],\n    type: 'number',\n    defaultValue: 100\n  },\n\n  // CUDA settings\n  {\n    id: 'cuda-device',\n    name: 'CUDA device index to use',\n    category: ['CUDA'],\n    type: 'number',\n    defaultValue: null\n  },\n  {\n    id: 'cuda-malloc',\n    name: 'Use CUDA malloc for memory allocation',\n    category: ['CUDA'],\n    type: 'combo',\n    options: Object.values(CudaMalloc),\n    defaultValue: CudaMalloc.Auto,\n    getValue: (value: CudaMalloc) => {\n      switch (value) {\n        case CudaMalloc.Auto:\n          return {}\n        case CudaMalloc.Enable:\n          return {\n            ['cuda-malloc']: true\n          }\n        case CudaMalloc.Disable:\n          return {\n            ['disable-cuda-malloc']: true\n          }\n      }\n    }\n  },\n\n  // Precision settings\n  {\n    id: 'global-precision',\n    name: 'Global floating point precision',\n    category: ['Inference'],\n    type: 'combo',\n    options: [\n      FloatingPointPrecision.AUTO,\n      FloatingPointPrecision.FP32,\n      FloatingPointPrecision.FP16\n    ],\n    defaultValue: FloatingPointPrecision.AUTO,\n    tooltip: 'Global floating point precision',\n    getValue: (value: FloatingPointPrecision) => {\n      switch (value) {\n        case FloatingPointPrecision.AUTO:\n          return {}\n        case FloatingPointPrecision.FP32:\n          return {\n            ['force-fp32']: true\n          }\n        case FloatingPointPrecision.FP16:\n          return {\n            ['force-fp16']: true\n          }\n        default:\n          return {}\n      }\n    }\n  },\n\n  // UNET precision\n  {\n    id: 'unet-precision',\n    name: 'UNET precision',\n    category: ['Inference'],\n    type: 'combo',\n    options: [\n      FloatingPointPrecision.AUTO,\n      FloatingPointPrecision.FP64,\n      FloatingPointPrecision.FP32,\n      FloatingPointPrecision.FP16,\n      FloatingPointPrecision.BF16,\n      FloatingPointPrecision.FP8E4M3FN,\n      FloatingPointPrecision.FP8E5M2\n    ],\n    defaultValue: FloatingPointPrecision.AUTO,\n    tooltip: 'UNET precision',\n    getValue: (value: FloatingPointPrecision) => {\n      switch (value) {\n        case FloatingPointPrecision.AUTO:\n          return {}\n        default:\n          return {\n            [`${value.toLowerCase()}-unet`]: true\n          }\n      }\n    }\n  },\n\n  // VAE settings\n  {\n    id: 'vae-precision',\n    name: 'VAE precision',\n    category: ['Inference'],\n    type: 'combo',\n    options: [\n      FloatingPointPrecision.AUTO,\n      FloatingPointPrecision.FP16,\n      FloatingPointPrecision.FP32,\n      FloatingPointPrecision.BF16\n    ],\n    defaultValue: FloatingPointPrecision.AUTO,\n    tooltip: 'VAE precision',\n    getValue: (value: FloatingPointPrecision) => {\n      switch (value) {\n        case FloatingPointPrecision.AUTO:\n          return {}\n        default:\n          return {\n            [`${value.toLowerCase()}-vae`]: true\n          }\n      }\n    }\n  },\n  {\n    id: 'cpu-vae',\n    name: 'Run VAE on CPU',\n    category: ['Inference'],\n    type: 'boolean',\n    defaultValue: false\n  },\n\n  // Text Encoder settings\n  {\n    id: 'text-encoder-precision',\n    name: 'Text Encoder precision',\n    category: ['Inference'],\n    type: 'combo',\n    options: [\n      FloatingPointPrecision.AUTO,\n      FloatingPointPrecision.FP8E4M3FN,\n      FloatingPointPrecision.FP8E5M2,\n      FloatingPointPrecision.FP16,\n      FloatingPointPrecision.FP32\n    ],\n    defaultValue: FloatingPointPrecision.AUTO,\n    tooltip: 'Text Encoder precision',\n    getValue: (value: FloatingPointPrecision) => {\n      switch (value) {\n        case FloatingPointPrecision.AUTO:\n          return {}\n        default:\n          return {\n            [`${value.toLowerCase()}-text-enc`]: true\n          }\n      }\n    }\n  },\n\n  // Memory and performance settings\n  {\n    id: 'force-channels-last',\n    name: 'Force channels-last memory format',\n    category: ['Memory'],\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'directml',\n    name: 'DirectML device index',\n    category: ['Memory'],\n    type: 'number',\n    defaultValue: null\n  },\n  {\n    id: 'disable-ipex-optimize',\n    name: 'Disable IPEX optimization',\n    category: ['Memory'],\n    type: 'boolean',\n    defaultValue: false\n  },\n\n  // Preview settings\n  {\n    id: 'preview-method',\n    name: 'Method used for latent previews',\n    category: ['Preview'],\n    type: 'combo',\n    options: Object.values(LatentPreviewMethod),\n    defaultValue: LatentPreviewMethod.NoPreviews\n  },\n  {\n    id: 'preview-size',\n    name: 'Size of preview images',\n    category: ['Preview'],\n    type: 'slider',\n    defaultValue: 512,\n    attrs: {\n      min: 128,\n      max: 2048,\n      step: 128\n    }\n  },\n\n  // Cache settings\n  {\n    id: 'cache-classic',\n    name: 'Use classic cache system',\n    category: ['Cache'],\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'cache-lru',\n    name: 'Use LRU caching with a maximum of N node results cached.',\n    category: ['Cache'],\n    type: 'number',\n    defaultValue: null,\n    tooltip: 'May use more RAM/VRAM.'\n  },\n\n  // Attention settings\n  {\n    id: 'cross-attention-method',\n    name: 'Cross attention method',\n    category: ['Attention'],\n    type: 'combo',\n    options: Object.values(CrossAttentionMethod),\n    defaultValue: CrossAttentionMethod.Auto,\n    getValue: (value: CrossAttentionMethod) => {\n      switch (value) {\n        case CrossAttentionMethod.Auto:\n          return {}\n        default:\n          return {\n            [`use-${value.toLowerCase()}-cross-attention`]: true\n          }\n      }\n    }\n  },\n  {\n    id: 'disable-xformers',\n    name: 'Disable xFormers optimization',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'force-upcast-attention',\n    name: 'Force attention upcast',\n    category: ['Attention'],\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'dont-upcast-attention',\n    name: 'Prevent attention upcast',\n    category: ['Attention'],\n    type: 'boolean',\n    defaultValue: false\n  },\n\n  // VRAM management\n  {\n    id: 'vram-management',\n    name: 'VRAM management mode',\n    category: ['Memory'],\n    type: 'combo',\n    options: Object.values(VramManagement),\n    defaultValue: VramManagement.Auto,\n    getValue: (value: VramManagement) => {\n      switch (value) {\n        case VramManagement.Auto:\n          return {}\n        default:\n          return {\n            [value]: true\n          }\n      }\n    }\n  },\n  {\n    id: 'reserve-vram',\n    name: 'Reserved VRAM (GB)',\n    category: ['Memory'],\n    type: 'number',\n    defaultValue: null,\n    tooltip:\n      'Set the amount of vram in GB you want to reserve for use by your OS/other software. By default some amount is reverved depending on your OS.'\n  },\n\n  // Misc settings\n  {\n    id: 'default-hashing-function',\n    name: 'Default hashing function for model files',\n    type: 'combo',\n    options: Object.values(HashFunction),\n    defaultValue: HashFunction.SHA256\n  },\n  {\n    id: 'disable-smart-memory',\n    name: 'Disable smart memory management',\n    tooltip:\n      'Force ComfyUI to aggressively offload to regular ram instead of keeping models in vram when it can.',\n    category: ['Memory'],\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'deterministic',\n    name: 'Make pytorch use slower deterministic algorithms when it can.',\n    type: 'boolean',\n    defaultValue: false,\n    tooltip: 'Note that this might not make images deterministic in all cases.'\n  },\n  {\n    id: 'fast',\n    name: 'Enable some untested and potentially quality deteriorating optimizations.',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'dont-print-server',\n    name: \"Don't print server output to console.\",\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'disable-metadata',\n    name: 'Disable saving prompt metadata in files.',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'disable-all-custom-nodes',\n    name: 'Disable loading all custom nodes.',\n    type: 'boolean',\n    defaultValue: false\n  },\n  {\n    id: 'log-level',\n    name: 'Logging verbosity level',\n    type: 'combo',\n    options: Object.values(LogLevel),\n    defaultValue: LogLevel.INFO,\n    getValue: (value: LogLevel) => {\n      return {\n        verbose: value\n      }\n    }\n  },\n  // Directories\n  {\n    id: 'input-directory',\n    name: 'Input directory',\n    category: ['Directories'],\n    type: 'text',\n    defaultValue: ''\n  },\n  {\n    id: 'output-directory',\n    name: 'Output directory',\n    category: ['Directories'],\n    type: 'text',\n    defaultValue: ''\n  }\n]\n","import { api } from '@/scripts/api'\nimport { app } from '@/scripts/app'\nimport {\n  useQueuePendingTaskCountStore,\n  useQueueSettingsStore\n} from '@/stores/queueStore'\n\nexport function setupAutoQueueHandler() {\n  const queueCountStore = useQueuePendingTaskCountStore()\n  const queueSettingsStore = useQueueSettingsStore()\n\n  let graphHasChanged = false\n  let internalCount = 0 // Use an internal counter here so it is instantly updated when re-queuing\n  api.addEventListener('graphChanged', () => {\n    if (queueSettingsStore.mode === 'change') {\n      if (internalCount) {\n        graphHasChanged = true\n      } else {\n        graphHasChanged = false\n        // Queue the prompt in the background\n        void app.queuePrompt(0, queueSettingsStore.batchCount)\n        internalCount++\n      }\n    }\n  })\n\n  queueCountStore.$subscribe(\n    async () => {\n      internalCount = queueCountStore.count\n      if (!internalCount && !app.lastExecutionError) {\n        if (\n          queueSettingsStore.mode === 'instant' ||\n          (queueSettingsStore.mode === 'change' && graphHasChanged)\n        ) {\n          graphHasChanged = false\n          await app.queuePrompt(0, queueSettingsStore.batchCount)\n        }\n      }\n    },\n    { detached: true }\n  )\n}\n","<template>\n  <div class=\"comfyui-body grid h-full w-full overflow-hidden\">\n    <div id=\"comfyui-body-top\" class=\"comfyui-body-top\">\n      <TopMenubar v-if=\"showTopMenu\" />\n    </div>\n    <div id=\"comfyui-body-bottom\" class=\"comfyui-body-bottom\">\n      <TopMenubar v-if=\"showBottomMenu\" />\n    </div>\n    <div id=\"comfyui-body-left\" class=\"comfyui-body-left\" />\n    <div id=\"comfyui-body-right\" class=\"comfyui-body-right\" />\n    <div id=\"graph-canvas-container\" class=\"graph-canvas-container\">\n      <GraphCanvas @ready=\"onGraphReady\" />\n    </div>\n  </div>\n\n  <GlobalToast />\n  <RerouteMigrationToast />\n  <UnloadWindowConfirmDialog v-if=\"!isElectron()\" />\n  <MenuHamburger />\n</template>\n\n<script setup lang=\"ts\">\nimport { useBreakpoints, useEventListener } from '@vueuse/core'\nimport type { ToastMessageOptions } from 'primevue/toast'\nimport { useToast } from 'primevue/usetoast'\nimport {\n  computed,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  watch,\n  watchEffect\n} from 'vue'\nimport { useI18n } from 'vue-i18n'\n\nimport MenuHamburger from '@/components/MenuHamburger.vue'\nimport UnloadWindowConfirmDialog from '@/components/dialog/UnloadWindowConfirmDialog.vue'\nimport GraphCanvas from '@/components/graph/GraphCanvas.vue'\nimport GlobalToast from '@/components/toast/GlobalToast.vue'\nimport RerouteMigrationToast from '@/components/toast/RerouteMigrationToast.vue'\nimport TopMenubar from '@/components/topbar/TopMenubar.vue'\nimport { useBrowserTabTitle } from '@/composables/useBrowserTabTitle'\nimport { useCoreCommands } from '@/composables/useCoreCommands'\nimport { useErrorHandling } from '@/composables/useErrorHandling'\nimport { useFrontendVersionMismatchWarning } from '@/composables/useFrontendVersionMismatchWarning'\nimport { useProgressFavicon } from '@/composables/useProgressFavicon'\nimport { SERVER_CONFIG_ITEMS } from '@/constants/serverConfig'\nimport { i18n } from '@/i18n'\nimport { StatusWsMessageStatus } from '@/schemas/apiSchema'\nimport { api } from '@/scripts/api'\nimport { app } from '@/scripts/app'\nimport { setupAutoQueueHandler } from '@/services/autoQueueService'\nimport { useKeybindingService } from '@/services/keybindingService'\nimport { useCommandStore } from '@/stores/commandStore'\nimport { useExecutionStore } from '@/stores/executionStore'\nimport { useMenuItemStore } from '@/stores/menuItemStore'\nimport { useModelStore } from '@/stores/modelStore'\nimport { useNodeDefStore, useNodeFrequencyStore } from '@/stores/nodeDefStore'\nimport {\n  useQueuePendingTaskCountStore,\n  useQueueStore\n} from '@/stores/queueStore'\nimport { useServerConfigStore } from '@/stores/serverConfigStore'\nimport { useSettingStore } from '@/stores/settingStore'\nimport { useVersionCompatibilityStore } from '@/stores/versionCompatibilityStore'\nimport { useBottomPanelStore } from '@/stores/workspace/bottomPanelStore'\nimport { useColorPaletteStore } from '@/stores/workspace/colorPaletteStore'\nimport { useSidebarTabStore } from '@/stores/workspace/sidebarTabStore'\nimport { useWorkspaceStore } from '@/stores/workspaceStore'\nimport { electronAPI, isElectron } from '@/utils/envUtil'\n\nsetupAutoQueueHandler()\nuseProgressFavicon()\nuseBrowserTabTitle()\n\nconst { t } = useI18n()\nconst toast = useToast()\nconst settingStore = useSettingStore()\nconst executionStore = useExecutionStore()\nconst colorPaletteStore = useColorPaletteStore()\nconst queueStore = useQueueStore()\nconst versionCompatibilityStore = useVersionCompatibilityStore()\n\nconst breakpoints = useBreakpoints({ md: 961 })\nconst isMobile = breakpoints.smaller('md')\nconst showTopMenu = computed(() => isMobile.value || useNewMenu.value === 'Top')\nconst showBottomMenu = computed(\n  () => !isMobile.value && useNewMenu.value === 'Bottom'\n)\n\nwatch(\n  () => colorPaletteStore.completedActivePalette,\n  (newTheme) => {\n    const DARK_THEME_CLASS = 'dark-theme'\n    if (newTheme.light_theme) {\n      document.body.classList.remove(DARK_THEME_CLASS)\n    } else {\n      document.body.classList.add(DARK_THEME_CLASS)\n    }\n\n    if (isElectron()) {\n      electronAPI().changeTheme({\n        color: 'rgba(0, 0, 0, 0)',\n        symbolColor: newTheme.colors.comfy_base['input-text']\n      })\n    }\n  },\n  { immediate: true }\n)\n\nif (isElectron()) {\n  watch(\n    () => queueStore.tasks,\n    (newTasks, oldTasks) => {\n      // Report tasks that previously running but are now completed (i.e. in history)\n      const oldRunningTaskIds = new Set(\n        oldTasks.filter((task) => task.isRunning).map((task) => task.promptId)\n      )\n      newTasks\n        .filter(\n          (task) => oldRunningTaskIds.has(task.promptId) && task.isHistory\n        )\n        .forEach((task) => {\n          electronAPI().Events.incrementUserProperty(\n            `execution:${task.displayStatus.toLowerCase()}`,\n            1\n          )\n          electronAPI().Events.trackEvent('execution', {\n            status: task.displayStatus.toLowerCase()\n          })\n        })\n    },\n    { deep: true }\n  )\n}\n\nwatchEffect(() => {\n  const fontSize = settingStore.get('Comfy.TextareaWidget.FontSize')\n  document.documentElement.style.setProperty(\n    '--comfy-textarea-font-size',\n    `${fontSize}px`\n  )\n})\n\nwatchEffect(() => {\n  const padding = settingStore.get('Comfy.TreeExplorer.ItemPadding')\n  document.documentElement.style.setProperty(\n    '--comfy-tree-explorer-item-padding',\n    `${padding}px`\n  )\n})\n\nwatchEffect(() => {\n  const locale = settingStore.get('Comfy.Locale')\n  if (locale) {\n    i18n.global.locale.value = locale as 'en' | 'zh' | 'ru' | 'ja'\n  }\n})\n\nconst useNewMenu = computed(() => {\n  return settingStore.get('Comfy.UseNewMenu')\n})\nwatchEffect(() => {\n  if (useNewMenu.value === 'Disabled') {\n    app.ui.menuContainer.style.setProperty('display', 'block')\n    app.ui.restoreMenuPosition()\n  } else {\n    app.ui.menuContainer.style.setProperty('display', 'none')\n  }\n})\n\nwatchEffect(() => {\n  queueStore.maxHistoryItems = settingStore.get('Comfy.Queue.MaxHistoryItems')\n})\n\nconst init = () => {\n  const coreCommands = useCoreCommands()\n  useCommandStore().registerCommands(coreCommands)\n  useMenuItemStore().registerCoreMenuCommands()\n  useKeybindingService().registerCoreKeybindings()\n  useSidebarTabStore().registerCoreSidebarTabs()\n  useBottomPanelStore().registerCoreBottomPanelTabs()\n  app.extensionManager = useWorkspaceStore()\n}\n\nconst queuePendingTaskCountStore = useQueuePendingTaskCountStore()\nconst onStatus = async (e: CustomEvent<StatusWsMessageStatus>) => {\n  queuePendingTaskCountStore.update(e)\n  await queueStore.update()\n}\n\nconst onExecutionSuccess = async () => {\n  await queueStore.update()\n}\n\nconst reconnectingMessage: ToastMessageOptions = {\n  severity: 'error',\n  summary: t('g.reconnecting')\n}\n\nconst onReconnecting = () => {\n  if (!settingStore.get('Comfy.Toast.DisableReconnectingToast')) {\n    toast.remove(reconnectingMessage)\n    toast.add(reconnectingMessage)\n  }\n}\n\nconst onReconnected = () => {\n  if (!settingStore.get('Comfy.Toast.DisableReconnectingToast')) {\n    toast.remove(reconnectingMessage)\n    toast.add({\n      severity: 'success',\n      summary: t('g.reconnected'),\n      life: 2000\n    })\n  }\n}\n\nonMounted(() => {\n  api.addEventListener('status', onStatus)\n  api.addEventListener('execution_success', onExecutionSuccess)\n  api.addEventListener('reconnecting', onReconnecting)\n  api.addEventListener('reconnected', onReconnected)\n  executionStore.bindExecutionEvents()\n\n  try {\n    init()\n  } catch (e) {\n    console.error('Failed to init ComfyUI frontend', e)\n  }\n})\n\nonBeforeUnmount(() => {\n  api.removeEventListener('status', onStatus)\n  api.removeEventListener('execution_success', onExecutionSuccess)\n  api.removeEventListener('reconnecting', onReconnecting)\n  api.removeEventListener('reconnected', onReconnected)\n  executionStore.unbindExecutionEvents()\n})\n\nuseEventListener(window, 'keydown', useKeybindingService().keybindHandler)\n\nconst { wrapWithErrorHandling, wrapWithErrorHandlingAsync } = useErrorHandling()\n\n// Initialize version mismatch warning in setup context\n// It will be triggered automatically when the store is ready\nuseFrontendVersionMismatchWarning({ immediate: true })\n\nvoid nextTick(() => {\n  versionCompatibilityStore.initialize().catch((error) => {\n    console.warn('Version compatibility check failed:', error)\n  })\n})\n\nconst onGraphReady = () => {\n  requestIdleCallback(\n    () => {\n      // Setting values now available after comfyApp.setup.\n      // Load keybindings.\n      wrapWithErrorHandling(useKeybindingService().registerUserKeybindings)()\n\n      // Load server config\n      wrapWithErrorHandling(useServerConfigStore().loadServerConfig)(\n        SERVER_CONFIG_ITEMS,\n        settingStore.get('Comfy.Server.ServerConfigValues')\n      )\n\n      // Load model folders\n      void wrapWithErrorHandlingAsync(useModelStore().loadModelFolders)()\n\n      // Non-blocking load of node frequencies\n      void wrapWithErrorHandlingAsync(\n        useNodeFrequencyStore().loadNodeFrequencies\n      )()\n\n      // Node defs now available after comfyApp.setup.\n      // Explicitly initialize nodeSearchService to avoid indexing delay when\n      // node search is triggered\n      useNodeDefStore().nodeSearchService.searchNode('')\n    },\n    { timeout: 1000 }\n  )\n}\n</script>\n\n<style scoped>\n.comfyui-body {\n  grid-template-columns: auto 1fr auto;\n  grid-template-rows: auto 1fr auto;\n}\n\n/**\n  +------------------+------------------+------------------+\n  |                                                        |\n  |  .comfyui-body-                                        |\n  |       top                                              |\n  | (spans all cols)                                       |\n  |                                                        |\n  +------------------+------------------+------------------+\n  |                  |                  |                  |\n  | .comfyui-body-   |   #graph-canvas  | .comfyui-body-   |\n  |      left        |                  |      right       |\n  |                  |                  |                  |\n  |                  |                  |                  |\n  +------------------+------------------+------------------+\n  |                                                        |\n  |  .comfyui-body-                                        |\n  |      bottom                                            |\n  | (spans all cols)                                       |\n  |                                                        |\n  +------------------+------------------+------------------+\n*/\n\n.comfyui-body-top {\n  order: -5;\n  /* Span across all columns */\n  grid-column: 1/-1;\n  /* Position at the first row */\n  grid-row: 1;\n  /* Top menu bar dropdown needs to be above of graph canvas splitter overlay which is z-index: 999 */\n  /* Top menu bar z-index needs to be higher than bottom menu bar z-index as by default\n  pysssss's image feed is located at body-bottom, and it can overlap with the queue button, which\n  is located in body-top. */\n  z-index: 1001;\n  display: flex;\n  flex-direction: column;\n}\n\n.comfyui-body-left {\n  order: -4;\n  /* Position in the first column */\n  grid-column: 1;\n  /* Position below the top element */\n  grid-row: 2;\n  z-index: 10;\n  display: flex;\n}\n\n.graph-canvas-container {\n  width: 100%;\n  height: 100%;\n  order: -3;\n  grid-column: 2;\n  grid-row: 2;\n  position: relative;\n  overflow: hidden;\n}\n\n.comfyui-body-right {\n  order: -2;\n  z-index: 10;\n  grid-column: 3;\n  grid-row: 2;\n}\n\n.comfyui-body-bottom {\n  order: 4;\n  /* Span across all columns */\n  grid-column: 1/-1;\n  grid-row: 3;\n  /* Bottom menu bar dropdown needs to be above of graph canvas splitter overlay which is z-index: 999 */\n  z-index: 1000;\n  display: flex;\n  flex-direction: column;\n}\n</style>\n"],"file":"assets/GraphView-Dm8zjalu.js"}